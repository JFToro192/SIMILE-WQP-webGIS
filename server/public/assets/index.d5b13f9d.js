import{C as _,O as X,a as te,T as x,M as se,d as ae,S as ne,V as ie,W as q,b as T,L as G,c as re,o as p,e as m,f as y,t as u,g as r,F as I,r as B,p as w,h as L,n as O,i as z,j as W,w as j,k as le,v as oe,l as ce,m as b,q as f,s as de,u as ue,x as pe,y as me,z as _e}from"./vendor.eedb9b49.js";const ge=function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))n(t);new MutationObserver(t=>{for(const l of t)if(l.type==="childList")for(const i of l.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&n(i)}).observe(document,{childList:!0,subtree:!0});function a(t){const l={};return t.integrity&&(l.integrity=t.integrity),t.referrerpolicy&&(l.referrerPolicy=t.referrerpolicy),t.crossorigin==="use-credentials"?l.credentials="include":t.crossorigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function n(t){if(t.ep)return;t.ep=!0;const l=a(t);fetch(t.href,l)}};ge();var ye="/assets/assev_simile.d3f83cf6.png";function Q(){const e="."+this.element.classList[0],s="."+e.split("-")[1]+"-item",a=$(e);a.hasClass("active")?($(`${s}`).slice(0).hide(),a.removeClass("active")):($(`${s}`).slice(0).show(),a.addClass("active"))}function E(){const e="."+this.element.classList[0],s="."+e.split("-")[1]+"-panel",a=$(e),n=$(s);n.hasClass("active")?(n.hide(),a.removeClass("active"),n.removeClass("active")):(n.show(),a.addClass("active"),n.addClass("active"))}class he extends _{constructor(s){const a=s||{},n=document.createElement("button");n.innerHTML='<i class="bi bi-list"></i>';const t=document.createElement("div");t.className="show-burger ol-unselectable ol-control control-bar active",t.appendChild(n);super({element:t,target:a.target});t.addEventListener("click",Q.bind(this),!1)}}class be extends _{constructor(s){const a=s||{},n=document.createElement("button");n.innerHTML='<i class="bi bi-stack"></i>',n.title="layers panel";const t=document.createElement("div");t.className="show-layer ol-unselectable ol-control control-bar burger-item",t.appendChild(n);super({element:t,target:a.target});t.addEventListener("click",E.bind(this),!1)}}class ve extends _{constructor(s){const a=s||{},n=document.createElement("button");n.innerHTML='<i class="bi bi-info-square"></i>',n.title="metadata panel";const t=document.createElement("div");t.className="show-metadata ol-unselectable ol-control control-bar burger-item",t.appendChild(n);super({element:t,target:a.target});t.addEventListener("click",E.bind(this),!1)}}class Ae extends _{constructor(s){const a=s||{},n=document.createElement("button");n.innerHTML='<i class="bi bi-clock-history"></i>',n.title="time panel";const t=document.createElement("div");t.className="show-time ol-unselectable ol-control control-bar burger-item",t.appendChild(n);super({element:t,target:a.target});t.addEventListener("click",E.bind(this),!1)}}class fe extends _{constructor(s){const a=s||{},n=document.createElement("button");n.innerHTML='<i class="bi bi-map"></i>',n.title="basemaps";const t=document.createElement("div");t.className="show-basemap ol-unselectable ol-control control-bar burger-item",t.appendChild(n);super({element:t,target:a.target});t.addEventListener("click",E.bind(this),!1)}}class we extends _{constructor(s){const a=s||{},n=document.createElement("button");n.innerHTML='<i class="bi bi-graph-up"></i>',n.title="plot time series";const t=document.createElement("div");t.className="show-plot ol-unselectable ol-control control-bar burger-item",t.appendChild(n);super({element:t,target:a.target});t.addEventListener("click",E.bind(this),!1)}}class Le extends _{constructor(s){const a=s||{},n=document.createElement("button");n.innerHTML='<i class="bi bi-file-earmark-easel"></i>',n.title="webgis guide";const t=document.createElement("div");t.className="show-slide ol-unselectable ol-control control-bar burger-item",t.appendChild(n);super({element:t,target:a.target});t.addEventListener("click",E.bind(this),!1)}}class Ce extends _{constructor(s){const a=s||{},n=document.createElement("ul"),t=document.createElement("li"),l=document.createElement("li"),i=document.createElement("li"),o=document.createElement("li"),c=document.createElement("li");t.innerHTML='<button><i class="bi bi-people"></i></button>',l.innerHTML='<button class="social-item" style="display:none;"><i class="bi bi-facebook"></i></button>',i.innerHTML='<button class="social-item" style="display:none;"><i class="bi bi-twitter"></i></button>',o.innerHTML='<button class="social-item" style="display:none;"><i class="bi bi-linkedin"></i></button>',c.innerHTML='<button class="social-item" style="display:none;"><i class="bi bi-instagram"></i></button>',t.title="social",l.title="facebook",i.title="twitter",o.title="linkedin",c.title="instagram";const d=document.createElement("div");d.className="show-social ol-unselectable ol-control control-bar burger-item",n.appendChild(t),n.appendChild(l),n.appendChild(i),n.appendChild(o),n.appendChild(c),d.appendChild(n);super({element:d,target:a.target});t.addEventListener("click",Q.bind(this),!1)}}class xe extends _{constructor(s){const a=s||{},n=document.createElement("ul"),t=document.createElement("li"),l=document.createElement("li"),i=document.createElement("li"),o=document.createElement("li"),c=document.createElement("li");t.innerHTML='<button ><i class="bi bi-journals"></i></button>',l.innerHTML='<button class="about-item" style="display:none;"><i class="bi bi-newspaper"></i></button>',i.innerHTML='<button class="about-item" style="display:none;"><i class="bi bi-briefcase"></i></button>',o.innerHTML='<button class="about-item" style="display:none;"><i class="bi bi-github"></i></button>',c.innerHTML='<button class="about-item" style="display:none;"><i class="bi bi-calendar-week"></i></button>',t.title="portfolio",l.title="news",i.title="business intelligence platform",o.title="webgis github repository",c.title="calendar";const d=document.createElement("div");d.className="show-about ol-unselectable ol-control control-bar burger-item",n.appendChild(t),n.appendChild(l),n.appendChild(i),n.appendChild(o),n.appendChild(c),d.appendChild(n);super({element:d,target:a.target});t.addEventListener("click",Q.bind(this),!1)}}class Ee extends _{constructor(s){const a=s||{},n=document.createElement("div"),t=document.createElement("a");t.href="https://www.progetti.interreg-italiasvizzera.eu/it/b/78/sistemainformativoperilmonitoraggiointegratodeilaghiinsubriciedeiloroe";const l=document.createElement("img");l.src=ye,l.alt="logo-simile-interreg",t.appendChild(l),n.appendChild(t);const i=document.createElement("div");i.className="project-logo ol-unselectable ol-control",i.appendChild(n);super({element:i,target:a.target})}}new _({element:document.getElementById("layerPanel")});new _({element:document.getElementById("metadataPanel")});new _({element:document.getElementById("timePanel")});new _({element:document.getElementById("basemapPanel")});new _({element:document.getElementById("plotPanel")});new _({element:document.getElementById("slidePanel")});new _({element:document.getElementById("popup")});const Se=new X,Ie=new te({layers:[new x({source:Se})]});function Be(){return new se({target:"map",controls:ae().extend([new ne,Ie,new he,new be,new ve,new Ae,new fe,new we,new Le,new Ce,new xe,new Ee]),view:new ie({center:[994904.36016,5775887605341e-6],zoom:10})})}new q;function Y(e,s,a,n){return new x({source:new re({url:s,params:{LAYERS:e,TILED:!0,STYLES:n},crossOrigin:"anonymous",serverType:"geoserver"}),visible:!1,opacity:a})}function K(e,s){return e[s.name]={},e[s.name].workspace=s.workspace,e[s.name].typology=s.typology,e[s.name].crs=s.crs,e[s.name].sensor=s.sensor,e[s.name].timeComplete=[s.timeComplete],e[s.name].timeFormatted=[s.timeFormatted],e[s.name].level=s.level,e[s.name].layer=[s.layer],e}function De(e,s,a){let n=Object.keys(s),t={};return t.static={},t.time={},t.basemap={},e.forEach(l=>{let i={},o=l.Name.split(":");if(i.workspace=o[0],i.name=o[1].split("_").slice(0,3).join("_"),i.sensor=o[1].split("_")[0],i.typology=o[1].split("_")[1],i.crs=o[1].split("_")[2],o[1].split("_")[3]!=null){i.timeComplete=o[1].split("_")[3];let d=o[1].split("_")[3].split("T")[0];i.timeFormatted=d.slice(0,4)+"-"+d.slice(4,6)+"-"+d.slice(6,8)}else i.timeComplete=void 0,i.timeFormatted=void 0;i.level=o[1].split("_")[4];let c="";n.includes(i.typology)&&(c=i.typology.toLowerCase()),i.layer=Y(l.Name,a,.5,c),i.timeComplete!=null?i.name in t.time?(i.layer=Y(l.Name,a,1,c),i.layer.title="time",i.layer.date=i.timeFormatted,i.layer.name=i.name,t.time[i.name].timeComplete.push(i.timeComplete),t.time[i.name].timeFormatted.push(i.timeFormatted),t.time[i.name].layer.push(i.layer)):(i.layer=Y(l.Name,a,1),i.layer.title="time",i.layer.name=i.name,i.layer.date=i.timeFormatted,t.time=K(t.time,i)):t.static=K(t.static,i)}),t}function Me(e){let s={osm:{title:"osm",layer:[new x({source:new X,visible:!0})]},watercolor:{title:"watercolor",source:"Stamen",layer:[new x({source:new T({layer:"watercolor"}),visible:!1})]},terrain:{title:"terrain",source:"Stamen",layer:[new x({source:new T({layer:"terrain"}),visible:!1})]},toner:{title:"toner",source:"Stamen",layer:[new x({source:new T({layer:"toner"}),visible:!1})]}};return e.basemap=s,e}function Pe(e){let s={},a=[],n=[],t=[],l=[],i=[];for(let o in e)if(o=="time")for(let c in e[o]){let d=e[o][c].layer;i.push(new G({layers:d,visible:!0,opacity:.5}))}else{for(let c in e[o])if(o=="basemap"){let d=e[o][c].layer[0];d.title="basemap",a.push(d)}else if(o=="static"){let d=e[o][c].layer[0];d.title="static",n.push(d)}l[0]=new G({layers:n,visible:!0,opacity:1}),t[0]=new G({layers:a,visible:!0,opacity:1})}return s.basemap=t,s.static=l,s.time=i,s}var h=(e,s)=>{const a=e.__vccOpts||e;for(const[n,t]of s)a[n]=t;return a};const Ve={name:"Layer",props:{child_msg:{type:String,default:"Layer Panel"},layer_list:{type:Object}},data(){return{}},methods:{setLayerVisible(e,s){this.$emit("setLayerVisible",{nGroup:e,index:s})},setLayerOpacity(e,s,a){let n=e.target.value;this.$emit("setLayerOpacity",{opacity:n,nGroup:s,index:a})},setLayerMetadata(e,s){this.$emit("setLayerMetadata",{layerType:e,layerName:s})}}},S=e=>(w("data-v-54f56a1a"),e=e(),L(),e),Ne={id:"layerPanel",class:"layer-panel ol-unselectable ol-control"},ke=S(()=>r("h6",{class:"static-layers-title"},[r("i",{class:"bi bi-arrow-right"}),y("Static Layers")],-1)),Te={class:"static-layers active",id:"staticLayers"},Ge={class:"layer-items"},Oe=["onChange"],We={class:"title-layer"},je=["title"],Qe=["onClick"],Ye=S(()=>r("i",{class:"bi bi-info-square"},null,-1)),$e=[Ye],He=S(()=>r("div",{class:"opct-layer"},[r("i",{class:"bi bi-circle-half"})],-1)),Fe={class:"opct-range-layer"},Je=["onChange"],Xe=S(()=>r("h6",{class:"time-series-layers-title"},[r("i",{class:"bi bi-arrow-right"}),y("Time Series Layers")],-1)),qe={class:"time-series-layers active",id:"timeSeriesLayers"},ze={class:"layer-items"},Ke=["onChange"],Re={class:"title-layer"},Ue=["title"],Ze=["onClick"],et=S(()=>r("i",{class:"bi bi-info-square"},null,-1)),tt=[et],st=S(()=>r("div",{class:"opct-layer"},[r("i",{class:"bi bi-circle-half"})],-1)),at={class:"opct-range-layer"},nt=["onChange"];function it(e,s,a,n,t,l){return p(),m("div",Ne,[y(u(a.child_msg)+" ",1),ke,r("div",Te,[(p(!0),m(I,null,B(a.layer_list.static,(i,o,c)=>(p(),m("div",{class:"static-layer layer-list",key:i.static},[r("div",Ge,[r("div",{class:O("chckbx-layer layer-static-"+c)},[r("input",{type:"checkbox",title:"set visible",name:"",id:"",onChange:d=>l.setLayerVisible(1,c)},null,40,Oe)],2),r("div",We,[r("p",{title:o},u(o),9,je)]),r("div",{class:"info-layer",onClick:d=>l.setLayerMetadata("static",{key:o})},$e,8,Qe),He,r("div",Fe,[r("input",{type:"range",name:"",id:"",min:"0",max:"1",step:"0.01",value:"0.5",onChange:d=>l.setLayerOpacity(d,1,c)},null,40,Je)])])]))),128))]),Xe,r("div",qe,[(p(!0),m(I,null,B(a.layer_list.time,(i,o,c)=>(p(),m("div",{class:"time-series-layer layer-list",key:i.time},[r("div",ze,[r("div",{class:O("chckbx-layer layer-timeSeries-"+c)},[r("input",{type:"checkbox",title:"set visible",name:"",id:"",onChange:d=>l.setLayerVisible(2,c)},null,40,Ke)],2),r("div",Re,[r("p",{title:o},u(o),9,Ue)]),r("div",{class:"info-layer",onClick:d=>l.setLayerMetadata("time",{key:o})},tt,8,Ze),st,r("div",at,[r("input",{type:"range",name:"",id:"",min:"0",max:"1",step:"0.01",value:"0.5",onChange:d=>l.setLayerOpacity(d,2,c)},null,40,nt)])])]))),128))])])}var rt=h(Ve,[["render",it],["__scopeId","data-v-54f56a1a"]]);const lt={name:"Layer",props:{child_msg:{type:String,required:!0,default:"Metadata Panel"},title:{type:String,required:!0,default:"Title"},abstract:{type:String,required:!0,default:"Select a layer"},typology:{type:String,required:!0,default:"N/A"},units:{type:String,required:!0,default:"N/A"},crs:{type:String,required:!0,default:"N/A"},to:{type:String,required:!0,default:"N/A"},tf:{type:String,required:!0,default:"N/A"},legend:{type:String,required:!0,default:"N/A"}},data(){return{}}},v=e=>(w("data-v-1728e34c"),e=e(),L(),e),ot={id:"metadataPanel",class:"metadata-panel ol-unselectable ol-control"},ct={class:"meta-title"},dt={class:"meta-abstract"},ut=v(()=>r("strong",null,"Abstract:",-1)),pt={class:"meta-info"},mt={class:"meta-details"},_t={class:"meta-details-typology"},gt=v(()=>r("strong",null,"Typology:",-1)),yt={class:"meta-details-units"},ht=v(()=>r("strong",null,"Units:",-1)),bt={class:"meta-details-crs"},vt=v(()=>r("strong",null,"CRS:",-1)),At={class:"meta-details-tstart"},ft=v(()=>r("strong",null,"Time Start:",-1)),wt=v(()=>r("br",null,null,-1)),Lt={class:"meta-details-tend"},Ct=v(()=>r("strong",null,"Time end:",-1)),xt=v(()=>r("br",null,null,-1)),Et={class:"meta-legend"},St=v(()=>r("strong",null,"Legend:",-1)),It=["src"];function Bt(e,s,a,n,t,l){return p(),m("div",ot,[y(u(a.child_msg)+" ",1),r("div",ct,[r("h6",null,u(a.title),1)]),r("div",dt,[ut,y(u(a.abstract),1)]),r("div",pt,[r("div",mt,[r("div",_t,[gt,y(u(a.typology),1)]),r("div",yt,[ht,y(" ["+u(a.units)+"]",1)]),r("div",bt,[vt,y(u(a.crs),1)]),r("div",At,[ft,wt,y(u(a.to),1)]),r("div",Lt,[Ct,xt,y(u(a.tf),1)])]),r("div",Et,[St,r("img",{src:a.legend,alt:""},null,8,It)])])])}var Dt=h(lt,[["render",Bt],["__scopeId","data-v-1728e34c"]]);const Mt={name:"Time",props:{child_msg:{type:String,default:"Time Panel"},title:{type:String,required:!0,default:"Select Layer"},datesList:{type:Object,required:!0,default:()=>({"0":"Select TS"})},datesListLength:{type:String,required:!0},currentDate:{type:String,required:!0},currentDateIndex:{type:String,required:!0},currentGroup:{type:String,required:!0}},data(){return{}},methods:{updateLayerSlider(e){console.log(e);let s=e.target.value,a=parseInt(s),n=this.currentGroup+2,t=document.getElementById("dropdownDate");t.selectedIndex=s,this.cDate=this.datesList[s],this.cDateIndex=s,this.$emit("updateLayerSlider",{nGroup:n,emitDate:a})},updateLayerDropdown(e){let s=e.target.value,a=parseInt(s),n=this.currentGroup+2,t=document.getElementById("sliderDate");t.value=s,this.cDate=this.datesList[s],this.cDateIndex=s,this.$emit("updateLayerDropdown",{nGroup:n,emitDate:a})},stepBackwards(){let e=document.getElementById("sliderDate").value,s=e-1,a=e-1,n=this.currentGroup+2;e-1>=0?(this.cDate=this.datesList[a],this.cDateIndex=a,document.getElementById("dropdownDate").selectedIndex=a,document.getElementById("sliderDate").value=a,this.$emit("updateLayerDropdown",{nGroup:n,emitDate:s})):alert("There are no previous maps for the current layer")},stepForwards(){let e=document.getElementById("dropdownDate").value,s=Number(e)+1,a=Number(e)+1,n=this.currentGroup+2;Number(e)+1<=this.datesListLength-1?(this.cDate=this.datesList[a],this.cDateIndex=a,document.getElementById("dropdownDate").selectedIndex=a,document.getElementById("sliderDate").value=a,this.$emit("updateLayerDropdown",{nGroup:n,emitDate:s})):alert("There are no later maps for the current layer")}}},H=e=>(w("data-v-48277036"),e=e(),L(),e),Pt={id:"timePanel",class:"time-panel ol-unselectable ol-control"},Vt={class:"time-container"},Nt={class:"time-header"},kt={class:"time-controls"},Tt={class:"time-controls-dates"},Gt=["value","selected"],Ot={class:"time-slider"},Wt=["max","value"],jt={id:"time-controls-backward",class:"time-controls_item ol-unselectable ol-control"},Qt=H(()=>r("i",{class:"bi bi-skip-backward-circle"},null,-1)),Yt=[Qt],$t=H(()=>r("div",{id:"time-controls-play",class:"time-controls_item ol-unselectable ol-control"},[r("div",null,[r("button",{class:"time-panel-control-button"},[r("i",{class:"bi bi-play-circle"})])])],-1)),Ht={id:"time-controls-forward",class:"time-controls_item ol-unselectable ol-control"},Ft=H(()=>r("i",{class:"bi bi-skip-forward-circle"},null,-1)),Jt=[Ft];function Xt(e,s,a,n,t,l){return p(),m("div",Pt,[r("p",null,u(a.child_msg),1),r("div",Vt,[r("div",Nt,[r("strong",null,u(a.title),1)]),r("div",kt,[r("div",Tt,[r("select",{name:"",id:"dropdownDate",onChange:s[0]||(s[0]=i=>l.updateLayerDropdown(i))},[(p(!0),m(I,null,B(a.datesList,(i,o)=>(p(),m("option",{value:o,selected:a.datesListLength,key:o},u(a.datesList[o]),9,Gt))),128))],32)]),r("div",Ot,[r("input",{type:"range",name:"",id:"sliderDate",min:"0",max:a.datesListLength-1,value:a.currentDateIndex,step:"1",onChange:s[1]||(s[1]=i=>l.updateLayerSlider(i))},null,40,Wt)]),r("div",jt,[r("button",{class:"time-panel-control-button",onClick:s[2]||(s[2]=(...i)=>l.stepBackwards&&l.stepBackwards(...i))},Yt)]),$t,r("div",Ht,[r("button",{class:"time-panel-control-button",onClick:s[3]||(s[3]=(...i)=>l.stepForwards&&l.stepForwards(...i))},Jt)])])])])}var qt=h(Mt,[["render",Xt],["__scopeId","data-v-48277036"]]),zt="/assets/osm.d6d13acb.png",Kt="/assets/terrain.d843a7bb.png",Rt="/assets/watercolor.8d0c5f2f.png",Ut="/assets/toner.19bbfbf8.png",Zt="data:image/png;base64,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";const es={name:"Basemap",props:{child_msg:{type:String,default:"Basemap Panel"},data:{type:Array},layer_list:{type:Object,require:!0}},data(){return{}},methods:{getImage(e){if(e=="osm")return zt;if(e=="terrain")return Kt;if(e=="watercolor")return Rt;if(e=="toner")return Ut;if(e=="none")return Zt},setLayerVisible(e,s){this.$emit("setLayerVisible",{nGroup:e,index:s})}}},ts={id:"basemapPanel",class:"basemap-panel ol-unselectable ol-control"},ss={class:"basemap-container"},as=["id","checked","onChange"],ns=["src"];function is(e,s,a,n,t,l){return p(),m("div",ts,[r("p",null,u(a.child_msg),1),r("div",ss,[(p(!0),m(I,null,B(a.data,(i,o)=>(p(),m("div",{key:i.layer,class:"basemap-container_item"},[r("div",null,[r("input",{type:"radio",name:"basemap-radio",id:i.layer+"-option",class:O("basemap-option"),checked:i.active,onChange:c=>l.setLayerVisible(0,o)},null,40,as),r("p",null,u(i.layer),1)]),r("img",{src:l.getImage(i.layer),alt:""},null,8,ns)]))),128))])])}var rs=h(es,[["render",is],["__scopeId","data-v-d0c7ec78"]]);console.log("hello");const ls={name:"Plot",props:{child_msg:{type:String,default:"Plot Panel"}},data(){return{}},mounted(){var e={top:10,right:30,bottom:30,left:60},s=$(".svg-container").parent().width(),a=$(".svg-container").parent().height()-80,n=d3.select(".svg-container").append("svg").attr("width",s+e.left+e.right).attr("height",a+e.top+e.bottom).append("g").attr("transform","translate("+e.left+","+e.top+")");d3.csv("https://raw.githubusercontent.com/holtzy/D3-graph-gallery/master/DATA/connectedscatter.csv",function(t){return{date:d3.timeParse("%Y-%m-%d")(t.date),value:t.value}},function(t){var l=d3.scaleTime().domain(d3.extent(t,function(o){return o.date})).range([0,s]);n.append("g").attr("transform","translate(0,"+a+")").call(d3.axisBottom(l));var i=d3.scaleLinear().domain([8e3,9200]).range([a,0]);n.append("g").call(d3.axisLeft(i)),n.append("path").datum(t).attr("fill","none").attr("stroke","#69b3a2").attr("stroke-width",1.5).attr("d",d3.line().x(function(o){return l(o.date)}).y(function(o){return i(o.value)})),n.append("g").selectAll("dot").data(t).enter().append("circle").attr("cx",function(o){return l(o.date)}).attr("cy",function(o){return i(o.value)}).attr("r",5).attr("fill","#69b3a2")})}},os=e=>(w("data-v-5385c344"),e=e(),L(),e),cs={id:"plotPanel",class:"plot-panel ol-unselectable ol-control"},ds=os(()=>r("div",{class:"svg-container"},null,-1));function us(e,s,a,n,t,l){return p(),m("div",cs,[y(u(a.child_msg)+" ",1),ds])}var ps=h(ls,[["render",us],["__scopeId","data-v-5385c344"]]),ms="/assets/i1.39c6eac4.png",_s="/assets/i2.52627267.png",gs="/assets/i3.e76ce568.png",ys="/assets/i4.df51a994.png",hs="/assets/i5.9255129d.png",bs="/assets/i6.c99fefa1.png",vs="/assets/i7.1425b493.png";const As={data(){return{}},methods:{prev(){this.$emit("prev")},next(){this.$emit("next")}}},R=e=>(w("data-v-07c985f2"),e=e(),L(),e),fs={class:"carousel-container"},ws=R(()=>r("i",{class:"bi bi-caret-left-fill"},null,-1)),Ls=[ws],Cs=R(()=>r("i",{class:"bi bi-caret-right-fill"},null,-1)),xs=[Cs];function Es(e,s,a,n,t,l){return p(),m("div",fs,[z(e.$slots,"default",{},void 0,!0),r("button",{class:"prev",onClick:s[0]||(s[0]=(...i)=>l.prev&&l.prev(...i))},Ls),r("button",{class:"next",onClick:s[1]||(s[1]=(...i)=>l.next&&l.next(...i))},xs)])}var Ss=h(As,[["render",Es],["__scopeId","data-v-07c985f2"]]);const Is={props:["visibleSlide","index","direction"],data(){return{}}},Bs={class:"carousel-slide"};function Ds(e,s,a,n,t,l){return p(),W(ce,{name:a.direction},{default:j(()=>[le(r("div",Bs,[z(e.$slots,"default",{},void 0,!0)],512),[[oe,a.visibleSlide===a.index]])]),_:3},8,["name"])}var Ms=h(Is,[["render",Ds],["__scopeId","data-v-664b1638"]]);const Ps={name:"Slide",props:{child_msg:{type:String,default:"Slide Panel"},settings:{type:Object}},data(){return{visibleSlide:0,direction:""}},computed:{slidesLen(){return this.settings.slides.length}},methods:{prev(){this.visibleSlide<=0?this.visibleSlide=this.slidesLen-1:this.visibleSlide--,this.direction="right"},next(){this.visibleSlide>=this.slidesLen-1?this.visibleSlide=0:this.visibleSlide++,this.direction="left"},getImage(e){if(e=="i1.png")return ms;if(e=="i2.png")return _s;if(e=="i3.png")return gs;if(e=="i4.png")return ys;if(e=="i5.png")return hs;if(e=="i6.png")return bs;if(e=="i7.png")return vs}},mounted(){},components:{CarouselContainer:Ss,CarouselSlide:Ms}},Vs=e=>(w("data-v-339db63c"),e=e(),L(),e),Ns={id:"slidePanel",class:"slide-panel ol-unselectable ol-control",style:{display:"none"}},ks={class:"slidepanel-show"},Ts={class:"slide-title"},Gs={class:"slide-description"},Os=["src","alt"],Ws=Vs(()=>r("div",{class:"slide-current"},null,-1));function js(e,s,a,n,t,l){const i=b("carousel-slide"),o=b("carousel-container");return p(),m("div",Ns,[y(u(a.child_msg)+" ",1),r("div",ks,[f(o,{onPrev:l.prev,onNext:l.next},{default:j(()=>[(p(!0),m(I,null,B(a.settings.slides,(c,d)=>(p(),W(i,{key:c,index:d,visibleSlide:t.visibleSlide,direction:t.direction},{default:j(()=>[r("div",Ts,u(c.title),1),r("div",Gs,u(c.description),1),r("img",{src:l.getImage(c.src),alt:d},null,8,Os)]),_:2},1032,["index","visibleSlide","direction"]))),128))]),_:1},8,["onPrev","onNext"])]),Ws])}var Qs=h(Ps,[["render",js],["__scopeId","data-v-339db63c"]]);const Ys={setup(){},data:function(){return{}},props:{map:{type:Object,required:!0},title:{type:String,required:!0,default:"Select Layer"},evtCoordinate:{type:String,required:!0,default:"Select Layer"},pixelCoordinate:{type:String,required:!0,default:"Coordinates"},pixelInfo:{type:String,required:!0,default:"N/A"}}},U=e=>(w("data-v-5ac60f2f"),e=e(),L(),e),$s={id:"popup",class:"ol-popup"},Hs={id:"popup-title"},Fs=U(()=>r("a",{href:"#",id:"popup-closer",class:"ol-popup-closer"},null,-1)),Js=U(()=>r("div",{id:"info"},"\xA0",-1)),Xs={id:"popup-coordinate"},qs={id:"popup-getinfo"};function zs(e,s,a,n,t,l){return p(),m("div",$s,[r("h6",Hs,u(a.title),1),Fs,Js,r("div",Xs,u(a.pixelCoordinate),1),r("div",qs,u(a.pixelInfo),1)])}var Ks=h(Ys,[["render",zs],["__scopeId","data-v-5ac60f2f"]]);const Rs=new q,Us={name:"WebGISContainer",data(){return{basemap_settings:this.settings.basemaps,layer_list:{},layer_groups:{},map:{},title:"Select a Layer",abstract:"N/A",to:"N/A",tf:"N/A",crs:"N/A",units:"N/A",legend:"N/A",datesList:{},currentGroup:"",currentDate:"",currentDateIndex:"",datesListLength:""}},props:{settings:{type:Object,required:!0}},components:{layerPanel:rt,metadataPanel:Dt,timePanel:qt,basemapPanel:rs,plotPanel:ps,slidePanel:Qs,popUp:Ks},methods:{setLayerVisible(e){let s=e.index,a=e.nGroup;if(a==0){let n=this.map.getLayers().array_[a].values_.layers.array_;n.forEach((t,l)=>{s!=l||n.length<s?t.setVisible(!1):t.setVisible(!0)})}else if(a==1){let n=this.map.getLayers().array_[a].values_.layers.array_[s].getVisible();this.map.getLayers().array_[a].values_.layers.array_[s].setVisible(!n)}else{let t=this.map.getLayers().array_[a+s].values_.layers.array_.length-1,l=this.map.getLayers().array_[a+s].values_.layers.array_,i=0;l.forEach((o,c)=>{let d=this.map.getLayers().array_[a+s].values_.layers.array_[c].getVisible();if(o.getVisible()==!0&&c!=t)return this.map.getLayers().array_[a+s].values_.layers.array_[c].setVisible(!d),i++,!1;i==0&&c==t&&this.map.getLayers().array_[a+s].values_.layers.array_[t].setVisible(!d)})}},setLayerVisibleTS(e){let s=e.nGroup,a=e.emitDate;this.map.getLayers().array_[s].values_.layers.array_.forEach((t,l)=>{a==l?t.setVisible(!0):t.setVisible(!1)})},setLayerOpacity(e){let s=e.opacity,a=e.index,n=e.nGroup;if(n<=1)this.map.getLayers().array_[n].values_.layers.array_[a].getVisible()==!0?(this.map.getLayers().array_[n].values_.layers.array_[a].setVisible(!1),this.map.getLayers().array_[n].values_.layers.array_[a].values_.opacity=s,this.map.getLayers().array_[n].values_.layers.array_[a].setVisible(!0)):this.map.getLayers().array_[n].values_.layers.array_[a].values_.opacity=s;else{let t=this.map.getLayers().array_[n+a];t.getVisible()==!0?(t.setVisible(!1),t.values_.opacity=s,t.setVisible(!0)):t.values_.opacity=s}},setLayerMetadata(e){let s=e.layerType,a=e.layerName.key,n=this.layer_list[s][a];if(this.title=a,s=="time"){let t=n.typology,l=n.timeFormatted;this.abstract=this.settings.typology[t].abstract,this.units=this.settings.typology[t].units,this.crs=n.crs,this.legend=n.layer[0].values_.source.getLegendUrl(),this.to=l[0],this.tf=l[l.length-1],this.datesList=this.layer_list.time[a].timeFormatted,this.currentDate=this.datesList[Object.keys(this.datesList).length-1],this.currentDateIndex=Object.keys(this.datesList).length,this.datesListLength=Object.keys(this.datesList).length,this.currentGroup=Object.keys(this.layer_list.time).indexOf(a)}},downloadData(){}},mounted(){this.basemap_settings=this.settings.basemaps,de.get(this.settings.urlWMSget).then(e=>{let a=Rs.read(e.data).Capability.Layer.Layer,n=De(a,this.settings.typology,this.settings.urlWMS);Me(n);let t=Pe(n);return this.layer_list=n,this.layer_group=t,{layers_groups:t,layers_dict:n}}).then(e=>{const s=e.layers_groups,a=e.layers_dict,n=Be();for(let g in s)for(let A in s[g])n.addLayer(s[g][A]);this.map=n;const t=document.getElementById("popup");document.getElementById("popup-title");const l=document.getElementById("popup-coordinate"),i=document.getElementById("popup-getinfo"),o=document.getElementById("popup-closer"),c=new ue({element:t,autoPan:{animation:{duration:250}}});o.onclick=function(){return c.setPosition(void 0),o.blur(),!1},n.addControl(c);const D=this.map.getView().getResolution();n.on("singleclick",function(g){const A=g.coordinate,P=pe(me(A));l.innerHTML="<p>Coordinate: </p><code>"+P+"</code>",c.setPosition(A);const V=n.getEventPixel(g.originalEvent);let N=[];n.forEachLayerAtPixel(V,function(M,la){if(M.title!="basemap"){var F=M.values_.source.getFeatureInfoUrl(g.coordinate,D,"EPSG:3857",{INFO_FORMAT:"application/json"});F&&(fetch(F).then(C=>C.json()).then(C=>{i.innerHTML=C.features[0].properties.GRAY_INDEX.toFixed(2)}),a[M.title][M.name].layer.forEach(C=>{var Z=C.values_.source.getFeatureInfoUrl(g.coordinate,D,"EPSG:3857",{INFO_FORMAT:"application/json"});let ee=fetch(Z).then(k=>k.json()).then(k=>{let J=k.features[0].properties.GRAY_INDEX;if(J!=null)return{Date:C.date,Value:J.toFixed(2)}});N.push(ee)})),console.log(N)}})}),n.on("pointermove",function(g){if(g.dragging)return;const A=n.getEventPixel(g.originalEvent),P=n.forEachLayerAtPixel(A,function(V,N){if(V.title!="basemap")return!0});n.getTargetElement().style.cursor=P?"pointer":""})}).catch(e=>console.log(e))}},Zs=r("div",{id:"map",class:"map"},null,-1),ea=r("div",{id:"popup",class:"popup ol-unselectable ol-control"},null,-1);function ta(e,s,a,n,t,l){const i=b("layerPanel"),o=b("metadataPanel"),c=b("timePanel"),d=b("basemapPanel"),D=b("slidePanel"),g=b("plotPanel"),A=b("popUp");return p(),m("div",null,[Zs,f(i,{child_msg:"Layer-Panel",layer_list:t.layer_list,onSetLayerVisible:l.setLayerVisible,onSetLayerOpacity:l.setLayerOpacity,onSetLayerMetadata:l.setLayerMetadata},null,8,["layer_list","onSetLayerVisible","onSetLayerOpacity","onSetLayerMetadata"]),f(o,{child_msg:"Metadata-Panel",settings:a.settings,title:t.title,abstract:t.abstract,to:t.to,tf:t.tf,units:t.units,crs:t.crs,legend:t.legend},null,8,["settings","title","abstract","to","tf","units","crs","legend"]),f(c,{child_msg:"Time-Panel",title:t.title,datesList:t.datesList,datesListLength:t.datesListLength,currentDate:t.currentDate,currentDateIndex:t.currentDateIndex,currentGroup:t.currentGroup,onUpdateLayerSlider:l.setLayerVisibleTS,onUpdateLayerDropdown:l.setLayerVisibleTS,onStepBackwards:l.setLayerVisibleTS,onStepForwards:l.setLayerVisibleTS},null,8,["title","datesList","datesListLength","currentDate","currentDateIndex","currentGroup","onUpdateLayerSlider","onUpdateLayerDropdown","onStepBackwards","onStepForwards"]),f(d,{child_msg:"Basemap-Panel",data:t.basemap_settings,layer_list:t.layer_list,onSetLayerVisible:l.setLayerVisible},null,8,["data","layer_list","onSetLayerVisible"]),f(D,{child_msg:"Slide-Panel",settings:a.settings},null,8,["settings"]),f(g,{child_msg:"Plot-Panel"}),f(A),ea])}var sa=h(Us,[["render",ta]]);const aa={urlWMS:"http://127.0.0.1/geoserver/geonode/wms",urlWMSget:"http://127.0.0.1/geoserver/ows?service=wms&version=1.3.0&request=GetCapabilities",typology:{CHL:{title:"Chlorophyll-a",abstract:"Chlorophyll-a allows plants to photosintezise. This measurement is used to classify the trophic conditionof a water body. The Chlorophyll-a maps presented have been processed using the Sentinel-3 OLCI sensor",style:"chl",units:"mg/m3"},TSM:{title:"Total Suspended Matter",abstract:"Total suspended matter concentration",style:"tsm",units:"mg/m3"},LSWT:{title:"Lake Surface Water Temperature",abstract:"Average lake surface temperature",style:"lswt",units:"\xB0C"}},basemaps:[{layer:"osm",source:"osm",src:"osm.png",active:!0},{layer:"watercolor",source:"stamen",src:"watercolor.png",active:!1},{layer:"terrain",source:"terrain-labels",src:"terrain.png",active:!1},{layer:"toner",source:"toner",src:"toner.png",active:!1},{layer:"none",source:"none",src:"none.png",active:!1}],slides:[{title:"Welcome!",src:"i1.png",description:"1. SIMILE WebGIS enables the visualization of the water quality parameters (WQPs) maps produced for Lakes Maggiore, Lugano and Como."},{title:"Explore the different tools",src:"i2.png",description:"2. The WebGIS presents multtiple panels allowing to explore the different water quality parameters maps"},{title:"Visualize and explore the WQP",src:"i3.png",description:"3. Review the different components allowing the visualization of the maps, such as the layer panel, metadata panel and time controller"},{title:"Observe the evolution of the time series",src:"i4.png",description:"4. Use the time manager to observe the changes of the parameters in time."},{title:"Observe the evolution of the time series",src:"i5.png",description:"4. Use the time manager to observe the changes of the parameters in time."},{title:"Change the basemap",src:"i6.png",description:"5. Customize the view of the WebGIS by using different basemaps"},{title:"Explore the guide",src:"i7.png",description:"6. Review the guide for the WebGIS"}]};const na={name:"App",data(){return{settings:aa}},components:{WebGISContainer:sa}};function ia(e,s,a,n,t,l){const i=b("WebGISContainer");return p(),W(i,{settings:t.settings,layer:e.layer_list},null,8,["settings","layer"])}var ra=h(na,[["render",ia],["__scopeId","data-v-1bf46334"]]);_e(ra).mount("#app");
//# sourceMappingURL=index.d5b13f9d.js.map
