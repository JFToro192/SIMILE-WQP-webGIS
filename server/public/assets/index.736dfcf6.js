import{C as p,O as k,a as Y,T as f,M as H,d as J,S as F,V as X,W as T,b as B,L as S,c as q,o as u,e as _,f as y,t as m,g as n,F as L,r as C,p as x,h as E,n as I,i as W,j as M,w as D,k as z,v as K,l as R,m as b,q as v,s as Z,u as U}from"./vendor.5a968a0c.js";const ee=function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))i(e);new MutationObserver(e=>{for(const l of e)if(l.type==="childList")for(const r of l.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&i(r)}).observe(document,{childList:!0,subtree:!0});function a(e){const l={};return e.integrity&&(l.integrity=e.integrity),e.referrerpolicy&&(l.referrerPolicy=e.referrerpolicy),e.crossorigin==="use-credentials"?l.credentials="include":e.crossorigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function i(e){if(e.ep)return;e.ep=!0;const l=a(e);fetch(e.href,l)}};ee();var te="/assets/assev_simile.d3f83cf6.png";function V(){const t="."+this.element.classList[0],s="."+t.split("-")[1]+"-item",a=$(t);a.hasClass("active")?($(`${s}`).slice(0).hide(),a.removeClass("active")):($(`${s}`).slice(0).show(),a.addClass("active"))}function w(){const t="."+this.element.classList[0],s="."+t.split("-")[1]+"-panel",a=$(t),i=$(s);i.hasClass("active")?(i.hide(),a.removeClass("active"),i.removeClass("active")):(i.show(),a.addClass("active"),i.addClass("active"))}class se extends p{constructor(s){const a=s||{},i=document.createElement("button");i.innerHTML='<i class="bi bi-list"></i>';const e=document.createElement("div");e.className="show-burger ol-unselectable ol-control control-bar active",e.appendChild(i);super({element:e,target:a.target});e.addEventListener("click",V.bind(this),!1)}}class ae extends p{constructor(s){const a=s||{},i=document.createElement("button");i.innerHTML='<i class="bi bi-stack"></i>',i.title="layers panel";const e=document.createElement("div");e.className="show-layer ol-unselectable ol-control control-bar burger-item",e.appendChild(i);super({element:e,target:a.target});e.addEventListener("click",w.bind(this),!1)}}class ie extends p{constructor(s){const a=s||{},i=document.createElement("button");i.innerHTML='<i class="bi bi-info-square"></i>',i.title="metadata panel";const e=document.createElement("div");e.className="show-metadata ol-unselectable ol-control control-bar burger-item",e.appendChild(i);super({element:e,target:a.target});e.addEventListener("click",w.bind(this),!1)}}class ne extends p{constructor(s){const a=s||{},i=document.createElement("button");i.innerHTML='<i class="bi bi-clock-history"></i>',i.title="time panel";const e=document.createElement("div");e.className="show-time ol-unselectable ol-control control-bar burger-item",e.appendChild(i);super({element:e,target:a.target});e.addEventListener("click",w.bind(this),!1)}}class le extends p{constructor(s){const a=s||{},i=document.createElement("button");i.innerHTML='<i class="bi bi-map"></i>',i.title="basemaps";const e=document.createElement("div");e.className="show-basemap ol-unselectable ol-control control-bar burger-item",e.appendChild(i);super({element:e,target:a.target});e.addEventListener("click",w.bind(this),!1)}}class re extends p{constructor(s){const a=s||{},i=document.createElement("button");i.innerHTML='<i class="bi bi-graph-up"></i>',i.title="plot time series";const e=document.createElement("div");e.className="show-plot ol-unselectable ol-control control-bar burger-item",e.appendChild(i);super({element:e,target:a.target});e.addEventListener("click",w.bind(this),!1)}}class oe extends p{constructor(s){const a=s||{},i=document.createElement("button");i.innerHTML='<i class="bi bi-file-earmark-easel"></i>',i.title="webgis guide";const e=document.createElement("div");e.className="show-slide ol-unselectable ol-control control-bar burger-item",e.appendChild(i);super({element:e,target:a.target});e.addEventListener("click",w.bind(this),!1)}}class ce extends p{constructor(s){const a=s||{},i=document.createElement("ul"),e=document.createElement("li"),l=document.createElement("li"),r=document.createElement("li"),o=document.createElement("li"),c=document.createElement("li");e.innerHTML='<button><i class="bi bi-people"></i></button>',l.innerHTML='<button class="social-item" style="display:none;"><i class="bi bi-facebook"></i></button>',r.innerHTML='<button class="social-item" style="display:none;"><i class="bi bi-twitter"></i></button>',o.innerHTML='<button class="social-item" style="display:none;"><i class="bi bi-linkedin"></i></button>',c.innerHTML='<button class="social-item" style="display:none;"><i class="bi bi-instagram"></i></button>',e.title="social",l.title="facebook",r.title="twitter",o.title="linkedin",c.title="instagram";const d=document.createElement("div");d.className="show-social ol-unselectable ol-control control-bar burger-item",i.appendChild(e),i.appendChild(l),i.appendChild(r),i.appendChild(o),i.appendChild(c),d.appendChild(i);super({element:d,target:a.target});e.addEventListener("click",V.bind(this),!1)}}class de extends p{constructor(s){const a=s||{},i=document.createElement("ul"),e=document.createElement("li"),l=document.createElement("li"),r=document.createElement("li"),o=document.createElement("li"),c=document.createElement("li");e.innerHTML='<button ><i class="bi bi-journals"></i></button>',l.innerHTML='<button class="about-item" style="display:none;"><i class="bi bi-newspaper"></i></button>',r.innerHTML='<button class="about-item" style="display:none;"><i class="bi bi-briefcase"></i></button>',o.innerHTML='<button class="about-item" style="display:none;"><i class="bi bi-github"></i></button>',c.innerHTML='<button class="about-item" style="display:none;"><i class="bi bi-calendar-week"></i></button>',e.title="portfolio",l.title="news",r.title="business intelligence platform",o.title="webgis github repository",c.title="calendar";const d=document.createElement("div");d.className="show-about ol-unselectable ol-control control-bar burger-item",i.appendChild(e),i.appendChild(l),i.appendChild(r),i.appendChild(o),i.appendChild(c),d.appendChild(i);super({element:d,target:a.target});e.addEventListener("click",V.bind(this),!1)}}class ue extends p{constructor(s){const a=s||{},i=document.createElement("div"),e=document.createElement("a");e.href="https://www.progetti.interreg-italiasvizzera.eu/it/b/78/sistemainformativoperilmonitoraggiointegratodeilaghiinsubriciedeiloroe";const l=document.createElement("img");l.src=te,l.alt="logo-simile-interreg",e.appendChild(l),i.appendChild(e);const r=document.createElement("div");r.className="project-logo ol-unselectable ol-control",r.appendChild(i);super({element:r,target:a.target})}}new p({element:document.getElementById("layerPanel")});new p({element:document.getElementById("metadataPanel")});new p({element:document.getElementById("timePanel")});new p({element:document.getElementById("basemapPanel")});new p({element:document.getElementById("plotPanel")});new p({element:document.getElementById("slidePanel")});new p({element:document.getElementById("popup")});const me=new k,pe=new Y({layers:[new f({source:me})]});function _e(){return new H({target:"map",controls:J().extend([new F,pe,new se,new ae,new ie,new ne,new le,new re,new oe,new ce,new de,new ue]),view:new X({center:[994904.36016,5775887605341e-6],zoom:10})})}new T;function P(t,s,a,i){return new f({source:new q({url:s,params:{LAYERS:t,TILED:!0,STYLES:i},crossOrigin:"anonymous",serverType:"geoserver"}),visible:!1,opacity:a})}function G(t,s){return t[s.name]={},t[s.name].workspace=s.workspace,t[s.name].typology=s.typology,t[s.name].crs=s.crs,t[s.name].sensor=s.sensor,t[s.name].timeComplete=[s.timeComplete],t[s.name].timeFormatted=[s.timeFormatted],t[s.name].level=s.level,t[s.name].layer=[s.layer],t}function ye(t,s,a){let i=Object.keys(s),e={};return e.static={},e.time={},e.basemap={},t.forEach(l=>{let r={},o=l.Name.split(":");if(r.workspace=o[0],r.name=o[1].split("_").slice(0,3).join("_"),r.sensor=o[1].split("_")[0],r.typology=o[1].split("_")[1],r.crs=o[1].split("_")[2],o[1].split("_")[3]!=null){r.timeComplete=o[1].split("_")[3];let d=o[1].split("_")[3].split("T")[0];r.timeFormatted=d.slice(0,4)+"-"+d.slice(4,6)+"-"+d.slice(6,8)}else r.timeComplete=void 0,r.timeFormatted=void 0;r.level=o[1].split("_")[4];let c="";i.includes(r.typology)&&(c=r.typology.toLowerCase()),r.layer=P(l.Name,a,.5,c),r.timeComplete!=null?r.name in e.time?(r.layer=P(l.Name,a,1,c),e.time[r.name].timeComplete.push(r.timeComplete),e.time[r.name].timeFormatted.push(r.timeFormatted),e.time[r.name].layer.push(r.layer)):(r.layer=P(l.Name,a,1),e.time=G(e.time,r)):e.static=G(e.static,r)}),e}function ge(t){let s={osm:{title:"osm",layer:[new f({source:new k,visible:!0})]},watercolor:{title:"watercolor",source:"Stamen",layer:[new f({source:new B({layer:"watercolor"}),visible:!1})]},terrain:{title:"terrain",source:"Stamen",layer:[new f({source:new B({layer:"terrain"}),visible:!1})]},toner:{title:"toner",source:"Stamen",layer:[new f({source:new B({layer:"toner"}),visible:!1})]}};return t.basemap=s,t}function be(t){let s={},a=[],i=[],e=[],l=[],r=[];for(let o in t)if(o=="time")for(let c in t[o]){let d=t[o][c].layer;r.push(new S({layers:d,visible:!0,opacity:.5}))}else{for(let c in t[o])o=="basemap"?a.push(t[o][c].layer[0]):o=="static"&&i.push(t[o][c].layer[0]);l[0]=new S({layers:i,visible:!0,opacity:1}),e[0]=new S({layers:a,visible:!0,opacity:1})}return s.basemap=e,s.static=l,s.time=r,s}var g=(t,s)=>{const a=t.__vccOpts||t;for(const[i,e]of s)a[i]=e;return a};const he={name:"Layer",props:{child_msg:{type:String,default:"Layer Panel"},layer_list:{type:Object}},data(){return{}},methods:{setLayerVisible(t,s){this.$emit("setLayerVisible",{nGroup:t,index:s})},setLayerOpacity(t,s,a){let i=t.target.value;this.$emit("setLayerOpacity",{opacity:i,nGroup:s,index:a})},setLayerMetadata(t,s){this.$emit("setLayerMetadata",{layerType:t,layerName:s})}}},A=t=>(x("data-v-1b25468b"),t=t(),E(),t),Ae={id:"layerPanel",class:"layer-panel ol-unselectable ol-control"},ve=A(()=>n("h6",{class:"static-layers-title"},[n("i",{class:"bi bi-arrow-right"}),y("Static Layers")],-1)),fe={class:"static-layers active",id:"staticLayers"},we={class:"layer-items"},Le=["onChange"],Ce={class:"title-layer"},xe=["title"],Ee=A(()=>n("div",{class:"dwnld-layer"},[n("i",{class:"bi bi-box-arrow-down"})],-1)),Be=["onClick"],Se=A(()=>n("i",{class:"bi bi-info-square"},null,-1)),Ie=[Se],Me=A(()=>n("div",{class:"opct-layer"},[n("i",{class:"bi bi-circle-half"})],-1)),De={class:"opct-range-layer"},Ve=["onChange"],Pe=A(()=>n("h6",{class:"time-series-layers-title"},[n("i",{class:"bi bi-arrow-right"}),y("Time Series Layers")],-1)),Ne={class:"time-series-layers active",id:"timeSeriesLayers"},ke={class:"layer-items"},Te=["onChange"],We={class:"title-layer"},Ge=["title"],Qe=A(()=>n("div",{class:"dwnld-layer"},[n("i",{class:"bi bi-box-arrow-down"})],-1)),Oe=["onClick"],je=A(()=>n("i",{class:"bi bi-info-square"},null,-1)),Ye=[je],He=A(()=>n("div",{class:"opct-layer"},[n("i",{class:"bi bi-circle-half"})],-1)),Je={class:"opct-range-layer"},$e=["onChange"];function Fe(t,s,a,i,e,l){return u(),_("div",Ae,[y(m(a.child_msg)+" ",1),ve,n("div",fe,[(u(!0),_(L,null,C(a.layer_list.static,(r,o,c)=>(u(),_("div",{class:"static-layer layer-list",key:r.static},[n("div",we,[n("div",{class:I("chckbx-layer layer-static-"+c)},[n("input",{type:"checkbox",title:"set visible",name:"",id:"",onChange:d=>l.setLayerVisible(1,c)},null,40,Le)],2),n("div",Ce,[n("p",{title:o},m(o),9,xe)]),Ee,n("div",{class:"info-layer",onClick:d=>l.setLayerMetadata("static",{key:o})},Ie,8,Be),Me,n("div",De,[n("input",{type:"range",name:"",id:"",min:"0",max:"1",step:"0.01",value:"0.5",onChange:d=>l.setLayerOpacity(d,1,c)},null,40,Ve)])])]))),128))]),Pe,n("div",Ne,[(u(!0),_(L,null,C(a.layer_list.time,(r,o,c)=>(u(),_("div",{class:"time-series-layer layer-list",key:r.time},[n("div",ke,[n("div",{class:I("chckbx-layer layer-timeSeries-"+c)},[n("input",{type:"checkbox",title:"set visible",name:"",id:"",onChange:d=>l.setLayerVisible(2,c)},null,40,Te)],2),n("div",We,[n("p",{title:o},m(o),9,Ge)]),Qe,n("div",{class:"info-layer",onClick:d=>l.setLayerMetadata("time",{key:o})},Ye,8,Oe),He,n("div",Je,[n("input",{type:"range",name:"",id:"",min:"0",max:"1",step:"0.01",value:"0.5",onChange:d=>l.setLayerOpacity(d,2,c)},null,40,$e)])])]))),128))])])}var Xe=g(he,[["render",Fe],["__scopeId","data-v-1b25468b"]]);const qe={name:"Layer",props:{child_msg:{type:String,required:!0,default:"Metadata Panel"},title:{type:String,required:!0,default:"Title"},abstract:{type:String,required:!0,default:"Select a layer"},typology:{type:String,required:!0,default:"N/A"},units:{type:String,required:!0,default:"N/A"},crs:{type:String,required:!0,default:"N/A"},to:{type:String,required:!0,default:"N/A"},tf:{type:String,required:!0,default:"N/A"},legend:{type:String,required:!0,default:"N/A"}},data(){return{}}},h=t=>(x("data-v-1728e34c"),t=t(),E(),t),ze={id:"metadataPanel",class:"metadata-panel ol-unselectable ol-control"},Ke={class:"meta-title"},Re={class:"meta-abstract"},Ze=h(()=>n("strong",null,"Abstract:",-1)),Ue={class:"meta-info"},et={class:"meta-details"},tt={class:"meta-details-typology"},st=h(()=>n("strong",null,"Typology:",-1)),at={class:"meta-details-units"},it=h(()=>n("strong",null,"Units:",-1)),nt={class:"meta-details-crs"},lt=h(()=>n("strong",null,"CRS:",-1)),rt={class:"meta-details-tstart"},ot=h(()=>n("strong",null,"Time Start:",-1)),ct=h(()=>n("br",null,null,-1)),dt={class:"meta-details-tend"},ut=h(()=>n("strong",null,"Time end:",-1)),mt=h(()=>n("br",null,null,-1)),pt={class:"meta-legend"},_t=h(()=>n("strong",null,"Legend:",-1)),yt=["src"];function gt(t,s,a,i,e,l){return u(),_("div",ze,[y(m(a.child_msg)+" ",1),n("div",Ke,[n("h6",null,m(a.title),1)]),n("div",Re,[Ze,y(m(a.abstract),1)]),n("div",Ue,[n("div",et,[n("div",tt,[st,y(m(a.typology),1)]),n("div",at,[it,y(" ["+m(a.units)+"]",1)]),n("div",nt,[lt,y(m(a.crs),1)]),n("div",rt,[ot,ct,y(m(a.to),1)]),n("div",dt,[ut,mt,y(m(a.tf),1)])]),n("div",pt,[_t,n("img",{src:a.legend,alt:""},null,8,yt)])])])}var bt=g(qe,[["render",gt],["__scopeId","data-v-1728e34c"]]);const ht={name:"Time",props:{child_msg:{type:String,default:"Time Panel"},title:{type:String,required:!0,default:"Select Layer"},datesList:{type:Object,required:!0,default:()=>({"0":"Select TS"})},datesListLength:{type:String,required:!0},currentDate:{type:String,required:!0},currentDateIndex:{type:String,required:!0},currentGroup:{type:String,required:!0}},data(){return{}},methods:{updateLayerSlider(t){console.log(t);let s=t.target.value,a=parseInt(s),i=this.currentGroup+2,e=document.getElementById("dropdownDate");e.selectedIndex=s,this.cDate=this.datesList[s],this.cDateIndex=s,this.$emit("updateLayerSlider",{nGroup:i,emitDate:a})},updateLayerDropdown(t){let s=t.target.value,a=parseInt(s),i=this.currentGroup+2,e=document.getElementById("sliderDate");e.value=s,this.cDate=this.datesList[s],this.cDateIndex=s,this.$emit("updateLayerDropdown",{nGroup:i,emitDate:a})},stepBackwards(){let t=document.getElementById("sliderDate").value,s=t-1,a=t-1,i=this.currentGroup+2;t-1>=0?(this.cDate=this.datesList[a],this.cDateIndex=a,document.getElementById("dropdownDate").selectedIndex=a,document.getElementById("sliderDate").value=a,this.$emit("updateLayerDropdown",{nGroup:i,emitDate:s})):alert("There are no previous maps for the current layer")},stepForwards(){let t=document.getElementById("dropdownDate").value,s=Number(t)+1,a=Number(t)+1,i=this.currentGroup+2;Number(t)+1<=this.datesListLength-1?(this.cDate=this.datesList[a],this.cDateIndex=a,document.getElementById("dropdownDate").selectedIndex=a,document.getElementById("sliderDate").value=a,this.$emit("updateLayerDropdown",{nGroup:i,emitDate:s})):alert("There are no later maps for the current layer")}}},N=t=>(x("data-v-48277036"),t=t(),E(),t),At={id:"timePanel",class:"time-panel ol-unselectable ol-control"},vt={class:"time-container"},ft={class:"time-header"},wt={class:"time-controls"},Lt={class:"time-controls-dates"},Ct=["value","selected"],xt={class:"time-slider"},Et=["max","value"],Bt={id:"time-controls-backward",class:"time-controls_item ol-unselectable ol-control"},St=N(()=>n("i",{class:"bi bi-skip-backward-circle"},null,-1)),It=[St],Mt=N(()=>n("div",{id:"time-controls-play",class:"time-controls_item ol-unselectable ol-control"},[n("div",null,[n("button",{class:"time-panel-control-button"},[n("i",{class:"bi bi-play-circle"})])])],-1)),Dt={id:"time-controls-forward",class:"time-controls_item ol-unselectable ol-control"},Vt=N(()=>n("i",{class:"bi bi-skip-forward-circle"},null,-1)),Pt=[Vt];function Nt(t,s,a,i,e,l){return u(),_("div",At,[n("p",null,m(a.child_msg),1),n("div",vt,[n("div",ft,[n("strong",null,m(a.title),1)]),n("div",wt,[n("div",Lt,[n("select",{name:"",id:"dropdownDate",onChange:s[0]||(s[0]=r=>l.updateLayerDropdown(r))},[(u(!0),_(L,null,C(a.datesList,(r,o)=>(u(),_("option",{value:o,selected:a.datesListLength,key:o},m(a.datesList[o]),9,Ct))),128))],32)]),n("div",xt,[n("input",{type:"range",name:"",id:"sliderDate",min:"0",max:a.datesListLength-1,value:a.currentDateIndex,step:"1",onChange:s[1]||(s[1]=r=>l.updateLayerSlider(r))},null,40,Et)]),n("div",Bt,[n("button",{class:"time-panel-control-button",onClick:s[2]||(s[2]=(...r)=>l.stepBackwards&&l.stepBackwards(...r))},It)]),Mt,n("div",Dt,[n("button",{class:"time-panel-control-button",onClick:s[3]||(s[3]=(...r)=>l.stepForwards&&l.stepForwards(...r))},Pt)])])])])}var kt=g(ht,[["render",Nt],["__scopeId","data-v-48277036"]]),Tt="/assets/osm.d6d13acb.png",Wt="/assets/terrain.d843a7bb.png",Gt="/assets/watercolor.8d0c5f2f.png",Qt="/assets/toner.19bbfbf8.png",Ot="data:image/png;base64,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";const jt={name:"Basemap",props:{child_msg:{type:String,default:"Basemap Panel"},data:{type:Array},layer_list:{type:Object,require:!0}},data(){return{}},methods:{getImage(t){if(t=="osm")return Tt;if(t=="terrain")return Wt;if(t=="watercolor")return Gt;if(t=="toner")return Qt;if(t=="none")return Ot},setLayerVisible(t,s){this.$emit("setLayerVisible",{nGroup:t,index:s})}}},Yt={id:"basemapPanel",class:"basemap-panel ol-unselectable ol-control"},Ht={class:"basemap-container"},Jt=["id","checked","onChange"],$t=["src"];function Ft(t,s,a,i,e,l){return u(),_("div",Yt,[n("p",null,m(a.child_msg),1),n("div",Ht,[(u(!0),_(L,null,C(a.data,(r,o)=>(u(),_("div",{key:r.layer,class:"basemap-container_item"},[n("div",null,[n("input",{type:"radio",name:"basemap-radio",id:r.layer+"-option",class:I("basemap-option"),checked:r.active,onChange:c=>l.setLayerVisible(0,o)},null,40,Jt),n("p",null,m(r.layer),1)]),n("img",{src:l.getImage(r.layer),alt:""},null,8,$t)]))),128))])])}var Xt=g(jt,[["render",Ft],["__scopeId","data-v-d0c7ec78"]]);const qt={name:"Plot",props:{child_msg:{type:String,default:"Plot Panel"}},data(){return{}}},zt={id:"plotPanel",class:"plot-panel ol-unselectable ol-control"};function Kt(t,s,a,i,e,l){return u(),_("div",zt,m(a.child_msg),1)}var Rt=g(qt,[["render",Kt],["__scopeId","data-v-1eb5ca25"]]),Zt="/assets/i1.39c6eac4.png",Ut="/assets/i2.52627267.png",es="/assets/i3.e76ce568.png",ts="/assets/i4.df51a994.png",ss="/assets/i5.9255129d.png",as="/assets/i6.c99fefa1.png",is="/assets/i7.1425b493.png";const ns={data(){return{}},methods:{prev(){this.$emit("prev")},next(){this.$emit("next")}}},Q=t=>(x("data-v-07c985f2"),t=t(),E(),t),ls={class:"carousel-container"},rs=Q(()=>n("i",{class:"bi bi-caret-left-fill"},null,-1)),os=[rs],cs=Q(()=>n("i",{class:"bi bi-caret-right-fill"},null,-1)),ds=[cs];function us(t,s,a,i,e,l){return u(),_("div",ls,[W(t.$slots,"default",{},void 0,!0),n("button",{class:"prev",onClick:s[0]||(s[0]=(...r)=>l.prev&&l.prev(...r))},os),n("button",{class:"next",onClick:s[1]||(s[1]=(...r)=>l.next&&l.next(...r))},ds)])}var ms=g(ns,[["render",us],["__scopeId","data-v-07c985f2"]]);const ps={props:["visibleSlide","index","direction"],data(){return{}}},_s={class:"carousel-slide"};function ys(t,s,a,i,e,l){return u(),M(R,{name:a.direction},{default:D(()=>[z(n("div",_s,[W(t.$slots,"default",{},void 0,!0)],512),[[K,a.visibleSlide===a.index]])]),_:3},8,["name"])}var gs=g(ps,[["render",ys],["__scopeId","data-v-664b1638"]]);const bs={name:"Slide",props:{child_msg:{type:String,default:"Slide Panel"},settings:{type:Object}},data(){return{visibleSlide:0,direction:""}},computed:{slidesLen(){return this.settings.slides.length}},methods:{prev(){this.visibleSlide<=0?this.visibleSlide=this.slidesLen-1:this.visibleSlide--,this.direction="right"},next(){this.visibleSlide>=this.slidesLen-1?this.visibleSlide=0:this.visibleSlide++,this.direction="left"},getImage(t){if(t=="i1.png")return Zt;if(t=="i2.png")return Ut;if(t=="i3.png")return es;if(t=="i4.png")return ts;if(t=="i5.png")return ss;if(t=="i6.png")return as;if(t=="i7.png")return is}},mounted(){},components:{CarouselContainer:ms,CarouselSlide:gs}},hs=t=>(x("data-v-339db63c"),t=t(),E(),t),As={id:"slidePanel",class:"slide-panel ol-unselectable ol-control",style:{display:"none"}},vs={class:"slidepanel-show"},fs={class:"slide-title"},ws={class:"slide-description"},Ls=["src","alt"],Cs=hs(()=>n("div",{class:"slide-current"},null,-1));function xs(t,s,a,i,e,l){const r=b("carousel-slide"),o=b("carousel-container");return u(),_("div",As,[y(m(a.child_msg)+" ",1),n("div",vs,[v(o,{onPrev:l.prev,onNext:l.next},{default:D(()=>[(u(!0),_(L,null,C(a.settings.slides,(c,d)=>(u(),M(r,{key:c,index:d,visibleSlide:e.visibleSlide,direction:e.direction},{default:D(()=>[n("div",fs,m(c.title),1),n("div",ws,m(c.description),1),n("img",{src:l.getImage(c.src),alt:d},null,8,Ls)]),_:2},1032,["index","visibleSlide","direction"]))),128))]),_:1},8,["onPrev","onNext"])]),Cs])}var Es=g(bs,[["render",xs],["__scopeId","data-v-339db63c"]]);const Bs=new T,Ss={name:"WebGISContainer",data(){return{basemap_settings:this.settings.basemaps,layer_list:{},layer_groups:{},map:{},title:"Select a Layer",abstract:"N/A",to:"N/A",tf:"N/A",crs:"N/A",units:"N/A",legend:"N/A",datesList:{},currentGroup:"",currentDate:"",currentDateIndex:"",datesListLength:""}},props:{settings:{type:Object,required:!0}},components:{layerPanel:Xe,metadataPanel:bt,timePanel:kt,basemapPanel:Xt,plotPanel:Rt,slidePanel:Es},methods:{setLayerVisible(t){let s=t.index,a=t.nGroup;if(a==0){let i=this.map.getLayers().array_[a].values_.layers.array_;i.forEach((e,l)=>{s!=l||i.length<s?e.setVisible(!1):e.setVisible(!0)})}else if(a==1){let i=this.map.getLayers().array_[a].values_.layers.array_[s].getVisible();this.map.getLayers().array_[a].values_.layers.array_[s].setVisible(!i)}else{let e=this.map.getLayers().array_[a+s].values_.layers.array_.length-1,l=this.map.getLayers().array_[a+s].values_.layers.array_,r=0;l.forEach((o,c)=>{let d=this.map.getLayers().array_[a+s].values_.layers.array_[c].getVisible();if(o.getVisible()==!0&&c!=e)return this.map.getLayers().array_[a+s].values_.layers.array_[c].setVisible(!d),r++,!1;r==0&&c==e&&this.map.getLayers().array_[a+s].values_.layers.array_[e].setVisible(!d)})}},setLayerVisibleTS(t){let s=t.nGroup,a=t.emitDate;this.map.getLayers().array_[s].values_.layers.array_.forEach((e,l)=>{a==l?e.setVisible(!0):e.setVisible(!1)})},setLayerOpacity(t){let s=t.opacity,a=t.index,i=t.nGroup;if(i<=1)this.map.getLayers().array_[i].values_.layers.array_[a].getVisible()==!0?(this.map.getLayers().array_[i].values_.layers.array_[a].setVisible(!1),this.map.getLayers().array_[i].values_.layers.array_[a].values_.opacity=s,this.map.getLayers().array_[i].values_.layers.array_[a].setVisible(!0)):this.map.getLayers().array_[i].values_.layers.array_[a].values_.opacity=s;else{let e=this.map.getLayers().array_[i+a];e.getVisible()==!0?(e.setVisible(!1),e.values_.opacity=s,e.setVisible(!0)):e.values_.opacity=s}},setLayerMetadata(t){let s=t.layerType,a=t.layerName.key,i=this.layer_list[s][a];if(this.title=a,s=="time"){let e=i.typology,l=i.timeFormatted;this.abstract=this.settings.typology[e].abstract,this.units=this.settings.typology[e].units,this.crs=i.crs,this.legend=i.layer[0].values_.source.getLegendUrl(),this.to=l[0],this.tf=l[l.length-1],this.datesList=this.layer_list.time[a].timeFormatted,this.currentDate=this.datesList[Object.keys(this.datesList).length-1],this.currentDateIndex=Object.keys(this.datesList).length,this.datesListLength=Object.keys(this.datesList).length,this.currentGroup=Object.keys(this.layer_list.time).indexOf(a)}},downloadData(){}},mounted(){this.basemap_settings=this.settings.basemaps,Z.get(this.settings.urlWMSget).then(t=>{let a=Bs.read(t.data).Capability.Layer.Layer,i=ye(a,this.settings.typology,this.settings.urlWMS),e=ge(i),l=be(e);return this.layer_list=i,this.layer_group=l,l}).then(t=>{const s=_e();for(let a in t)for(let i in t[a])s.addLayer(t[a][i]);this.map=s}).catch(t=>console.log(t))}},Is=n("div",{id:"map",class:"map"},null,-1),Ms=n("div",{id:"popup",class:"popup ol-unselectable ol-control"},null,-1);function Ds(t,s,a,i,e,l){const r=b("layerPanel"),o=b("metadataPanel"),c=b("timePanel"),d=b("basemapPanel"),O=b("slidePanel"),j=b("plotPanel");return u(),_("div",null,[Is,v(r,{child_msg:"Layer-Panel",layer_list:e.layer_list,onSetLayerVisible:l.setLayerVisible,onSetLayerOpacity:l.setLayerOpacity,onSetLayerMetadata:l.setLayerMetadata},null,8,["layer_list","onSetLayerVisible","onSetLayerOpacity","onSetLayerMetadata"]),v(o,{child_msg:"Metadata-Panel",settings:a.settings,title:e.title,abstract:e.abstract,to:e.to,tf:e.tf,units:e.units,crs:e.crs,legend:e.legend},null,8,["settings","title","abstract","to","tf","units","crs","legend"]),v(c,{child_msg:"Time-Panel",title:e.title,datesList:e.datesList,datesListLength:e.datesListLength,currentDate:e.currentDate,currentDateIndex:e.currentDateIndex,currentGroup:e.currentGroup,onUpdateLayerSlider:l.setLayerVisibleTS,onUpdateLayerDropdown:l.setLayerVisibleTS,onStepBackwards:l.setLayerVisibleTS,onStepForwards:l.setLayerVisibleTS},null,8,["title","datesList","datesListLength","currentDate","currentDateIndex","currentGroup","onUpdateLayerSlider","onUpdateLayerDropdown","onStepBackwards","onStepForwards"]),v(d,{child_msg:"Basemap-Panel",data:e.basemap_settings,layer_list:e.layer_list,onSetLayerVisible:l.setLayerVisible},null,8,["data","layer_list","onSetLayerVisible"]),v(O,{child_msg:"Slide-Panel",settings:a.settings},null,8,["settings"]),v(j,{child_msg:"Plot-Panel"}),Ms])}var Vs=g(Ss,[["render",Ds]]);const Ps={urlWMS:"http://127.0.0.1/geoserver/geonode/wms",urlWMSget:"http://127.0.0.1/geoserver/ows?service=wms&version=1.3.0&request=GetCapabilities",typology:{CHL:{title:"Chlorophyll-a",abstract:"Chlorophyll-a allows plants to photosintezise. This measurement is used to classify the trophic conditionof a water body. The Chlorophyll-a maps presented have been processed using the Sentinel-3 OLCI sensor",style:"chl",units:"mg/m3"},TSM:{title:"Total Suspended Matter",abstract:"Total suspended matter concentration",style:"tsm",units:"mg/m3"},LSWT:{title:"Lake Surface Water Temperature",abstract:"Average lake surface temperature",style:"lswt",units:"\xB0C"}},basemaps:[{layer:"osm",source:"osm",src:"osm.png",active:!0},{layer:"watercolor",source:"stamen",src:"watercolor.png",active:!1},{layer:"terrain",source:"terrain-labels",src:"terrain.png",active:!1},{layer:"toner",source:"toner",src:"toner.png",active:!1},{layer:"none",source:"none",src:"none.png",active:!1}],slides:[{title:"Welcome!",src:"i1.png",description:"1. SIMILE WebGIS enables the visualization of the water quality parameters (WQPs) maps produced for Lakes Maggiore, Lugano and Como."},{title:"Explore the different tools",src:"i2.png",description:"2. The WebGIS presents multtiple panels allowing to explore the different water quality parameters maps"},{title:"Visualize and explore the WQP",src:"i3.png",description:"3. Review the different components allowing the visualization of the maps, such as the layer panel, metadata panel and time controller"},{title:"Observe the evolution of the time series",src:"i4.png",description:"4. Use the time manager to observe the changes of the parameters in time."},{title:"Observe the evolution of the time series",src:"i5.png",description:"4. Use the time manager to observe the changes of the parameters in time."},{title:"Change the basemap",src:"i6.png",description:"5. Customize the view of the WebGIS by using different basemaps"},{title:"Explore the guide",src:"i7.png",description:"6. Review the guide for the WebGIS"}]};const Ns={name:"App",data(){return{settings:Ps}},components:{WebGISContainer:Vs}};function ks(t,s,a,i,e,l){const r=b("WebGISContainer");return u(),M(r,{settings:e.settings,layer:t.layer_list},null,8,["settings","layer"])}var Ts=g(Ns,[["render",ks],["__scopeId","data-v-1bf46334"]]);U(Ts).mount("#app");
//# sourceMappingURL=index.736dfcf6.js.map
