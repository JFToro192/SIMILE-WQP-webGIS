{"version":3,"file":"index.2de109ce.js","sources":["../../../ol-project/vite/modulepreload-polyfill","../../../ol-project/src/assets/img/assev_simile.png","../../../ol-project/src/assets/js/controlFunctions.js","../../../ol-project/src/assets/js/controlCreate.js","../../../ol-project/src/assets/js/map.js","../../../ol-project/src/assets/js/panelCreate.js","../../../ol-project/src/assets/js/settings.js","../../../ol-project/src/assets/js/tsPlot.js","../../../ol-project/src/assets/js/requestLayers.js","../../../ol-project/plugin-vue:export-helper","../../../ol-project/src/components/panels/LayerPanel.vue","../../../ol-project/src/components/panels/MetadataPanel.vue","../../../ol-project/src/components/panels/TimePanel.vue","../../../ol-project/src/assets/img/basemap/osm.png","../../../ol-project/src/assets/img/basemap/terrain.png","../../../ol-project/src/assets/img/basemap/watercolor.png","../../../ol-project/src/assets/img/basemap/toner.png","../../../ol-project/src/assets/img/basemap/none.png","../../../ol-project/src/components/panels/BasemapPanel.vue","../../../ol-project/src/components/panels/PlotPanel.vue","../../../ol-project/src/assets/img/slides/i1.png","../../../ol-project/src/assets/img/slides/i2.png","../../../ol-project/src/assets/img/slides/i3.png","../../../ol-project/src/assets/img/slides/i4.png","../../../ol-project/src/assets/img/slides/i5.png","../../../ol-project/src/assets/img/slides/i6.png","../../../ol-project/src/assets/img/slides/i7.png","../../../ol-project/src/assets/img/slides/i8.png","../../../ol-project/src/assets/img/slides/i9.png","../../../ol-project/src/components/panels/slideShow/CarouselContainer.vue","../../../ol-project/src/components/panels/slideShow/CarouselSlide.vue","../../../ol-project/src/components/panels/SlidePanel.vue","../../../ol-project/src/components/panels/PopUp.vue","../../../ol-project/src/assets/img/legend/chl_legend.png","../../../ol-project/src/assets/img/legend/tsm_legend.png","../../../ol-project/src/assets/img/legend/lswt_legend.png","../../../ol-project/src/components/WebGISContainer.vue","../../../ol-project/src/App.vue","../../../ol-project/src/main.js"],"sourcesContent":["const p = function polyfill() {\n    const relList = document.createElement('link').relList;\n    if (relList && relList.supports && relList.supports('modulepreload')) {\n        return;\n    }\n    for (const link of document.querySelectorAll('link[rel=\"modulepreload\"]')) {\n        processPreload(link);\n    }\n    new MutationObserver((mutations) => {\n        for (const mutation of mutations) {\n            if (mutation.type !== 'childList') {\n                continue;\n            }\n            for (const node of mutation.addedNodes) {\n                if (node.tagName === 'LINK' && node.rel === 'modulepreload')\n                    processPreload(node);\n            }\n        }\n    }).observe(document, { childList: true, subtree: true });\n    function getFetchOpts(script) {\n        const fetchOpts = {};\n        if (script.integrity)\n            fetchOpts.integrity = script.integrity;\n        if (script.referrerpolicy)\n            fetchOpts.referrerPolicy = script.referrerpolicy;\n        if (script.crossorigin === 'use-credentials')\n            fetchOpts.credentials = 'include';\n        else if (script.crossorigin === 'anonymous')\n            fetchOpts.credentials = 'omit';\n        else\n            fetchOpts.credentials = 'same-origin';\n        return fetchOpts;\n    }\n    function processPreload(link) {\n        if (link.ep)\n            // ep marker = processed\n            return;\n        link.ep = true;\n        // prepopulate the load record\n        const fetchOpts = getFetchOpts(link);\n        fetch(link.href, fetchOpts);\n    }\n};__VITE_IS_MODERN__&&p();","export default \"__VITE_ASSET__d3f83cf6__\"","function openList()\r\n{\r\n    const className = '.'+this.element.classList[0];\r\n    const classItem = '.'+className.split(\"-\")[1] + '-item';\r\n    const element = $(className)\r\n    if (element.hasClass('active')) {\r\n        $(`${classItem}`).slice(0).hide();\r\n        element.removeClass('active');}\r\n    else{\r\n        $(`${classItem}`).slice(0).show();\r\n        element.addClass('active');\r\n    }   \r\n}\r\n\r\nfunction openPanel() {\r\n    const className = '.'+this.element.classList[0];\r\n    const classItem = '.'+className.split(\"-\")[1] + '-panel';\r\n    const elementButton = $(className)\r\n    const elementPanel = $(classItem)\r\n    if (elementPanel.hasClass('active')) {\r\n        elementPanel.hide();\r\n        elementButton.removeClass('active');\r\n        elementPanel.removeClass('active');\r\n    }\r\n    else{\r\n        elementPanel.show();\r\n        elementButton.addClass('active');\r\n        elementPanel.addClass('active');\r\n    }   \r\n}\r\n\r\nexport {\r\n    openList,\r\n    openPanel,\r\n}","import logoUrl from 'img/assev_simile.png'\r\nimport 'ol/ol.css';\r\nimport 'bootstrap-icons/font/bootstrap-icons.css';\r\nimport {Control} from 'ol/control';\r\nimport {openList, openPanel} from '@/assets/js/controlFunctions'\r\n\r\n/* MENU CONTROL */ \r\nclass MenuControl extends Control {\r\n  /**\r\n   * @param {Object} [opt_options] Control options.\r\n   */\r\n  constructor(opt_options) {\r\n    const options = opt_options || {};\r\n\r\n    const button = document.createElement('button');\r\n    button.innerHTML = '<i class=\"bi bi-list\"></i>';\r\n\r\n    const element = document.createElement('div');\r\n    element.className = 'show-burger ol-unselectable ol-control control-bar active';\r\n    element.appendChild(button);\r\n\r\n    super({\r\n      element: element,\r\n      target: options.target,\r\n    });\r\n\r\n    element.addEventListener('click', openList.bind(this), false);\r\n  }\r\n}\r\n\r\n/* LIST PANEL CONTROL */ \r\nclass LayersControl extends Control {\r\n  /**\r\n   * @param {Object} [opt_options] Control options.\r\n   */\r\n  constructor(opt_options) {\r\n    const options = opt_options || {};\r\n\r\n    const button = document.createElement('button');\r\n    button.innerHTML = '<i class=\"bi bi-map\"></i>';\r\n\r\n    button.title = 'layers panel';\r\n\r\n    const element = document.createElement('div');\r\n    element.className = 'show-layer ol-unselectable ol-control control-bar burger-item active';\r\n    element.appendChild(button);\r\n\r\n    super({\r\n      element: element,\r\n      target: options.target,\r\n    });\r\n    element.addEventListener('click', openPanel.bind(this), false);\r\n  }\r\n\r\n\r\n}\r\n\r\n/* METADATA PANEL CONTROL */\r\nclass MetadataControl extends Control {\r\n  /**\r\n   * @param {Object} [opt_options] Control options.\r\n   */\r\n  constructor(opt_options) {\r\n    const options = opt_options || {};\r\n\r\n    const button = document.createElement('button');\r\n    button.innerHTML = '<i class=\"bi bi-info-square\"></i>';\r\n\r\n    button.title = 'metadata panel';\r\n\r\n    const element = document.createElement('div');\r\n    element.className = 'show-metadata ol-unselectable ol-control control-bar burger-item';\r\n    element.appendChild(button);\r\n\r\n    super({\r\n      element: element,\r\n      target: options.target,\r\n    });\r\n    element.addEventListener('click', openPanel.bind(this), false);\r\n  }\r\n}\r\n\r\n/* TIME PANEL CONTROL */\r\nclass TimeControl extends Control {\r\n  /**\r\n   * @param {Object} [opt_options] Control options.\r\n   */\r\n  constructor(opt_options) {\r\n    const options = opt_options || {};\r\n\r\n    const button = document.createElement('button');\r\n    button.innerHTML = '<i class=\"bi bi-clock-history\"></i>';\r\n\r\n    button.title = 'time panel';\r\n\r\n    const element = document.createElement('div');\r\n    element.className = 'show-time ol-unselectable ol-control control-bar burger-item';\r\n    element.appendChild(button);\r\n\r\n    super({\r\n      element: element,\r\n      target: options.target,\r\n    });\r\n    element.addEventListener('click', openPanel.bind(this), false);\r\n  }\r\n}\r\n\r\n/* BASEMAP PANEL CONTROL */\r\nclass BaseMapControl extends Control {\r\n  /**\r\n   * @param {Object} [opt_options] Control options.\r\n   */\r\n  constructor(opt_options) {\r\n    const options = opt_options || {};\r\n\r\n    const button = document.createElement('button');\r\n    button.innerHTML = '<i class=\"bi bi-stack\"></i>';\r\n\r\n    button.title = 'basemaps';\r\n\r\n    const element = document.createElement('div');\r\n    element.className = 'show-basemap ol-unselectable ol-control control-bar burger-item';\r\n    element.appendChild(button);\r\n\r\n    super({\r\n      element: element,\r\n      target: options.target,\r\n    });\r\n    element.addEventListener('click', openPanel.bind(this), false);\r\n  }\r\n}\r\n\r\n/* PLOT PANEL CONTROL */\r\nclass PlotControl extends Control {\r\n  /**\r\n   * @param {Object} [opt_options] Control options.\r\n   */\r\n  constructor(opt_options) {\r\n    const options = opt_options || {};\r\n\r\n    const button = document.createElement('button');\r\n    button.innerHTML = '<i class=\"bi bi-graph-up\"></i>';\r\n\r\n    button.title = 'plot time series';\r\n\r\n    const element = document.createElement('div');\r\n\r\n    element.className = 'show-plot ol-unselectable ol-control control-bar burger-item';\r\n    element.appendChild(button);\r\n\r\n    super({\r\n      element: element,\r\n      target: options.target,\r\n    });\r\n    element.addEventListener('click', openPanel.bind(this), false);\r\n  }\r\n}\r\n\r\n/* PLOT PANEL CONTROL */\r\nclass SlideControl extends Control {\r\n  /**\r\n   * @param {Object} [opt_options] Control options.\r\n   */\r\n  constructor(opt_options) {\r\n    const options = opt_options || {};\r\n\r\n    const button = document.createElement('button');\r\n    button.innerHTML = '<i class=\"bi bi-file-earmark-easel\"></i>';\r\n\r\n    button.title = 'webgis guide';\r\n\r\n    const element = document.createElement('div');\r\n\r\n    element.className = 'show-slide ol-unselectable ol-control control-bar burger-item';\r\n    element.appendChild(button);\r\n\r\n    super({\r\n      element: element,\r\n      target: options.target,\r\n    });\r\n    element.addEventListener('click', openPanel.bind(this), false);\r\n  }\r\n}\r\n\r\n// /* SOCIAL MEDIA CONTROLS */ \r\n// class SocialControl extends Control {\r\n//   /**\r\n//    * @param {Object} [opt_options] Control options.\r\n//    */\r\n//   constructor(opt_options) {\r\n//     const options = opt_options || {};\r\n\r\n//     const list = document.createElement('ul');\r\n//     const item_main = document.createElement('li');\r\n//     const item_fb = document.createElement('li');\r\n//     const item_tw = document.createElement('li');\r\n//     const item_li = document.createElement('li');\r\n//     const item_ig = document.createElement('li');\r\n//     item_main.innerHTML = '<button><i class=\"bi bi-people\"></i></button>';\r\n//     item_fb.innerHTML = '<button class=\"social-item\" style=\"display:none;\"><i class=\"bi bi-facebook\"></i></button>';\r\n//     item_tw.innerHTML = '<button class=\"social-item\" style=\"display:none;\"><i class=\"bi bi-twitter\"></i></button>';\r\n//     item_li.innerHTML = '<button class=\"social-item\" style=\"display:none;\"><i class=\"bi bi-linkedin\"></i></button>';\r\n//     item_ig.innerHTML = '<button class=\"social-item\" style=\"display:none;\"><i class=\"bi bi-instagram\"></i></button>';\r\n\r\n//     item_main.title = 'social';\r\n//     item_fb.title = 'facebook';\r\n//     item_tw.title = 'twitter';\r\n//     item_li.title = 'linkedin';\r\n//     item_ig.title = 'instagram';\r\n\r\n\r\n//     const element = document.createElement('div');\r\n//     element.className = 'show-social ol-unselectable ol-control control-bar burger-item';\r\n//     list.appendChild(item_main);\r\n//     list.appendChild(item_fb);\r\n//     list.appendChild(item_tw);\r\n//     list.appendChild(item_li);\r\n//     list.appendChild(item_ig);\r\n//     element.appendChild(list);\r\n\r\n//     super({\r\n//       element: element,\r\n//       target: options.target,\r\n//     });\r\n\r\n//     item_main.addEventListener('click', openList.bind(this), false);\r\n//   }\r\n// }\r\n\r\n// /* ABOUT PROJECT CONTROLS */ \r\n// class AboutControl extends Control {\r\n//   /**\r\n//    * @param {Object} [opt_options] Control options.\r\n//    */\r\n//   constructor(opt_options) {\r\n//     const options = opt_options || {};\r\n\r\n//     const list = document.createElement('ul');\r\n//     const item_main = document.createElement('li');\r\n//     const item_news = document.createElement('li');\r\n//     const item_business = document.createElement('li');\r\n//     const item_gh = document.createElement('li');\r\n//     const item_calendar = document.createElement('li');\r\n//     item_main.innerHTML = '<button ><i class=\"bi bi-journals\"></i></button>';\r\n//     item_news.innerHTML = '<button class=\"about-item\" style=\"display:none;\"><i class=\"bi bi-newspaper\"></i></button>';\r\n//     item_business.innerHTML = '<button class=\"about-item\" style=\"display:none;\"><i class=\"bi bi-briefcase\"></i></button>';\r\n//     item_gh.innerHTML = '<button class=\"about-item\" style=\"display:none;\"><i class=\"bi bi-github\"></i></button>';\r\n//     item_calendar.innerHTML = '<button class=\"about-item\" style=\"display:none;\"><i class=\"bi bi-calendar-week\"></i></button>';\r\n\r\n//     item_main.title = 'portfolio';\r\n//     item_news.title = 'news';\r\n//     item_business.title = 'business intelligence platform';\r\n//     item_gh.title = 'webgis github repository';\r\n//     item_calendar.title = 'calendar';\r\n\r\n\r\n//     const element = document.createElement('div');\r\n//     element.className = 'show-about ol-unselectable ol-control control-bar burger-item';\r\n//     list.appendChild(item_main);\r\n//     list.appendChild(item_news);\r\n//     list.appendChild(item_business);\r\n//     list.appendChild(item_gh);\r\n//     list.appendChild(item_calendar);\r\n//     element.appendChild(list);\r\n\r\n//     super({\r\n//       element: element,\r\n//       target: options.target,\r\n//     });\r\n\r\n//     item_main.addEventListener('click', openList.bind(this), false);\r\n//   }\r\n// }\r\n\r\n/* GEONODE CONTROL */\r\nclass GeonodeControl extends Control {\r\n  /**\r\n   * @param {Object} [opt_options] Control options.\r\n   */\r\n  constructor(opt_options) {\r\n    const options = opt_options || {};\r\n\r\n    const button = document.createElement('button');\r\n    button.innerHTML = '<a href=\"https://www.geonode.eo.simile.polimi.it/\"><i class=\"bi bi-people-fill\"></i></a>';\r\n    button.src = \r\n\r\n    button.title = 'GeoNode';\r\n\r\n    const element = document.createElement('div');\r\n\r\n    element.className = 'show-geonode ol-unselectable ol-control control-bar';\r\n    element.appendChild(button);\r\n\r\n    super({\r\n      element: element,\r\n      target: options.target,\r\n    });\r\n  }\r\n}\r\n\r\n/* STATIC PROJECT LOGO */ \r\nclass ProjectLogo extends Control {\r\n  /**\r\n   * @param {Object} [opt_options] Control options.\r\n   */\r\n  constructor(opt_options) {\r\n    const options = opt_options || {};\r\n\r\n    const div = document.createElement('div');\r\n    const a = document.createElement('a');\r\n    a.href = \"https://www.progetti.interreg-italiasvizzera.eu/it/b/78/sistemainformativoperilmonitoraggiointegratodeilaghiinsubriciedeiloroe\";\r\n    const img = document.createElement('img');\r\n    img.src = logoUrl;\r\n    img.alt = 'logo-simile-interreg';\r\n    a.appendChild(img);\r\n    div.appendChild(a);\r\n\r\n    const element = document.createElement('div');\r\n    element.className = 'project-logo ol-unselectable ol-control';\r\n    element.appendChild(div);\r\n\r\n    super({\r\n      element: element,\r\n      target: options.target,\r\n    });\r\n  }\r\n}\r\n\r\n\r\nexport {MenuControl, \r\n        LayersControl, \r\n        MetadataControl, \r\n        TimeControl, \r\n        BaseMapControl, \r\n        PlotControl,\r\n        SlideControl,\r\n        // SocialControl,\r\n        // AboutControl,\r\n        ProjectLogo,\r\n        GeonodeControl\r\n      }","import {MenuControl,\r\n\t\tLayersControl,\r\n\t\tMetadataControl,\r\n\t\tTimeControl,\r\n\t\tBaseMapControl,\r\n\t\tPlotControl,\r\n\t\tSlideControl,\r\n\t\t// SocialControl,\r\n\t\t// AboutControl,\r\n\t\tProjectLogo,\r\n\t\tGeonodeControl} from 'js/controlCreate';\r\n// import {layerPanel,\r\n// \t\tmetadataPanel,\r\n// \t\ttimePanel,\r\n// \t\tbasemapPanel,\r\n// \t\tplotPanel,\r\n// \t\tslidePanel,\r\n// \t\tpopup} from 'js/panelCreate';\r\nimport {Map, View} from 'ol';\r\nimport 'ol/ol.css';\r\nimport TileLayer from 'ol/layer/Tile';\r\nimport OSM from 'ol/source/OSM';\r\nimport {fromLonLat, toLonLat} from 'ol/proj';\r\nimport {toStringHDMS} from 'ol/coordinate';\r\nimport Stamen from 'ol/source/Stamen';\r\nimport { OverviewMap,ScaleLine, FullScreen, defaults as defaultControls} from 'ol/control';\r\nimport { getMapboxPath } from 'ol/layer/MapboxVector';\r\n\r\n// Basemaps Layers Group\r\n\r\n\r\nconst osm = new OSM();\r\n\r\nconst overviewMapControl = new OverviewMap({\r\nlayers: [\r\n\tnew TileLayer({\r\n\tsource: osm\r\n\t}),\r\n],\r\n});\r\n\r\nfunction addMap() {\r\n\tconst map = new Map({\r\n\t\ttarget: 'map',\r\n\t\t// TODO: Define controllers panel as constructors to make them native components to the OL map object\r\n\t\tcontrols: defaultControls()\r\n\t\t\t\t\t.extend([new ScaleLine(),\r\n\t\t\t\t\t\t\t// new FullScreen(),\r\n\t\t\t\t\t\t\toverviewMapControl,\r\n\t\t\t\t\t\t\tnew MenuControl(),\r\n\t\t\t\t\t\t\tnew LayersControl(),\r\n\t\t\t\t\t\t\t// layerPanel,\r\n\t\t\t\t\t\t\tnew MetadataControl(),\r\n\t\t\t\t\t\t\t// metadataPanel,\r\n\t\t\t\t\t\t\tnew TimeControl(),\r\n\t\t\t\t\t\t\t// timePanel,\r\n\t\t\t\t\t\t\tnew BaseMapControl(),\r\n\t\t\t\t\t\t\t// basemapPanel,\r\n\t\t\t\t\t\t\tnew PlotControl(),\r\n\t\t\t\t\t\t\t// plotPanel,\r\n\t\t\t\t\t\t\t// slidePanel,\r\n\t\t\t\t\t\t\tnew SlideControl(),\r\n\t\t\t\t\t\t\t// new SocialControl(),\r\n\t\t\t\t\t\t\t// new AboutControl(),\r\n\t\t\t\t\t\t\tnew ProjectLogo(),\r\n\t\t\t\t\t\t\tnew GeonodeControl(),\r\n\t\t\t\t\t]),\r\n\t\tview: new View({\r\n\t\t\tcenter: [994904.360160,5775887.605341],\r\n\t\t\tzoom: 10\r\n\t\t})\r\n\t});\r\n\treturn map\r\n}\r\n\r\n\r\nexport {\r\n\taddMap,\r\n}\r\n\r\n","import Control from 'ol/control/Control';\r\n\r\n\r\nconst layerPanel = new Control({\r\n  element: document.getElementById('layerPanel'),\r\n});\r\n\r\nconst metadataPanel = new Control({\r\n  element: document.getElementById('metadataPanel'),\r\n});\r\n\r\nconst timePanel = new Control({\r\n  element: document.getElementById('timePanel'),\r\n});\r\n\r\nconst basemapPanel = new Control({\r\n  element: document.getElementById('basemapPanel'),\r\n});\r\n\r\nconst plotPanel = new Control({\r\n  element: document.getElementById('plotPanel'),\r\n});\r\n\r\nconst slidePanel = new Control({\r\n  element: document.getElementById('slidePanel'),\r\n});\r\n\r\nconst popup = new Control({\r\n    element: document.getElementById('popup'),\r\n  });\r\n\r\n\r\nexport {\r\n    layerPanel,\r\n    metadataPanel,\r\n    timePanel,\r\n    basemapPanel,\r\n    plotPanel,\r\n    slidePanel,\r\n    popup,\r\n}","\"use strict\";\r\n\r\nconst settings = {\r\n    urlWMS: \"https://www.geonode.eo.simile.polimi.it/geoserver/geonode/wms\",\r\n    urlWMSget: \"https://www.webgis.eo.simile.polimi.it/api/getLayers\",\r\n    urlWMSfeatureInfo: \"https://www.webgis.eo.simile.polimi.it/api/getLayerInfo\",\r\n    typology:{\r\n        CHL:{\r\n            title:\"Chlorophyll-a\",\r\n            abstract:\"Chlorophyll-a allows plants to photosintezise. This measurement is used to classify the trophic condition of a water body. The Chlorophyll-a maps presented have been processed using the Sentinel-3 OLCI sensor\",\r\n            style:\"chl\",\r\n            units: \"mg/m3\",\r\n        },\r\n        TSM:{\r\n            title:\"Total Suspended Matter\",\r\n            abstract:\"Total suspended matter concentration\",\r\n            style:\"tsm\",\r\n            units: \"g/m3\",\r\n        },\r\n        LSWT:{\r\n            title:\"Lake Surface Water Temperature\",\r\n            abstract:\"Average lake surface temperature\",\r\n            style:\"lswt\",\r\n            units: \"°C\",\r\n        }   \r\n    },\r\n    basemaps: [\r\n        //A single basemap should be set as visible\r\n        {layer:'osm',source:'osm',src:'osm.png',active:true},\r\n        // {layer:'watercolor',source:'stamen',src:'watercolor.png',active:false},\r\n        {layer:'terrain',source:'terrain-labels',src:'terrain.png',active:false},\r\n        {layer:'toner',source:'toner',src:'toner.png',active:false},\r\n        {layer:'none',source:'none',src:'none.png',active:false},\r\n    ],\r\n    slides:[\r\n        {\r\n            title:\"Welcome!\",\r\n            src:\"i1.png\",\r\n            description:\"1. SIMILE WebGIS enables the visualization of the water quality parameters (WQPs) maps produced for Lakes Maggiore, Lugano and Como.\",\r\n            details:\"Explore the different panels available inside the toolbar menu\"\r\n        },\r\n        {\r\n            title:\"Explore the different tools\",\r\n            src:\"i2.png\",\r\n            description:\"2. The WebGIS presents multiple panels allowing to explore the different water quality parameters maps\",\r\n            details:\"(1) Layers Panel: The layers collections divide depending on the layers typologies; Each collection listed provide multiple options to control the layer (2) layer's visibility, (3) download the data, (4) access its metadata, and (5) control the layer opacity; The time series (collections) correspond to a group of layers from which it is possible to query datasets in time \"\r\n        },\r\n        {\r\n            title:\"Visualize and explore the WQP\",\r\n            src:\"i3.png\",\r\n            description:\"3. Review the different components allowing the visualization of the maps, such as the layer panel, metadata panel and time controller\",\r\n            details:\"In case of the time series, once set visible, this will activate the (1) Metadata and (2) Time Panels. In the (1) Metadata Panel you will find more information regarding the production of the maps. On the other hand, the (2) Time Panel will allow you to visualize the evolution of the active water quality parameter in time. Notice the timestamps are retrieved for the latest activated time series\"\r\n        },\r\n        {\r\n            title:\"Observe the evolution of the time series\",\r\n            src:\"i4.png\",\r\n            description:\"4. Use the time manager to observe the changes of the parameters in time.\",\r\n            details:\"Explore the available Water Quality Parameters Maps in time by searching for an specific date using the (1) dropdown list, or navigate through the dates using the (2) slider and (3) backwards/forwards controllers\"\r\n        },\r\n        {\r\n            title:\"Observe the evolution of the time series\",\r\n            src:\"i5.png\",\r\n            description:\"5. Example time manager use for observing the changes of the parameters in time.\",\r\n            details:\"\"\r\n        },\r\n        {\r\n            title:\"Change the basemap\",\r\n            src:\"i6.png\",\r\n            description:\"6. Customize the view of the WebGIS by using different basemaps\",\r\n            details:\"Use the (1) Basemaps Panel to change the background map\"\r\n        },\r\n        {\r\n            title:\"Query values from the layers\",\r\n            src:\"i7.png\",\r\n            description:\"7. Extract point values from the currently active layer\",\r\n            details:\"Once a time series is active, it is possible to query the estimates of the Water Quality Parameters maps by clicking on layers. Here, you will find information about the WQP layer name, estimate value and location.\"\r\n        },\r\n        {\r\n            title:\"Review the evolution of the WQP at a point\",\r\n            src:\"i8.png\",\r\n            description:\"8. Plot time series of the estimates for a WQP at a point\",\r\n            details:\"By clicking on a map, you will also be able to explore the evolution of the estimates by activating the (1) Plot Panel. The Plot Panel presents a dynamic graph were you can review the complete time series at a point, or clip the estimates according to the (2) range that can be edited in the subplot. Alternatively, you can clip the data by limiting the plot to a (3) month, or year (depending on the lenght of the time series, or return to the complete plot for the time series by clicking on (4) data\"\r\n        },\r\n        // {\r\n        //     title:\"Review the evolution of the WQP at a point\",\r\n        //     src:\"i9.png\",\r\n        //     description:\"9. Plot time series of the estimates for a WQP at a point\",\r\n        //     details:\"By clicking on a map, you will also be able to explore the evolution of the estimates by activating the (1) Plot Panel. The Plot Panel presents a dynamic graph were you can review the complete time series at a point, or clip the estimates according to the (2) range that can be edited in the subplot. Alternatively, you can clip the data by limiting the plot to a (3) month, or year (depending on the lenght of the time series, or return to the complete plot for the time series by clicking on (4) data\"\r\n        // },\r\n    ]\r\n}\r\n\r\nexport {\r\n    settings\r\n}"," import { settings } from \"./settings\";\r\n\r\n function tsPlot(arr_data, typology) {\r\n    var metricName   = \"views\";\r\n    var optwidth        = 600;\r\n    var optheight       = 400;\r\n\r\n    // Retrieve description of the parameters\r\n    var d_type = settings['typology'][typology];\r\n\r\n    /*\r\n    * ========================================================================\r\n    *  Prepare data\r\n    * ========================================================================\r\n    */\r\n\r\n    // Combine the months and count array to make \"data\"\r\n    // Remove empty promises from array \r\n    var dataset = []\r\n    arr_data.forEach(function(d) {\r\n        if (d!=undefined){\r\n            dataset.push(d)\r\n        }\r\n    });\r\n    \r\n    // format month as a date\r\n    dataset.forEach(function(d) {\r\n        d.month = d3.time.format(\"%Y-%m-%d\").parse(d.month);\r\n    });\r\n\r\n    // sort dataset by month\r\n    dataset.sort(function(x, y){\r\n    return d3.ascending(x.month, y.month);\r\n    });\r\n\r\n\r\n    /*\r\n    * ========================================================================\r\n    *  sizing\r\n    * ========================================================================\r\n    */\r\n\r\n    /* === Focus chart === */\r\n\r\n    var margin\t= {top: 20, right: 30, bottom: 100, left: 20},\r\n        width\t= optwidth - margin.left - margin.right + 100,\r\n        height\t= optheight - margin.top - margin.bottom;\r\n\r\n    /* === Context chart === */\r\n\r\n    var margin_context = {top: 320, right: 30, bottom: 20, left: 20},\r\n        height_context = optheight - margin_context.top - margin_context.bottom;\r\n\r\n    /*\r\n    * ========================================================================\r\n    *  x and y coordinates\r\n    * ========================================================================\r\n    */\r\n\r\n    // the date range of available data:\r\n    var dataXrange = d3.extent(dataset, function(d) { return d.month; });\r\n    var dataYrange = [0, d3.max(dataset, function(d) { return d.count; })];\r\n\r\n    // maximum date range allowed to display\r\n    var mindate = dataXrange[0],  // use the range of the data\r\n        maxdate = dataXrange[1];\r\n\r\n    var DateFormat\t  =  d3.time.format(\"%b %Y\");\r\n\r\n    var dynamicDateFormat = timeFormat([\r\n        [d3.time.format(\"%Y\"), function() { return true; }],// <-- how to display when Jan 1 YYYY\r\n        [d3.time.format(\"%b %Y\"), function(d) { return d.getMonth(); }],\r\n        [function(){return \"\";}, function(d) { return d.getDate() != 1; }]\r\n    ]);\r\n\r\n    // var dynamicDateFormat =  timeFormat([\r\n    //     [d3.time.format(\"%Y\"), function() { return true; }],\r\n    //     [d3.time.format(\"%b\"), function(d) { return d.getMonth(); }],\r\n    //     [function(){return \"\";}, function(d) { return d.getDate() != 1; }]\r\n    // ]);\r\n\r\n    /* === Focus Chart === */\r\n\r\n    var x = d3.time.scale()\r\n        .range([0, (width)])\r\n        .domain(dataXrange);\r\n\r\n    var y = d3.scale.linear()\r\n        .range([height, 0])\r\n        .domain(dataYrange);\r\n\r\n    var xAxis = d3.svg.axis()\r\n        .scale(x)\r\n        .orient(\"bottom\")\r\n            .tickSize(-(height))\r\n        .ticks(customTickFunction)\r\n        .tickFormat(dynamicDateFormat);\r\n\r\n    var yAxis = d3.svg.axis()\r\n        .scale(y)\r\n        .ticks(4)\r\n        .tickSize(-(width))\r\n        .orient(\"right\");\r\n\r\n    /* === Context Chart === */\r\n\r\n    var x2 = d3.time.scale()\r\n        .range([0, width])\r\n        .domain([mindate, maxdate]);\r\n\r\n    var y2 = d3.scale.linear()\r\n        .range([height_context, 0])\r\n        .domain(y.domain());\r\n\r\n    var xAxis_context = d3.svg.axis()\r\n        .scale(x2)\r\n        .orient(\"bottom\")\r\n        .ticks(customTickFunction)\r\n        .tickFormat(dynamicDateFormat);\r\n\r\n    /*\r\n    * ========================================================================\r\n    *  Plotted line and area variables\r\n    * ========================================================================\r\n    */\r\n\r\n    /* === Focus Chart === */\r\n\r\n    var line = d3.svg.line()\r\n        .x(function(d) { return x(d.month); })\r\n        .y(function(d) { return y(d.count); });\r\n\r\n    var area = d3.svg.area()\r\n    .x(function(d) { return x(d.month); })\r\n    .y0((height))\r\n    .y1(function(d) { return y(d.count); });\r\n\r\n    /* === Context Chart === */\r\n\r\n    var area_context = d3.svg.area()\r\n        .x(function(d) { return x2(d.month); })\r\n        .y0((height_context))\r\n        .y1(function(d) { return y2(d.count); });\r\n\r\n    var line_context = d3.svg.line()\r\n        .x(function(d) { return x2(d.month); })\r\n        .y(function(d) { return y2(d.count); });\r\n\r\n    /*\r\n    * ========================================================================\r\n    *  Variables for brushing and zooming behaviour\r\n    * ========================================================================\r\n    */\r\n\r\n    var brush = d3.svg.brush()\r\n        .x(x2)\r\n        .on(\"brush\", brushed)\r\n        .on(\"brushend\", brushend);\r\n\r\n    var zoom = d3.behavior.zoom()\r\n        .on(\"zoom\", draw)\r\n        .on(\"zoomend\", brushend);\r\n\r\n    /*\r\n    * ========================================================================\r\n    *  Define the SVG area (\"vis\") and append all the layers\r\n    * ========================================================================\r\n    */\r\n\r\n    // === the main components === //\r\n\r\n    var vis = d3.select(\"#metric-modal\").append(\"svg\")\r\n        .attr(\"width\", width + margin.left + margin.right)\r\n        .attr(\"height\", height + margin.top + margin.bottom)\r\n        .attr(\"class\", \"metric-chart\"); // CB -- \"line-chart\" -- CB //\r\n\r\n    vis.append(\"defs\").append(\"clipPath\")\r\n        .attr(\"id\", \"clip\")\r\n        .append(\"rect\")\r\n        .attr(\"width\", width)\r\n        .attr(\"height\", height);\r\n        // clipPath is used to keep line and area from moving outside of plot area when user zooms/scrolls/brushes\r\n\r\n    var context = vis.append(\"g\")\r\n        .attr(\"class\", \"context\")\r\n        .attr(\"transform\", \"translate(\" + margin_context.left + \",\" + margin_context.top + \")\");\r\n\r\n    var focus = vis.append(\"g\")\r\n        .attr(\"class\", \"focus\")\r\n        .attr(\"transform\", \"translate(\" + margin.left + \",\" + margin.top + \")\");\r\n\r\n    var rect = vis.append(\"svg:rect\")\r\n        .attr(\"class\", \"pane\")\r\n        .attr(\"width\", width)\r\n        .attr(\"height\", height)\r\n        .attr(\"transform\", \"translate(\" + margin.left + \",\" + margin.top + \")\")\r\n        .call(zoom)\r\n        .call(draw);\r\n\r\n    // === current date range text & zoom buttons === //\r\n\r\n    var display_range_group = vis.append(\"g\")\r\n        .attr(\"id\", \"buttons_group\")\r\n        .attr(\"transform\", \"translate(\" + 0 + \",\"+ 0 +\")\");\r\n\r\n    var expl_text = display_range_group.append(\"text\")\r\n        .text(\"Time series between: \")\r\n        .style(\"text-anchor\", \"start\")\r\n        .attr(\"transform\", \"translate(\" + 0 + \",\"+ 10 +\")\");\r\n\r\n    display_range_group.append(\"text\")\r\n        .attr(\"id\", \"displayDates\")\r\n        .text(DateFormat(dataXrange[0]) + \" - \" + DateFormat(dataXrange[1]))\r\n        .style(\"text-anchor\", \"start\")\r\n        .attr(\"transform\", \"translate(\" + 135 + \",\"+ 10 +\")\");\r\n\r\n    var expl_text = display_range_group.append(\"text\")\r\n        .text(\"Zoom to: \")\r\n        .style(\"text-anchor\", \"start\")\r\n        .attr(\"transform\", \"translate(\" + 270 + \",\"+ 10 +\")\");\r\n\r\n    // === the zooming/scaling buttons === //\r\n\r\n    var button_width = 40;\r\n    var button_height = 14;\r\n\r\n    // don't show year button if < 1 year of data\r\n    var dateRange  = dataXrange[1] - dataXrange[0],\r\n        ms_in_year = 31540000000;\r\n\r\n    if (dateRange < ms_in_year)   {\r\n        var button_data =[\"month\",\"data\"];\r\n    } else {\r\n        var button_data =[\"year\",\"month\",\"data\"];\r\n    };\r\n\r\n    var button = display_range_group.selectAll(\"g\")\r\n        .data(button_data)\r\n        .enter().append(\"g\")\r\n        .attr(\"class\", \"scale_button\")\r\n        .attr(\"transform\", function(d, i) { return \"translate(\" + (330 + i*button_width + i*10) + \",0)\"; })\r\n        .on(\"click\", scaleDate);\r\n\r\n    button.append(\"rect\")\r\n        .attr(\"width\", button_width)\r\n        .attr(\"height\", button_height)\r\n        .attr(\"rx\", 1)\r\n        .attr(\"ry\", 1);\r\n\r\n    button.append(\"text\")\r\n        .attr(\"dy\", (button_height/2 + 3))\r\n        .attr(\"dx\", button_width/2)\r\n        .style(\"text-anchor\", \"middle\")\r\n        .text(function(d) { return d; });\r\n\r\n    /* === focus chart === */\r\n\r\n    focus.append(\"g\")\r\n        .attr(\"class\", \"y axis\")\r\n        .call(yAxis)\r\n        .attr(\"transform\", \"translate(\" + (width) + \", 0)\");\r\n\r\n    focus.append(\"path\")\r\n        .datum(dataset)\r\n        .attr(\"class\", \"area\")\r\n        .attr(\"d\", area);\r\n\r\n    focus.append(\"g\")\r\n        .attr(\"class\", \"x axis\")\r\n        .attr(\"transform\", \"translate(0,\" + height + \")\")\r\n        .call(xAxis);\r\n\r\n    focus.append(\"path\")\r\n        .datum(dataset)\r\n        .attr(\"class\", \"line\")\r\n        .attr(\"d\", line);\r\n\r\n    /* === context chart === */\r\n\r\n    context.append(\"path\")\r\n        .datum(dataset)\r\n        .attr(\"class\", \"area\")\r\n        .attr(\"d\", area_context);\r\n\r\n    context.append(\"path\")\r\n        .datum(dataset)\r\n        .attr(\"class\", \"line\")\r\n        .attr(\"d\", line_context);\r\n\r\n    context.append(\"g\")\r\n        .attr(\"class\", \"x axis\")\r\n        .attr(\"transform\", \"translate(0,\" + height_context + \")\")\r\n        .call(xAxis_context);\r\n\r\n    /* === brush (part of context chart)  === */\r\n\r\n    var brushg = context.append(\"g\")\r\n        .attr(\"class\", \"x brush\")\r\n        .call(brush);\r\n\r\n    brushg.selectAll(\".extent\")\r\n    .attr(\"y\", -6)\r\n    .attr(\"height\", height_context + 8);\r\n    // .extent is the actual window/rectangle showing what's in focus\r\n\r\n    brushg.selectAll(\".resize\")\r\n        .append(\"rect\")\r\n        .attr(\"class\", \"handle\")\r\n        .attr(\"transform\", \"translate(0,\" +  -3 + \")\")\r\n        .attr('rx', 2)\r\n        .attr('ry', 2)\r\n        .attr(\"height\", height_context + 6)\r\n        .attr(\"width\", 3);\r\n\r\n    brushg.selectAll(\".resize\")\r\n        .append(\"rect\")\r\n        .attr(\"class\", \"handle-mini\")\r\n        .attr(\"transform\", \"translate(-2,8)\")\r\n        .attr('rx', 3)\r\n        .attr('ry', 3)\r\n        .attr(\"height\", (height_context/2))\r\n        .attr(\"width\", 7);\r\n        // .resize are the handles on either size\r\n        // of the 'window' (each is made of a set of rectangles)\r\n\r\n    /* === y axis title === */\r\n\r\n    vis.append(\"text\")\r\n        .attr(\"class\", \"y axis title\")\r\n        .text(`${typology} [${d_type.units}]`)\r\n        .attr(\"x\", (-(height/2)))\r\n        .attr(\"y\", 0)\r\n        .attr(\"dy\", \"1em\")\r\n        .attr(\"transform\", \"rotate(-90)\")\r\n        .style(\"text-anchor\", \"middle\");\r\n\r\n    // allows zooming before any brush action\r\n    zoom.x(x);\r\n    /*\r\n* ========================================================================\r\n*  Functions\r\n* ========================================================================\r\n*/\r\n\r\n// === tick/date formatting functions ===\r\n// from: https://stackoverflow.com/questions/20010864/d3-axis-labels-become-too-fine-grained-when-zoomed-in\r\n\r\nfunction timeFormat(formats) {\r\n  return function(date) {\r\n    var i = formats.length - 1, f = formats[i];\r\n    while (!f[1](date)) f = formats[--i];\r\n    return f[0](date);\r\n  };\r\n};\r\n\r\nfunction customTickFunction(t0, t1, dt)  {\r\n    var labelSize = 42; //\r\n    var maxTotalLabels = Math.floor(width / labelSize);\r\n\r\n    function step(date, offset)\r\n    {\r\n        date.setMonth(date.getMonth() + offset);\r\n    }\r\n\r\n    var time = d3.time.month.ceil(t0), times = [], monthFactors = [1,3,4,12];\r\n\r\n    while (time < t1) times.push(new Date(+time)), step(time, 1);\r\n    var timesCopy = times;\r\n    var i;\r\n    for(i=0 ; times.length > maxTotalLabels ; i++)\r\n        times = _.filter(timesCopy, function(d){\r\n            return (d.getMonth()) % monthFactors[i] == 0;\r\n        });\r\n\r\n    return times;\r\n};\r\n\r\n// === brush and zoom functions ===\r\n\r\nfunction brushed() {\r\n\r\n    x.domain(brush.empty() ? x2.domain() : brush.extent());\r\n    focus.select(\".area\").attr(\"d\", area);\r\n    focus.select(\".line\").attr(\"d\", line);\r\n    focus.select(\".x.axis\").call(xAxis);\r\n    // Reset zoom scale's domain\r\n    zoom.x(x);\r\n    updateDisplayDates();\r\n    setYdomain();\r\n\r\n};\r\n\r\nfunction draw() {\r\n    setYdomain();\r\n    focus.select(\".area\").attr(\"d\", area);\r\n    focus.select(\".line\").attr(\"d\", line);\r\n    focus.select(\".x.axis\").call(xAxis);\r\n    //focus.select(\".y.axis\").call(yAxis);\r\n    // Force changing brush range\r\n    brush.extent(x.domain());\r\n    vis.select(\".brush\").call(brush);\r\n    // and update the text showing range of dates.\r\n    updateDisplayDates();\r\n};\r\n\r\nfunction brushend() {\r\n// when brush stops moving:\r\n\r\n    // check whether chart was scrolled out of bounds and fix,\r\n    var b = brush.extent();\r\n    var out_of_bounds = brush.extent().some(function(e) { return e < mindate | e > maxdate; });\r\n    if (out_of_bounds){ b = moveInBounds(b) };\r\n\r\n};\r\n\r\nfunction updateDisplayDates() {\r\n\r\n    var b = brush.extent();\r\n    // update the text that shows the range of displayed dates\r\n    var localBrushDateStart = (brush.empty()) ? DateFormat(dataXrange[0]) : DateFormat(b[0]),\r\n        localBrushDateEnd   = (brush.empty()) ? DateFormat(dataXrange[1]) : DateFormat(b[1]);\r\n\r\n    // Update start and end dates in upper right-hand corner\r\n    d3.select(\"#displayDates\")\r\n        .text(localBrushDateStart == localBrushDateEnd ? localBrushDateStart : localBrushDateStart + \" - \" + localBrushDateEnd);\r\n};\r\n\r\nfunction moveInBounds(b) {\r\n// move back to boundaries if user pans outside min and max date.\r\n\r\n    var ms_in_year = 31536000000,\r\n        brush_start_new,\r\n        brush_end_new;\r\n\r\n    if       (b[0] < mindate)   { brush_start_new = mindate; }\r\n    else if  (b[0] > maxdate)   { brush_start_new = new Date(maxdate.getTime() - ms_in_year); }\r\n    else                        { brush_start_new = b[0]; };\r\n\r\n    if       (b[1] > maxdate)   { brush_end_new = maxdate; }\r\n    else if  (b[1] < mindate)   { brush_end_new = new Date(mindate.getTime() + ms_in_year); }\r\n    else                        { brush_end_new = b[1]; };\r\n\r\n    brush.extent([brush_start_new, brush_end_new]);\r\n\r\n    brush(d3.select(\".brush\").transition());\r\n    brushed();\r\n    draw();\r\n\r\n    return(brush.extent())\r\n};\r\n\r\nfunction setYdomain(){\r\n// this function dynamically changes the y-axis to fit the data in focus\r\n\r\n    // get the min and max date in focus\r\n    var xleft = new Date(x.domain()[0]);\r\n    var xright = new Date(x.domain()[1]);\r\n\r\n    // a function that finds the nearest point to the right of a point\r\n    var bisectDate = d3.bisector(function(d) { return d.month; }).right;\r\n\r\n    // get the y value of the line at the left edge of view port:\r\n    var iL = bisectDate(dataset, xleft);\r\n\r\n    if (dataset[iL] !== undefined && dataset[iL-1] !== undefined) {\r\n\r\n        var left_dateBefore = dataset[iL-1].month,\r\n            left_dateAfter = dataset[iL].month;\r\n\r\n        var intfun = d3.interpolateNumber(dataset[iL-1].count, dataset[iL].count);\r\n        var yleft = intfun((xleft-left_dateBefore)/(left_dateAfter-left_dateBefore));\r\n    } else {\r\n        var yleft = 0;\r\n    }\r\n\r\n    // get the x value of the line at the right edge of view port:\r\n    var iR = bisectDate(dataset, xright);\r\n\r\n    if (dataset[iR] !== undefined && dataset[iR-1] !== undefined) {\r\n\r\n        var right_dateBefore = dataset[iR-1].month,\r\n            right_dateAfter = dataset[iR].month;\r\n\r\n        var intfun = d3.interpolateNumber(dataset[iR-1].count, dataset[iR].count);\r\n        var yright = intfun((xright-right_dateBefore)/(right_dateAfter-right_dateBefore));\r\n    } else {\r\n        var yright = 0;\r\n    }\r\n\r\n    // get the y values of all the actual data points that are in view\r\n    var dataSubset = dataset.filter(function(d){ return d.month >= xleft && d.month <= xright; });\r\n    var countSubset = [];\r\n    dataSubset.map(function(d) {countSubset.push(d.count);});\r\n\r\n    // add the edge values of the line to the array of counts in view, get the max y;\r\n    countSubset.push(yleft);\r\n    countSubset.push(yright);\r\n    var ymax_new = d3.max(countSubset);\r\n\r\n    if(ymax_new == 0){\r\n        ymax_new = dataYrange[1];\r\n    }\r\n\r\n    // reset and redraw the yaxis\r\n    y.domain([0, ymax_new*1.05]);\r\n    focus.select(\".y.axis\").call(yAxis);\r\n\r\n};\r\n\r\nfunction scaleDate(d,i) {\r\n// action for buttons that scale focus to certain time interval\r\n\r\n    var b = brush.extent(),\r\n        interval_ms,\r\n        brush_end_new,\r\n        brush_start_new;\r\n\r\n    if      (d == \"year\")   { interval_ms = 31536000000}\r\n    else if (d == \"month\")  { interval_ms = 2592000000 };\r\n\r\n    if ( d == \"year\" | d == \"month\" )  {\r\n\r\n        if((maxdate.getTime() - b[1].getTime()) < interval_ms){\r\n        // if brush is too far to the right that increasing the right-hand brush boundary would make the chart go out of bounds....\r\n            brush_start_new = new Date(maxdate.getTime() - interval_ms); // ...then decrease the left-hand brush boundary...\r\n            brush_end_new = maxdate; //...and set the right-hand brush boundary to the maxiumum limit.\r\n        } else {\r\n        // otherwise, increase the right-hand brush boundary.\r\n            brush_start_new = b[0];\r\n            brush_end_new = new Date(b[0].getTime() + interval_ms);\r\n        };\r\n\r\n    } else if ( d == \"data\")  {\r\n        brush_start_new = dataXrange[0];\r\n        brush_end_new = dataXrange[1]\r\n    } else {\r\n        brush_start_new = b[0];\r\n        brush_end_new = b[1];\r\n    };\r\n\r\n    brush.extent([brush_start_new, brush_end_new]);\r\n\r\n    // now draw the brush to match our extent\r\n    brush(d3.select(\".brush\").transition());\r\n    // now fire the brushstart, brushmove, and brushend events\r\n    brush.event(d3.select(\".brush\").transition());\r\n    };\r\n\r\n    /*Styling of the plot depending on the typology*/\r\n    var plotArea = document.querySelectorAll('path.area')\r\n    if (typology=='LSWT') {\r\n        plotArea.forEach(plot => {\r\n            plot.setAttribute('style','fill:#96DEFF')\r\n        });\r\n    } else if (typology=='CHL') {\r\n        plotArea.forEach(plot => {\r\n            plot.setAttribute('style','fill:#96FFC2')\r\n        });\r\n    } else if (typology=='TSM') {\r\n        plotArea.forEach(plot => {\r\n            plot.setAttribute('style','fill:#FFD696')\r\n        });\r\n    }\r\n\r\n    var plotLine = document.querySelectorAll('path.line')\r\n    if (typology=='LSWT') {\r\n        plotLine.forEach(plot => {\r\n            plot.setAttribute('style','stroke:#0082A8')\r\n        });\r\n    } else if (typology=='CHL') {\r\n        plotLine.forEach(plot => {\r\n            plot.setAttribute('style','stroke:#00A835')\r\n        });\r\n    } else if (typology=='TSM') {\r\n        plotLine.forEach(plot => {\r\n            plot.setAttribute('style','stroke:#FF9B00')\r\n        });\r\n    }\r\n}\r\n\r\nexport {\r\n    tsPlot,\r\n}","import axios from \"axios\"\r\nimport WMSCapabilities from 'ol/format/WMSCapabilities';\r\n// Import OL functions\r\nimport {Group as LayerGroup, Tile as TileLayer} from 'ol/layer';\r\nimport TileWMS from 'ol/source/TileWMS'; \r\n// Import OL basemap sources\r\nimport OSM from 'ol/source/OSM';\r\nimport Stamen from 'ol/source/Stamen';\r\n// XML parser\r\nconst parser = new WMSCapabilities();\r\n// Import plotting function\r\nimport { tsPlot } from \"./tsPlot\";\r\n\r\nfunction getLayersWMS(urlWMS) {\r\n    axios.get(urlWMS)\r\n    .then(response => {\r\n        let capabilities = parser.read(response.data)\r\n        let layers = capabilities.Capability.Layer.Layer\r\n        let group = organizeLayers(layers)\r\n        return group\r\n    })\r\n    .catch(err => {\r\n        console.log(err)\r\n    })\r\n}\r\n\r\nfunction createTileWMS(layerName, url,opacityValue,styleValue) {\r\n    let tileWMS = new TileLayer({\r\n        source: new TileWMS({\r\n        url: url,\r\n        params: {'LAYERS': layerName, 'TILED': true, 'STYLES':styleValue},\r\n        // crossOrigin: 'anonymous',\r\n        serverType: 'geoserver',\r\n        }),\r\n        visible:false,\r\n        opacity:opacityValue,\r\n    })\r\n\r\n    return tileWMS\r\n}\r\n\r\nfunction createDictLayers(layersDict,item){\r\n    layersDict[item.name] = {};\r\n    layersDict[item.name].workspace = item.workspace;\r\n    layersDict[item.name].typology = item.typology;\r\n    layersDict[item.name].crs = item.crs;\r\n    layersDict[item.name].sensor = item.sensor;\r\n    layersDict[item.name].timeComplete = [item.timeComplete];\r\n    layersDict[item.name].timeFormatted = [item.timeFormatted];\r\n    layersDict[item.name].level = item.level;//Not always the same. TODO: double check in naming\r\n    layersDict[item.name].layer= [item.layer];\r\n    return layersDict;\r\n}\r\n\r\nfunction organizeLayers(layers,typologies,url) {\r\n    // Available styles for layer typology\r\n    let tp = Object.keys(typologies)\r\n    // Create the dictionary for the groups of layers\r\n    let layers_dict = {}\r\n    layers_dict.static = {}\r\n    layers_dict.time = {}\r\n    layers_dict.basemap = {}\r\n    // Organize the layers in the dictionary\r\n    layers.forEach(element => {\r\n    let item = {}\r\n    let arr = element.Name.split(':')\r\n    // Extract info from name.\r\n    // TODO: add exceptions for the irregular name formatting\r\n    item.workspace = arr[0]\r\n    item.name = arr[1].split('_').slice(0,3).join('_');\r\n    // item.name = arr[1].split('_').slice(0,2).join('_');//Remove the CRS from the name\r\n    item.sensor = arr[1].split('_')[0]\r\n    item.typology = arr[1].split('_')[1]\r\n    item.crs = arr[1].split('_')[2]\r\n    if (arr[1].split('_')[3]!=undefined) {\r\n        item.timeComplete = arr[1].split('_')[3];\r\n        let t = arr[1].split('_')[3].split('T')[0]\r\n        item.timeFormatted = t.slice(0,4)+'-'+t.slice(4,6)+'-'+t.slice(6,8);\r\n    } else {\r\n        item.timeComplete = undefined\r\n        item.timeFormatted = undefined\r\n    }\r\n    item.level = arr[1].split('_')[4]\r\n    // Define style based on the layers typology\r\n    let styleValue = ''\r\n    if (tp.includes(item.typology)) {\r\n        styleValue = item.typology.toLowerCase()\r\n    }\r\n    item.layer = createTileWMS(element.Name,url,0.5,styleValue)       \r\n\r\n    // Assign the items into the corresponding category\r\n    if (item.timeComplete!=undefined){\r\n        if (item.name in layers_dict.time){\r\n            // Override layer opacity for time series display\r\n            item.layer = createTileWMS(element.Name,url,1,styleValue)\r\n            item.layer['title'] = 'time'\r\n            item.layer['date'] = item.timeFormatted\r\n            item.layer['name'] = item.name\r\n            if (item.name.split('_')[1]==\"LSWT\"){\r\n                item.layer['units'] = '[°C]'\r\n            } else if (item.name.split('_')[1]==\"CHL\"){\r\n                item.layer['units'] = '[mg/m3]'\r\n            } else if (item.name.split('_')[1]==\"TSM\"){\r\n                item.layer['units'] = '[g/m3]'\r\n            }\r\n            layers_dict.time[item.name].timeComplete.push(item.timeComplete);\r\n            layers_dict.time[item.name].timeFormatted.push(item.timeFormatted);\r\n            layers_dict.time[item.name].layer.push(item.layer);\r\n        }\r\n        else {\r\n            item.layer = createTileWMS(element.Name,url,1)\r\n            item.layer['title'] = 'time'\r\n            item.layer['name'] = item.name\r\n            item.layer['date'] = item.timeFormatted\r\n            if (item.name.split('_')[1]==\"LSWT\"){\r\n                item.layer['units'] = '[°C]'\r\n            } else if (item.name.split('_')[1]==\"CHL\"){\r\n                item.layer['units'] = '[mg/m3]'\r\n            } else if (item.name.split('_')[1]==\"TSM\"){\r\n                item.layer['units'] = '[g/m3]'\r\n            }\r\n            layers_dict.time = createDictLayers(layers_dict.time,item);\r\n        }\r\n    }\r\n    else \r\n        layers_dict.static = createDictLayers(layers_dict.static,item);\r\n    });\r\n    // Return the layers list\r\n    return layers_dict\r\n}\r\n\r\n//Temporal function to append the basemaps (add config to the settings file)\r\nfunction basemapLayers(organizedLayers){\r\n    let basemapLayers = {\r\n        osm:{\r\n            title:'osm',\r\n            layer:[new TileLayer({\r\n                source: new OSM(),\r\n                visible: true\r\n            })],\r\n        },\r\n        // watercolor:{\r\n        //     title:'watercolor',\r\n        //     source:'Stamen',\r\n        //     layer:[new TileLayer({\r\n        //             source: new Stamen({\r\n        //                 layer: 'watercolor',\r\n        //             }),\r\n        //             visible:false\r\n        //             })]\r\n        // },\r\n        terrain:{\r\n            title:'terrain',\r\n            source:'Stamen',\r\n            layer:[new TileLayer({\r\n                    source: new Stamen({\r\n                        layer: 'terrain',\r\n                    }),\r\n                    visible:false\r\n                    })]\r\n        },\r\n        toner:{\r\n            title:'toner',\r\n            source:'Stamen',\r\n            layer:[new TileLayer({\r\n                    source: new Stamen({\r\n                        layer: 'toner',\r\n                    }),\r\n                    visible:false\r\n                    })]\r\n        }\r\n    }\r\n    organizedLayers.basemap = basemapLayers\r\n    return organizedLayers\r\n}\r\n\r\nfunction createLayerGroups(organizedLayers){\r\n    let groups = {}\r\n    let lBasemap = []\r\n    let lStatic = []\r\n    let layersGroupBasemap = []\r\n    let layersGroupStatic = []\r\n    let layersGroup = []\r\n    for (let item in organizedLayers){\r\n        if (item == \"time\") { //Group time layers\r\n            for (let layerDict in organizedLayers[item]){\r\n                let ll = organizedLayers[item][layerDict].layer\r\n                layersGroup.push(new LayerGroup({\r\n                    layers: ll,\r\n                    visible:true,\r\n                    opacity:0.8\r\n                }))\r\n            }        \r\n        } else {\r\n            for (let staticLayer in organizedLayers[item]) {\r\n                if (item == \"basemap\") {\r\n                    let t = organizedLayers[item][staticLayer].layer[0]\r\n                    t['title'] = 'basemap'\r\n                    lBasemap.push(t)\r\n                } else if (item == \"static\") {\r\n                    let t = organizedLayers[item][staticLayer].layer[0]\r\n                    t['title'] = 'static'\r\n                    lStatic.push(t)\r\n                }\r\n            }\r\n            layersGroupStatic[0] = new LayerGroup({\r\n                layers: lStatic,\r\n                visible:true,\r\n                opacity:1\r\n            })\r\n            layersGroupBasemap[0] = new LayerGroup({\r\n                layers: lBasemap,\r\n                visible:true,\r\n                opacity:1\r\n            })\r\n\r\n        }\r\n    }\r\n    groups['basemap'] = layersGroupBasemap\r\n    groups['static'] = layersGroupStatic\r\n    groups['time'] = layersGroup\r\n    return groups //[basemaps,static,time]\r\n}\r\n\r\nfunction plotData(arr_data) {\r\n    // Remove previous plot\r\n    var div = document.querySelector('.metric-chart');\r\n    try {\r\n        div.remove()\r\n    } catch (error) {\r\n        // console.warn('no chart');\r\n        // expected output: ReferenceError: nonExistentFunction is not defined\r\n        // Note - error messages will vary depending on browser\r\n    }\r\n    // Resolve requests and print the plot\r\n    Promise.all(arr_data['values']).then((values) => {\r\n        tsPlot(values,arr_data['typology'])\r\n    });\r\n}\r\n\r\nexport {\r\n    getLayersWMS,\r\n    organizeLayers,\r\n    createTileWMS,\r\n    basemapLayers,\r\n    createLayerGroups,\r\n    plotData\r\n}","\nexport default (sfc, props) => {\n  const target = sfc.__vccOpts || sfc;\n  for (const [key, val] of props) {\n    target[key] = val;\n  }\n  return target;\n}\n","<template>\r\n        <div id=\"layerPanel\" class=\"layer-panel ol-unselectable ol-control active\">\r\n            <div class=\"panel-title\">{{child_msg}}</div>\r\n            <h6 class=\"static-layers-title\"><i class=\"bi bi-arrow-right\"></i>Static Layers</h6>\r\n            <div class=\"static-layers active\" id=\"staticLayers\">\r\n                <div class=\"static-layer layer-list\" v-for=\"(layer,key,index) in layer_list.static\" :key=\"layer.static\">\r\n                    <div class=\"layer-items\">\r\n                        <div v-bind:class=\"'chckbx-layer layer-static-'+index\">\r\n                            <input  type=\"checkbox\"\r\n                                    title=\"set visible\"\r\n                                    name=\"\" \r\n                                    id=\"\"\r\n                                    v-bind:class=\"'layer-static-'+index\"\r\n                                    v-on:change=\"setLayerVisible($event,1,index,'static',{key})\">\r\n                        </div>\r\n                        <div class=\"title-layer\"><p v-bind:title=\"key\">{{key}}</p></div>\r\n                        <!-- <div class=\"dwnld-layer\"><i class=\"bi bi-box-arrow-down\"></i></div> -->\r\n                        <div    class=\"info-layer\"\r\n                                v-on:click=\"setLayerMetadata('static',{key})\"><i class=\"bi bi-info-square\"></i>\r\n                        </div>\r\n                        <div  class=\"opct-layer\"><i class=\"bi bi-brightness-high\"></i></div>\r\n                        <div class=\"opct-range-layer\">\r\n                            <input  type=\"range\" \r\n                                    name=\"\" \r\n                                    id=\"\"\r\n                                    min=\"0\"\r\n                                    max=\"1\"\r\n                                    step=\"0.01\"\r\n                                    value=\"0.8\"\r\n                                    v-on:change=\"setLayerOpacity($event,1,index)\">\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n            <h6 class=\"time-series-layers-title\"><i class=\"bi bi-arrow-right\"></i>Time Series Layers</h6>\r\n            <div class=\"time-series-layers active\" id=\"timeSeriesLayers\">\r\n                <div class=\"time-series-layer layer-list\"  v-for=\"(layer, key, index) in layer_list.time\" :key=\"layer.time\">\r\n                    <div class=\"layer-items\">\r\n                        <div v-bind:class=\"'chckbx-layer'+index\">\r\n                            <input  type=\"checkbox\"\r\n                                    title=\"set visible\"\r\n                                    name=\"\" \r\n                                    id=\"\"\r\n                                    v-bind:class=\"'layer-timeSeries-'+index\"\r\n                                    v-on:change=\"setLayerVisible($event,2,index,'time',{key})\">\r\n                        </div>\r\n                        <div class=\"title-layer\"><p v-bind:title=\"key\">{{key}}</p></div>\r\n                        <!-- <div class=\"dwnld-layer\"><i class=\"bi bi-box-arrow-down\"></i></div> -->\r\n                        <div    class=\"info-layer\"\r\n                                v-on:click=\"setLayerMetadata('time',{key})\"\r\n                                ><i class=\"bi bi-info-square\"></i>\r\n                        </div>\r\n                        <div  class=\"opct-layer\"><i class=\"bi bi-brightness-high\"></i></div>\r\n                        <div class=\"opct-range-layer\">\r\n                            <input type=\"range\" \r\n                                    name=\"\" \r\n                                    id=\"\"\r\n                                    min=\"0\"\r\n                                    max=\"1\"\r\n                                    step=\"0.01\"\r\n                                    value=\"0.8\"\r\n                                    v-on:change=\"setLayerOpacity($event,2,index)\">\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n    name: 'Layer',\r\n\tprops:{\r\n\t\tchild_msg: {\r\n\t\t\ttype: String,\r\n\t\t\tdefault: 'Layer Panel',\r\n\t\t},\r\n        layer_list: {\r\n            type: Object,\r\n        }\r\n\t},\r\n    data () {\r\n        return{\r\n        }\r\n    },\r\n    methods: {\r\n        setLayerVisible(evt,nGroup,index,layerType, layerName) {\r\n            this.$emit('setLayerVisible', {nGroup, index})\r\n            if (evt.target.checked){\r\n                this.setLayerMetadata(layerType, layerName)\r\n            }\r\n        },\r\n        setLayerOpacity(evt, nGroup,index) {\r\n            let opacity = evt.target.value;\r\n            this.$emit('setLayerOpacity', {opacity, nGroup,index})\r\n        },\r\n        setLayerMetadata(layerType, layerName) {\r\n            this.$emit('setLayerMetadata', {layerType, layerName})\r\n        }\r\n    }\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n@import \"@/assets/sass/style.scss\";\r\n\r\n.layer-panel {\r\n    position: absolute;\r\n    // display:none;\r\n    top: 0.5em;\r\n    left: 2.5em;\r\n    width: 30vw;\r\n    height: auto;\r\n    padding:2px;\r\n    max-height: 50vh;\r\n    overflow-x: hidden;\r\n    overflow-y: auto;\r\n\r\n    h6{\r\n        margin:0;\r\n        font-size: 16px;\r\n    }\r\n}\r\n\r\n.layer-list{\r\n    background: rgba($tertiary-bg-color,0.5)!important;\r\n}\r\n\r\n.layer-items{\r\n    display: inline-flex;\r\n    vertical-align: middle;\r\n    width:98%;\r\n    background: rgba($primary-bg-color,0.5);\r\n    padding: 4px;\r\n    border-radius: 4px;\r\n\r\n    ul{\r\n        list-style: none;\r\n        padding: 0;\r\n        margin:0;\r\n    }\r\n\r\n    .chckbx-layer{\r\n        width: 5%;\r\n    }\r\n\r\n    .title-layer{\r\n        width:35%;\r\n        p{\r\n            text-overflow: ellipsis;\r\n            overflow: hidden;\r\n            white-space: nowrap;\r\n        }\r\n    }\r\n\r\n    .dwnld-layer{\r\n        width: 5%;\r\n    }\r\n\r\n    .info-layer{\r\n        width: 5%;\r\n    }\r\n\r\n    .opct-layer{\r\n        width: 5%;\r\n    }\r\n\r\n    .opct-range-layer{\r\n        width: 35%;\r\n    }\r\n\r\n    p{\r\n        margin: 0;\r\n    }\r\n\r\n    input[type=range]{\r\n        padding: 0;\r\n        margin: 0;\r\n        width: 100%;\r\n    }\r\n\r\n    div{\r\n        padding: 4px 4px 4px 4px;\r\n    }\r\n\r\n}\r\n</style>","<template>\r\n        <div id=\"metadataPanel\" class=\"metadata-panel ol-unselectable ol-control\">\r\n            <div class=\"panel-title\">{{child_msg}}</div> \r\n            <div class=\"meta-title\">\r\n                <h6>{{title}}</h6>\r\n            </div>\r\n            <div class=\"meta-abstract\"><!--<strong>Abstract:</strong>-->{{abstract}}</div>\r\n            <div class=\"meta-info\"> \r\n                <div class=\"meta-details\">\r\n                    <div class=\"meta-details-typology\"><strong>Typology:</strong>{{typology}}</div>\r\n                    <div class=\"meta-details-units\"><strong>Units:</strong> [{{units}}]</div>\r\n                    <div class=\"meta-details-crs\"><strong>CRS:</strong>{{crs}}</div>\r\n                    <div class=\"meta-details-tstart\"><strong>Time Start:</strong><br>{{to}}</div>\r\n                    <div class=\"meta-details-tend\"><strong>Time end:</strong><br>{{tf}}</div>\r\n                </div>\r\n                <div class=\"meta-legend\">\r\n                    <div><strong>Legend:</strong></div>\r\n                    <div class=\"meta-legend-image\">\r\n                        <img :src=\"legend\" alt=\"\">\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n    name: 'Layer',\r\n\tprops:{\r\n\t\tchild_msg: {\r\n\t\t\ttype: String,\r\n            required:true,\r\n\t\t\tdefault: 'Metadata Panel',\r\n\t\t},\r\n        title: {\r\n\t\t\ttype: String,\r\n            required:true,\r\n\t\t\tdefault: 'Title',\r\n\t\t},\r\n        abstract: {\r\n\t\t\ttype: String,\r\n            required:true,\r\n\t\t\tdefault: 'Select a layer',\r\n\t\t},\r\n        typology: {\r\n\t\t\ttype: String,\r\n            required:true,\r\n\t\t\tdefault: 'N/A',\r\n\t\t},\r\n        units: {\r\n\t\t\ttype: String,\r\n            required:true,\r\n\t\t\tdefault: 'N/A',\r\n        },\r\n        crs: {\r\n\t\t\ttype: String,\r\n            required:true,\r\n\t\t\tdefault: 'N/A',\r\n\t\t},\r\n        to: {\r\n\t\t\ttype: String,\r\n            required:true,\r\n\t\t\tdefault: 'N/A',\r\n\t\t},\r\n        tf: {\r\n\t\t\ttype: String,\r\n            required:true,\r\n\t\t\tdefault: 'N/A',\r\n\t\t},\r\n        legend: {\r\n\t\t\ttype: String,\r\n            required:true,\r\n\t\t\tdefault: 'N/A',\r\n\t\t},\r\n\t},\r\n    data () {\r\n        return {\r\n        }\r\n    }\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n@import \"@/assets/sass/style.scss\";\r\n\r\n.metadata-panel {\r\n    position: absolute;\r\n    display:none;\r\n    bottom: 5.5em;\r\n    right: 0.5em;\r\n    width: 40vw;\r\n    height: 40vh;\r\n    background: rgba($primary-bg-color,0.5)!important;\r\n\r\n    div{\r\n        padding:0;\r\n        margin:0;\r\n    }\r\n\r\n    h6,p{\r\n        font-size: 14px;\r\n        padding:0;\r\n        margin:0;        \r\n    }\r\n}\r\n\r\n.panel-title{\r\n    width: 100%;\r\n    text-align: center;\r\n}\r\n\r\n.meta-title{\r\n    width: 100%;\r\n    text-align: center;\r\n}\r\n\r\n.meta-abstract{\r\n    width: 100%;\r\n    height: 40%;\r\n    background: rgba($tertiary-bg-color,0.5);\r\n    overflow-y: auto;\r\n}\r\n\r\n.meta-info{\r\n    display: inline-flex;\r\n    width: 100%;\r\n    height: 45%;\r\n    border-radius: 4px;\r\n    overflow-y: auto;\r\n}\r\n\r\n.meta-details{\r\n    width: 50%;\r\n    height:30vh;\r\n    background: rgba($tertiary-bg-color,0.5);\r\n}\r\n\r\n.meta-legend{\r\n    position: relative;\r\n    width: 50%;\r\n    height:30vh;\r\n    background: rgba($tertiary-bg-color,0.5);  \r\n    overflow-y: auto;\r\n\r\n    img{\r\n        width: 12em;\r\n    }\r\n\r\n    &-image{\r\n        display:flex;\r\n        justify-content: center;\r\n    }\r\n}\r\n</style>","<template>\r\n        <div id=\"timePanel\" class=\"time-panel ol-unselectable ol-control\">\r\n            <div class=\"panel-title\">{{child_msg}}</div>\r\n            <div class=\"time-container\">\r\n                <div class=\"time-header\"><strong>{{title}}</strong></div>\r\n                <div class=\"time-controls\">\r\n                    <div class=\"time-controls-dates\">\r\n                        <select name=\"\" id=\"dropdownDate\" @change=\"updateLayerDropdown($event)\">\r\n                            <option v-for=\"(item,index) in datesList\" \r\n                                        :value=\"index\" \r\n                                        :selected=\"datesListLength\"\r\n                                        :key=\"index\">{{datesList[index]}}</option>\r\n                        </select>\r\n                    </div>\r\n                    <div class=\"time-slider\">\r\n                        <input  type=\"range\"\r\n                                name = \"\"\r\n                                id = \"sliderDate\"\r\n                                min = \"0\"\r\n                                v-bind:max=\"datesListLength-1\"\r\n                                v-bind:value=\"currentDateIndex\"\r\n                                step = 1\r\n                                @change=\"updateLayerSlider($event)\">\r\n                    </div>\r\n                    <div id=\"time-controls-backward\" class=\"time-controls_item ol-unselectable ol-control\">\r\n                        <button class=\"time-panel-control-button\" @click=\"stepBackwards\"><i class=\"bi bi-skip-backward-circle\"></i></button>\r\n                    </div>  \r\n                    <!-- <div id=\"time-controls-play\" class=\"time-controls_item ol-unselectable ol-control\">\r\n                        <div><button class=\"time-panel-control-button\" @click=\"printText\"><i class=\"bi bi-play-circle\"></i></button></div>\r\n                        <div><button><i class=\"bi bi-pause-circle\"></i></button></div>\r\n                    </div>  -->\r\n                    <div id=\"time-controls-forward\" class=\"time-control\r\n                    s_item ol-unselectable ol-control\">\r\n                        <button class=\"time-panel-control-button\" @click=\"stepForwards\"><i class=\"bi bi-skip-forward-circle\"></i></button>\r\n                    </div>\r\n                </div>                \r\n            </div>\r\n\r\n        </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n    name: 'Time',\r\n\tprops:{\r\n\t\tchild_msg: {\r\n\t\t\ttype: String,\r\n\t\t\tdefault: 'Time Panel',\r\n\t\t},\r\n        title: {\r\n            type: String,\r\n            required: true,\r\n            default:'Select Layer'\r\n        },\r\n        datesList: {\r\n            type: Object,\r\n            required: true,\r\n            default:() => {return {'0':'Select TS'}}\r\n        },\r\n        datesListLength: {\r\n            type: String,\r\n            required: true,\r\n        },\r\n        currentDate: {\r\n            type: String,\r\n            required: true,\r\n        },\r\n        currentDateIndex: {\r\n            type: Number,\r\n            required: true,\r\n        },\r\n        currentGroup: {\r\n            type: Number,\r\n            required: true,\r\n        },\r\n        isLayerActive: {\r\n            type: Boolean,\r\n            required: true,\r\n        },\r\n\t},\r\n    data () {\r\n        return {\r\n        }\r\n    },\r\n    methods:{\r\n        updateLayerSlider(evt) {\r\n            if (this.isLayerActive) {\r\n                let newDate = evt.target.value;\r\n                let emitDate = parseInt(newDate);\r\n                let nGroup = this.currentGroup + 2;\r\n                let dropdown = document.getElementById('dropdownDate')\r\n                dropdown.selectedIndex = newDate;\r\n                this.cDate = this.datesList[newDate];\r\n                this.cDateIndex = newDate;\r\n                this.$emit('updateLayerSlider', {nGroup, emitDate})\r\n            }\r\n        },\r\n        updateLayerDropdown(evt) {\r\n            if (this.isLayerActive) {\r\n                let newDate = evt.target.value;\r\n                let emitDate = parseInt(newDate);\r\n                let nGroup = this.currentGroup + 2;\r\n                let slider = document.getElementById('sliderDate')\r\n                slider.value = newDate;\r\n                this.cDate = this.datesList[newDate];\r\n                this.cDateIndex = newDate;\r\n                this.$emit('updateLayerDropdown', {nGroup, emitDate})  \r\n            }\r\n        },\r\n        stepBackwards() {\r\n            let to = document.getElementById('sliderDate').value\r\n            let emitDate = to - 1\r\n            let tf = to - 1\r\n            let nGroup = this.currentGroup + 2;\r\n            if (this.isLayerActive==true){\r\n                if (to-1>=0){\r\n                    this.cDate = this.datesList[tf];\r\n                    this.cDateIndex = tf;\r\n                    document.getElementById('dropdownDate').selectedIndex = tf\r\n                    document.getElementById('sliderDate').value = tf\r\n                    this.$emit('updateLayerDropdown', {nGroup, emitDate})\r\n                } else {\r\n                    alert(\"There are no previous maps for the current layer\")\r\n                }\r\n            }\r\n        },\r\n        stepForwards() {\r\n            let to = document.getElementById('dropdownDate').value\r\n            let emitDate = Number(to) + 1\r\n            let tf = Number(to) + 1\r\n            let nGroup = this.currentGroup + 2;\r\n            if (this.isLayerActive == true) {\r\n                if (Number(to)+1<=this.datesListLength-1){\r\n                    this.cDate = this.datesList[tf];\r\n                    this.cDateIndex = tf;\r\n                    document.getElementById('dropdownDate').selectedIndex = tf\r\n                    document.getElementById('sliderDate').value = tf\r\n                    this.$emit('updateLayerDropdown', {nGroup, emitDate})\r\n                } else {\r\n                    alert(\"There are no later maps for the current layer\")\r\n                }\r\n            }\r\n        },\r\n    },\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n@import \"@/assets/sass/style.scss\";\r\n\r\n.time-panel {\r\n    position: absolute;\r\n    display:none;\r\n    top: 2.5em;\r\n    right: 0.5em;\r\n    width: 25vw;\r\n    background: rgba($tertiary-bg-color,0.5);\r\n    text-align: center;\r\n\r\n    p{\r\n        padding:0;\r\n        margin:0;\r\n    }\r\n}\r\n\r\n.time-controls{\r\n    display: inline-flex;\r\n\r\n    div{\r\n        position: relative;\r\n        display: inline-block;\r\n    }\r\n\r\n    input[type=range]{\r\n        padding: 0;\r\n        margin: 0;\r\n        width: 95%;\r\n    }\r\n    \r\n    &_item{\r\n        display:inline-block;\r\n    }\r\n}\r\n\r\n.time-container{\r\n    background: rgba($primary-bg-color,0.5);\r\n  }\r\n</style>","export default \"__VITE_ASSET__d6d13acb__\"","export default \"__VITE_ASSET__d843a7bb__\"","export default \"__VITE_ASSET__8d0c5f2f__\"","export default \"__VITE_ASSET__19bbfbf8__\"","export default \"data:image/png;base64,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\"","<template>\r\n    <div id=\"basemapPanel\" class=\"basemap-panel ol-unselectable ol-control\">\r\n        <div class=\"panel-title\">{{child_msg}}</div>\r\n\t\t<div class=\"basemap-container\">\r\n\t\t\t<div v-for=\"(basemap,index) in data\" :key=\"basemap.layer\"\r\n\t\t\t\tclass=\"basemap-container_item\">\r\n\t\t\t\t<div>\r\n\t\t\t\t\t<input type=\"radio\" \r\n\t\t\t\t\t\t:name=\"'basemap-radio'\"\r\n\t\t\t\t\t\t:id=\"basemap.layer+'-option'\"\r\n\t\t\t\t\t\t:class=\"'basemap-option'\"\r\n\t\t\t\t\t\t:checked=\"basemap.active\"\r\n\t\t\t\t\t\tv-on:change=\"setLayerVisible(0,index)\">\r\n\t\t\t\t\t<p>{{basemap.layer}}</p>\r\n\t\t\t\t</div>\r\n\t\t\t\t<img :src=\"getImage(basemap.layer)\" alt=\"\">\r\n\t\t\t</div>\r\n\t\t</div>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\n// Vite build does not recognize dynamic paths from the vue template. It is required to do it manually.\r\nimport osm from 'img/basemap/osm.png'\r\nimport terrain from 'img/basemap/terrain.png'\r\nimport watercolor from 'img/basemap/watercolor.png'\r\nimport toner from 'img/basemap/toner.png'\r\nimport none from 'img/basemap/none.png'\r\n\r\n\r\nexport default {\r\n    name: 'Basemap',\r\n\tprops:{\r\n\t\tchild_msg: {\r\n\t\t\ttype: String,\r\n\t\t\tdefault: 'Basemap Panel',\r\n\t\t},\r\n\t\tdata: {\r\n\t\t\ttype: Array,\t\r\n\t\t},\r\n\t\tlayer_list: {\r\n\t\t\ttype: Object,\r\n\t\t\trequire: true,\r\n\t\t}\r\n\r\n\t},\r\n    data () {\r\n      return {\r\n      }\r\n    },\r\n\tmethods: {\r\n\t\tgetImage(name) {\r\n\t\t\tif (name == \"osm\") {\r\n\t\t\t\treturn osm\r\n\t\t\t} else if (name == \"terrain\") {\r\n\t\t\t\treturn terrain\r\n\t\t\t} else if (name==\"watercolor\") {\r\n\t\t\t\treturn watercolor\r\n\t\t\t} else if (name==\"toner\") {\r\n\t\t\t\treturn toner\r\n\t\t\t} else if (name==\"none\") {\r\n\t\t\t\treturn none\r\n\t\t\t}\r\n\t\t},\r\n\t\tsetLayerVisible(nGroup,index) {\r\n            this.$emit('setLayerVisible', {nGroup, index})\r\n        },\r\n\t}\r\n}\r\n\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n.basemap-panel {\r\n    position: absolute;\r\n    display:none;\r\n    bottom: 2.25em;\r\n    left: 2.5em;\r\n    width: auto;\r\n    text-align: center;\r\n        \r\n    p{\r\n        padding: 0;\r\n        margin: 0;\r\n    }\r\n\r\n}\r\n\r\n.basemap-container{\r\n    position: relative;\r\n\r\n    &_item{\r\n        padding: 0px 1px 0px 1px;\r\n        display: inline-block;\r\n        width: 15vw;\r\n        \r\n        div{\r\n            position: relative;\r\n            display: inline-flex;\r\n            background: rgba(white,0.5);\r\n            width: 100%;\r\n            z-index:1;\r\n        }\r\n        \r\n        img{\r\n            position: relative;\r\n            top:-20px;\r\n            width: 100%;\r\n        }\r\n    }\r\n}\r\n</style>","<template>\r\n        <div id=\"plotPanel\" class=\"plot-panel ol-unselectable ol-control\">\r\n            <div class=\"panel-title\">{{child_msg}}</div> \r\n            <div id=\"metric-modal\"></div>\r\n        </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n    name: 'Plot',\r\n\tprops:{\r\n\t\tchild_msg: {\r\n\t\t\ttype: String,\r\n\t\t\tdefault: 'Plot Panel',\r\n\t\t}\r\n\t},\r\n    data () {\r\n        return {\r\n        }\r\n    }\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n@import \"@/assets/sass/style.scss\";\r\n\r\n.plot-panel {\r\n    position: absolute;\r\n    display:none;\r\n    bottom: 0.5em;\r\n    left: 10em;\r\n    width: 700px;\r\n    height: 425px;\r\n}\r\n\r\n#plotPanel{\r\n    padding: 5px!important;\r\n    margin: 0!important;\r\n}\r\n\r\n.svg-container {\r\n    display: inline-block;\r\n    position: relative;\r\n    width: 100%;\r\n    vertical-align: top;\r\n    overflow: hidden;\r\n}\r\n.svg-content {\r\n    display: inline-block;\r\n    position: absolute;\r\n    top: 0;\r\n    left: 0;\r\n}\r\n</style>","export default \"__VITE_ASSET__2868d295__\"","export default \"__VITE_ASSET__717691e9__\"","export default \"__VITE_ASSET__3619b717__\"","export default \"__VITE_ASSET__8b531bbe__\"","export default \"__VITE_ASSET__bb052726__\"","export default \"__VITE_ASSET__e7355188__\"","export default \"__VITE_ASSET__da17e8f2__\"","export default \"__VITE_ASSET__0ab5e9a0__\"","export default \"__VITE_ASSET__2f678a85__\"","<template>\r\n    <div class=\"carousel-container\">\r\n        <slot></slot>\r\n        <button class=\"prev\" @click=\"prev\"><i class=\"bi bi-caret-left-fill\"></i></button>\r\n        <button class=\"next\" @click=\"next\"><i class=\"bi bi-caret-right-fill\"></i></button>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n    data () {\r\n        return{\r\n\r\n        }\r\n    },\r\n    methods: {\r\n        prev () {\r\n            this.$emit('prev')\r\n        },\r\n        next() {\r\n            this.$emit('next')\r\n        },\r\n    }\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n    .carousel-container{\r\n        position: relative;\r\n        width:100%;\r\n        height:100%;\r\n        overflow:hidden;\r\n    }\r\n    button{\r\n        position: absolute;\r\n        width: 50px;\r\n        height: 40px;\r\n        top: calc(50% - 10px);\r\n\r\n        &.prev{\r\n            left:2px;\r\n        }\r\n\r\n        &.next{\r\n            right:2px;\r\n        }\r\n    }\r\n</style>","<template>\r\n    <transition :name=\"direction\">\r\n        <div v-show=\"visibleSlide === index\" class=\"carousel-slide\">\r\n        <slot></slot>\r\n            </div>\r\n    </transition>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n    props:['visibleSlide','index','direction'],\r\n    data () {\r\n        return{\r\n\r\n        }\r\n    }\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n    .carousel-slide {\r\n        position: absolute;\r\n        top: 0;\r\n        left: 0;\r\n        right: 0;\r\n        bottom: 0;\r\n    }\r\n    // Animation slide left\r\n    .left-enter-active {\r\n        animation: leftInAnimation 0.4s ease-in-out;\r\n    }\r\n    .left-leave-active {\r\n        animation: leftOutAnimation 0.4s ease-in-out;\r\n    }\r\n    @keyframes leftInAnimation {\r\n        from { transform: translateX(100%);}\r\n        to { transform: translateX(0);}\r\n    }\r\n    @keyframes leftOutAnimation {\r\n        from { transform: translateX(0);}\r\n        to { transform: translateX(-100%);}\r\n    }\r\n    // Animation slide right\r\n    .right-enter-active {\r\n        animation: rightInAnimation 0.4s ease-in-out;\r\n    }\r\n    .right-leave-active {\r\n        animation: rightOutAnimation 0.4s ease-in-out;\r\n    }\r\n    @keyframes rightInAnimation {\r\n        from { transform: translateX(-100%);}\r\n        to { transform: translateX(0);}\r\n    }\r\n    @keyframes rightOutAnimation {\r\n        from { transform: translateX(0);}\r\n        to { transform: translateX(100%);}\r\n    }\r\n</style>","<template>\r\n        <div id=\"slidePanel\" class=\"slide-panel ol-unselectable ol-control\" style=\"display:none\">\r\n            <div class=\"panel-title\">{{child_msg}}</div>\r\n            <div class=\"slidepanel-show\">\r\n                <carousel-container\r\n                    @prev=\"prev\"\r\n                    @next=\"next\"\r\n                >\r\n                    <carousel-slide v-for=\"(slide,index) in settings.slides\"\r\n                        :key=\"slide\"\r\n                        :index=\"index\"\r\n                        :visibleSlide=\"visibleSlide\"\r\n                        :direction=\"direction\"\r\n                        >\r\n                        <div class=\"slide-title\">{{slide.title}}</div>\r\n                        <div class=\"slide-description\">{{slide.description}}</div>\r\n                        <div class=\"slide-illustration\">\r\n                            <div class=\"slide-image\">\r\n                                <img :src=\"getImage(slide.src)\" :alt=\"index\">\r\n                            </div>\r\n                            <div class=\"slide-details\">\r\n                                {{slide.details}}\r\n                            </div>\r\n                        </div>\r\n                        \r\n                    </carousel-slide>\r\n                </carousel-container>\r\n            </div>\r\n            <div class=\"slide-current\"></div>\r\n        </div>\r\n</template>\r\n\r\n<script>\r\n// Import the images\r\nimport i1 from 'img/slides/i1.png'\r\nimport i2 from 'img/slides/i2.png'\r\nimport i3 from 'img/slides/i3.png'\r\nimport i4 from 'img/slides/i4.png'\r\nimport i5 from 'img/slides/i5.png'\r\nimport i6 from 'img/slides/i6.png'\r\nimport i7 from 'img/slides/i7.png'\r\nimport i8 from 'img/slides/i8.png'\r\nimport i9 from 'img/slides/i9.png'\r\n\r\n// Import slide-show components\r\nimport CarouselContainer from './slideShow/CarouselContainer.vue'\r\nimport CarouselSlide from './slideShow/CarouselSlide.vue'\r\n\r\nexport default {\r\n    name: 'Slide',\r\n\tprops:{\r\n\t\tchild_msg: {\r\n\t\t\ttype: String,\r\n\t\t\tdefault: 'Slide Panel',\r\n\t\t},\r\n        settings: {\r\n            type: Object,\r\n        }\r\n\t},\r\n    data () {\r\n        return {\r\n            visibleSlide: 0,\r\n            direction: '',\r\n        }\r\n    },\r\n    computed: {\r\n        slidesLen() {\r\n            return this.settings.slides.length;\r\n        }\r\n    },\r\n    methods: {\r\n        prev () {\r\n            if(this.visibleSlide <= 0){\r\n                this.visibleSlide = this.slidesLen - 1;\r\n            } else {\r\n                this.visibleSlide--;\r\n            }\r\n            this.direction = 'right';\r\n        },\r\n        next () {\r\n            if(this.visibleSlide >= this.slidesLen - 1 ){\r\n                this.visibleSlide = 0;\r\n            } else {\r\n                this.visibleSlide++;\r\n            }\r\n            this.direction = 'left';\r\n        },\r\n        getImage(name) {\r\n\t\t\tif (name == \"i1.png\") {\r\n\t\t\t\treturn i1\r\n\t\t\t} else if (name==\"i2.png\") {\r\n\t\t\t\treturn i2\r\n\t\t\t} else if (name==\"i3.png\") {\r\n\t\t\t\treturn i3\r\n\t\t\t} else if (name==\"i4.png\") {\r\n\t\t\t\treturn i4\r\n\t\t\t} else if (name==\"i5.png\") {\r\n\t\t\t\treturn i5\r\n\t\t\t} else if (name==\"i6.png\") {\r\n\t\t\t\treturn i6\r\n\t\t\t} else if (name==\"i7.png\") {\r\n\t\t\t\treturn i7\r\n\t\t\t} else if (name==\"i8.png\") {\r\n\t\t\t\treturn i8\r\n\t\t\t} else if (name==\"i9.png\") {\r\n\t\t\t\treturn i9\r\n\t\t\t}\r\n\t\t}\r\n    },\r\n    mounted() {\r\n    },\r\n    components: { \r\n        CarouselContainer,\r\n        CarouselSlide,\r\n    },\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n@import \"@/assets/sass/style.scss\";\r\n\r\n.slide-panel{\r\n    display:inline-block;\r\n    justify-content: center;\r\n    position: absolute;\r\n    bottom: 25vh;\r\n    left: 30vw;\r\n    width: 40vw;\r\n    height: 55vh;\r\n    z-index: 1;\r\n    border:$border-rad;\r\n}\r\n\r\n.slide-title{\r\n    height: 10%;\r\n    width: 100%;\r\n    text-align: center;\r\n}\r\n\r\n.slide-description{\r\n    height: 15%;\r\n    width: 100%;\r\n    text-align: justify;\r\n    overflow:auto;\r\n}\r\n\r\n.slide-illustration{\r\n    display: inline-flex;\r\n    width: 100%;\r\n    height: 75%;\r\n\r\n    .slide-image {\r\n        text-align: center;\r\n        margin-left: 25px;\r\n        width: 60%;\r\n        height: 100%;\r\n        img {\r\n            width: 100%;\r\n            height:auto;\r\n        }\r\n    }\r\n    \r\n    .slide-details {\r\n        width: 40%;\r\n        height: 100%;\r\n        margin-right: 25px;\r\n        overflow:auto;\r\n\r\n    }\r\n}\r\n\r\n\r\n.slidepanel-show{\r\n    display:flex;\r\n    width: 100%;\r\n    height: 90%;\r\n}\r\n\r\n.slide-current{\r\n    width: 100%;\r\n    height: 10%;\r\n}\r\n</style>","<template>\r\n    <div id=\"popup\" class=\"ol-popup\">\r\n        <div id=\"popup-title\">{{title}}</div>\r\n            <a href=\"#\" id=\"popup-closer\" class=\"ol-popup-closer\"></a>\r\n        <div id=\"popup-info\">\r\n            <div id=\"popup-getinfo\">Value: {{pixelInfo}} {{pixelUnits}}</div>\r\n            <div id=\"popup-coordinate\">Coordinates: {{pixelCoordinate}}</div>\r\n        </div>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\n\r\nexport default {\r\n    setup() {\r\n    },\r\n    data: function() {\r\n        return{\r\n        }\r\n    },\r\n    props: {\r\n        map: {\r\n            type:Object,\r\n            required: true,\r\n        },\r\n        title: {\r\n            type: String,\r\n            required: true,\r\n            default:'Select layer'\r\n        },\r\n        evtCoordinate: {\r\n            type: String,\r\n            required: true,\r\n            default:'Select layer'\r\n        },\r\n        pixelCoordinate: {\r\n            type: String,\r\n            required: true,\r\n            default:'click-on map'\r\n        },\r\n        pixelInfo: {\r\n            type: String,\r\n            required: true,\r\n            default:'N/A'\r\n        },\r\n        pixelUnits: {\r\n            type: String,\r\n            required: true,\r\n            default:'N/A'\r\n        },\r\n    },\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n    @import \"@/assets/sass/style.scss\";\r\n\r\n    .ol-popup {\r\n        z-index: 1;\r\n        position: absolute;\r\n        background-color: rgba($secondary-bg-color,0.7);\r\n        box-shadow: 0 1px 4px rgba(0,0,0,0.2);\r\n        padding: 15px;\r\n        border-radius: 10px;\r\n        border: 1px solid #cccccc;\r\n        min-width: 280px;\r\n    }\r\n\r\n    #popup-title{\r\n        text-align: center;\r\n        font-weight: bold;\r\n    }\r\n\r\n    #popup-info{\r\n        padding: 4px;\r\n        background: rgba($tertiary-bg-color,0.7)\r\n    }\r\n\r\n    .ol-popup-closer {\r\n        text-decoration: none;\r\n        position: absolute;\r\n        top: 2px;\r\n        right: 8px;\r\n    }\r\n    .ol-popup-closer:after {\r\n        content: \"✖\";\r\n    }\r\n</style>","export default \"__VITE_ASSET__0a343d52__\"","export default \"__VITE_ASSET__f2fd6003__\"","export default \"__VITE_ASSET__fe179139__\"","<template>\r\n    <div>\r\n        <div id=\"map\" class=\"map\"></div>\r\n        <layerPanel \r\n            :child_msg=\"'Layer-Panel'\"\r\n            :layer_list=\"layer_list\"\r\n            @setLayerVisible=\"setLayerVisible\"\r\n            @setLayerOpacity=\"setLayerOpacity\"\r\n            @setLayerMetadata=\"setLayerMetadata\"\r\n        />\r\n        <metadataPanel \r\n            :child_msg=\"'Metadata-Panel'\"\r\n            :settings=\"settings\"\r\n            :title=\"title\"\r\n            :abstract=\"abstract\"\r\n            :to=\"to\"\r\n            :tf=\"tf\"\r\n            :typology=\"typology\"\r\n            :units=\"units\"\r\n            :crs=\"crs\"\r\n            :legend=\"legend\"\r\n        />\r\n        <timePanel \r\n            :child_msg=\"'Time-Panel'\"\r\n            :title=\"title\"\r\n            :datesList=\"datesList\"\r\n            :datesListLength=\"datesListLength\"\r\n            :currentDate=\"currentDate\"\r\n            :currentDateIndex=\"currentDateIndex\"\r\n            :currentGroup=\"currentGroup\"\r\n            :isLayerActive=\"isLayerActive\"\r\n            @updateLayerSlider=\"setLayerVisibleTS\"\r\n            @updateLayerDropdown=\"setLayerVisibleTS\"\r\n            @stepBackwards=\"setLayerVisibleTS\"\r\n            @stepForwards=\"setLayerVisibleTS\"\r\n        />\r\n        <basemapPanel \r\n            :child_msg=\"'Basemap-Panel'\"\r\n            :data=\"basemap_settings\"\r\n            :layer_list=\"layer_list\"\r\n            @setLayerVisible=\"setLayerVisible\"\r\n        />\r\n        <slidePanel \r\n            :child_msg=\"'Slide-Panel'\"\r\n            :settings=\"settings\"\r\n        />\r\n        <plotPanel :child_msg=\"'Plot-Panel'\"/>\r\n        <!-- TODO: set inputs pixelInfo, pixelUnits, pixelCoordinates; for now random values -->\r\n        <popUp\r\n            :map=\"map\"\r\n            :title=\"title\"\r\n            :evtCoordinate=\"'click-on map'\"\r\n            :pixelCoordinate=\"'select a pixel'\"\r\n            :pixelInfo=\"'click-on map'\"\r\n            :pixelUnits=\"'select a pixel'\"\r\n        />\r\n    </div>\r\n\r\n</template>\r\n\r\n<script>\r\n// Add Map\r\nimport {addMap} from '@/assets/js/map'\r\n// Add Controls to map\r\nimport {layerPanel,\r\n\t\tmetadataPanel,\r\n\t\ttimePanel,\r\n\t\tbasemapPanel,\r\n\t\tplotPanel,\r\n\t\tslidePanel,\r\n\t\tpopup} from 'js/panelCreate';\r\n// Organize layers\r\nimport {organizeLayers, basemapLayers, createLayerGroups, plotData} from '@/assets/js/requestLayers'\r\n// Components\r\nimport LayerPanel from './panels/LayerPanel.vue'\r\nimport MetadataPanel from './panels/MetadataPanel.vue'\r\nimport TimePanel from './panels/TimePanel.vue'\r\nimport BasemapPanel from './panels/BasemapPanel.vue'\r\nimport PlotPanel from './panels/PlotPanel.vue'\r\nimport SlidePanel from './panels/SlidePanel.vue'\r\nimport PopUp from './panels/PopUp.vue'\r\n//Import legend images\r\nimport chl_legend from 'img/legend/chl_legend.png'\r\nimport tsm_legend from 'img/legend/tsm_legend.png'\r\nimport lswt_legend from 'img/legend/lswt_legend.png'\r\n// Handle the request\r\nimport axios from \"axios\"\r\n// XML parser\r\nimport WMSCapabilities from 'ol/format/WMSCapabilities';\r\nconst parser = new WMSCapabilities();\r\n// OL import\r\nimport {toLonLat} from 'ol/proj';\r\nimport {toStringHDMS} from 'ol/coordinate';\r\nimport Overlay from 'ol/Overlay';\r\nimport ImageWMS from 'ol/source/ImageWMS';\r\n\r\nexport default {\r\n    name: \"WebGISContainer\",\r\n    data () {\r\n        return {\r\n            basemap_settings: this.settings.basemaps,\r\n            urlLayerInfo: this.settings.urlWMSLayerInfo,\r\n            layer_list: {},\r\n            layer_groups: {},\r\n            map: {},\r\n            title: \"Select a Layer\",\r\n            typology:\"N/A\",\r\n            abstract:\"N/A\",\r\n            to:\"N/A\",\r\n            tf:\"N/A\",\r\n            crs: \"N/A\",\r\n            units:\"N/A\",\r\n            legend:\"N/A\",\r\n            // Time Series Visualization Variables\r\n            datesList:{},\r\n            currentGroup:0,\r\n            currentDate:'',\r\n            currentDateIndex:0,\r\n            isLayerActive:false,\r\n            datesListLength:'',\r\n            noGetinfo:0,\r\n        }\r\n    },\r\n    props: {\r\n        settings: { \r\n            type: Object, \r\n            required: true,\r\n        },\r\n    },\r\n    components: {\r\n        layerPanel: LayerPanel,\r\n        metadataPanel: MetadataPanel,\r\n        timePanel: TimePanel,\r\n        basemapPanel: BasemapPanel,\r\n        plotPanel: PlotPanel,\r\n        slidePanel: SlidePanel,\r\n        popUp: PopUp,\r\n    },\r\n    methods: {\r\n        // TODO: refer to the current layer indexes values\r\n        setLayerVisible(value) {\r\n            let index = value.index;\r\n            let nGroup = value.nGroup;\r\n            let evtType = value.evtType;\r\n            // Static Layers Case\r\n            if (nGroup == 0) {\r\n                let basemaps = this.map.getLayers().array_[nGroup].values_.layers.array_\r\n                basemaps.forEach((basemap,i) => {\r\n                    if (index!=i) {\r\n                        basemap.setVisible(false)\r\n                    } else if (basemaps.length<index) {\r\n                        basemap.setVisible(false)\r\n                    } else {\r\n                        basemap.setVisible(true)\r\n                    }\r\n                });\r\n            } else if (nGroup == 1) {\r\n                let currentVisibility = this.map.getLayers().array_[nGroup].values_.layers.array_[index].getVisible()\r\n                this.map.getLayers().array_[nGroup].values_.layers.array_[index].setVisible(!currentVisibility)\r\n            } else {\r\n                let ll = this.map.getLayers().array_[nGroup+index]\r\n                let lll = ll.values_.layers.array_.length-1\r\n                // Search layer visibility of the collection\r\n                let layers_col = this.map.getLayers().array_[nGroup+index].values_.layers.array_\r\n                let layer_check = 0\r\n                layers_col.forEach((layer,i) => {\r\n                    let currentVisibilityLayer = this.map.getLayers().array_[nGroup+index].values_.layers.array_[i].getVisible();\r\n                    if (layer.getVisible()==true && i!=lll) {\r\n                        this.map.getLayers().array_[nGroup+index].values_.layers.array_[i].setVisible(!currentVisibilityLayer)\r\n                        layer_check++\r\n                        this.isLayerActive=layer.getVisible()\r\n                        return false\r\n                    } else if (layer_check==0 && i==lll ) { \r\n                        this.map.getLayers().array_[nGroup+index].values_.layers.array_[lll].setVisible(!currentVisibilityLayer)     \r\n                        this.currentDate = layer.date\r\n                        // Forward value to time panel to set the request visible only if the layer group is\r\n                        this.isLayerActive=layer.getVisible()\r\n                    }\r\n                });\r\n                // Visibility on/off only for the last layer of the group\r\n    \r\n            }\r\n        },\r\n        setLayerVisibleTS(value) {\r\n            let nGroup = value.nGroup;\r\n            let index = value.emitDate;\r\n            let getLayersGroup = this.map.getLayers().array_[nGroup].values_.layers.array_\r\n            getLayersGroup.forEach((element,i) => {\r\n                if (index==i){\r\n                    element.setVisible(true)\r\n                } else {\r\n                    element.setVisible(false)\r\n                }\r\n            });\r\n        },\r\n        setLayerOpacity(value){\r\n            let opacity = value.opacity;\r\n            let index = value.index;\r\n            let nGroup = value.nGroup;\r\n            // It is necessary to re-render the layer to display the changes in the map\r\n            if (nGroup <= 1) {\r\n                if (this.map.getLayers().array_[nGroup].values_.layers.array_[index].getVisible() == true) {\r\n                    this.map.getLayers().array_[nGroup].values_.layers.array_[index].setVisible(false)\r\n                    this.map.getLayers().array_[nGroup].values_.layers.array_[index].values_.opacity = opacity\r\n                    this.map.getLayers().array_[nGroup].values_.layers.array_[index].setVisible(true)\r\n                } else {\r\n                    this.map.getLayers().array_[nGroup].values_.layers.array_[index].values_.opacity = opacity\r\n                }\r\n            } else { \r\n                let ll = this.map.getLayers().array_[nGroup+index]\r\n                if (ll.getVisible()==true) {\r\n                    ll.setVisible(false)\r\n                    ll.values_.opacity=opacity;\r\n                    ll.setVisible(true)\r\n                } else {\r\n                    ll.values_.opacity=opacity;\r\n                }\r\n            }\r\n        },\r\n        setLayerMetadata(value){\r\n            let layerType = value.layerType;\r\n            let layerName = value.layerName.key;\r\n            let layer = this.layer_list[layerType][layerName]\r\n            this.title = layerName\r\n            // Retrieve layer characteristics \r\n            if (layerType == 'time'){\r\n                let tplg = layer.typology\r\n                let timeFormat = layer.timeFormatted\r\n                this.typology = tplg\r\n                this.abstract = this.settings.typology[tplg].abstract\r\n                this.units = this.settings.typology[tplg].units\r\n                this.crs = layer.crs\r\n                // Default legend from source folder\r\n                if (this.typology == 'CHL'){\r\n                    this.legend = chl_legend\r\n                } else if (this.typology == 'TSM') {\r\n                    this.legend = tsm_legend\r\n                } else {\r\n                    this.legend = lswt_legend\r\n                }\r\n\r\n                // Get Legend from wms server\r\n                // this.legend = layer.layer[0].values_.source.getLegendUrl();\r\n                \r\n                this.to = timeFormat[0]\r\n                this.tf = timeFormat[timeFormat.length-1]\r\n                // Initialize the variables for the time control\r\n                this.datesList = this.layer_list.time[layerName].timeFormatted\r\n                this.currentDate = this.datesList[Object.keys(this.datesList).length-1]\r\n                this.currentDateIndex = Object.keys(this.datesList).length\r\n                this.datesListLength = Object.keys(this.datesList).length\r\n                this.currentGroup = Object.keys(this.layer_list.time).indexOf(layerName)\r\n            }\r\n\r\n            $('.metadata-panel').addClass('active');\r\n            $('.metadata-panel').css('display','block');      \r\n            if (layerType=='time'){\r\n                $('.time-panel').addClass('active');\r\n                $('.time-panel').css('display','block');\r\n                $('.show-metadata').addClass('active');\r\n                $('.show-time').addClass('active');\r\n            }   \r\n        },\r\n        downloadData() {\r\n            // TODO: install CSW extension to GeoServer for allowing the download of datasets. For now, it is possible to download as georeferenced images using the WMS server.\r\n        },\r\n        \r\n    },\r\n    mounted() {\r\n        // Settings\r\n        this.basemap_settings = this.settings.basemaps\r\n        axios.get(this.settings.urlWMSget)\r\n            .then(response => {\r\n                // Parsing Get Capabilities\r\n                let capabilities = parser.read(response.data)\r\n                let layers = capabilities.Capability.Layer.Layer\r\n                let layers_dict = organizeLayers(layers,this.settings.typology,this.settings.urlWMS)\r\n                basemapLayers(layers_dict)\r\n                // TODO: merge dict functions\r\n                let layers_groups = createLayerGroups(layers_dict)\r\n                this.layer_list = layers_dict\r\n                this.layer_group = layers_groups\r\n                // No repetition check to layers groups\r\n                let layers_dict_reduced = {} \r\n                for (let [group,collection] of Object.entries(layers_dict['time'])) {\r\n                    let groupName = group.split('_').splice(0,2).join('_');\r\n                    if (groupName in Object.keys(layers_dict_reduced)) {\r\n                        \r\n                    } else {\r\n                        layers_dict_reduced[groupName] = collection\r\n                    }\r\n                    \r\n                }\r\n                this.layer_list['time'] = layers_dict_reduced\r\n                layers_dict_reduced = this.layer_list\r\n                let layers_groups_reduced = createLayerGroups(layers_dict_reduced)\r\n                return {layers_groups_reduced, layers_dict_reduced}\r\n            })\r\n            .then(response=> {\r\n                const layers_groups = response.layers_groups_reduced;\r\n                const layers_dict = response.layers_dict_reduced;\r\n                const map = addMap()\r\n                for (let key in layers_groups) {\r\n\t\t            for (let group in layers_groups[key]){;\r\n\t\t\t            map.addLayer(layers_groups[key][group]);\r\n\t\t            }\r\n\t            }\r\n                this.map = map\r\n                /* ADD POPUP OVERLAY */ \r\n\r\n                // Add popup overlay\r\n                const popupContainer = document.getElementById('popup');\r\n                const popupTitle = document.getElementById('popup-title');\r\n                const popupCoordinate = document.getElementById('popup-coordinate');\r\n                const popupPixelInfo = document.getElementById('popup-getinfo');\r\n                const popupCloser = document.getElementById('popup-closer');\r\n                const popupOverlay = new Overlay({\r\n                    element: popupContainer,\r\n                    autoPan: {\r\n                        animation: {\r\n                        duration: 250,\r\n                        },\r\n                    },\r\n                });\r\n                /**\r\n                 * Add a click handler to hide the popup.\r\n                 * @return {boolean} Don't follow the href.\r\n                 */\r\n                popupCloser.onclick = function () {\r\n                    popupOverlay.setPosition(undefined);\r\n                    popupCloser.blur();\r\n                return false;\r\n                };\r\n                // Add popup controller to map\r\n                map.addControl(popupOverlay)\r\n                const view = this.map.getView();\r\n                const viewResolution = /** @type {number} */ (view.getResolution());\r\n                map.on('singleclick', function (evt) {\r\n                    const coord = evt.coordinate;\r\n                    const hdms = toStringHDMS(toLonLat(coord));\r\n                    popupCoordinate.innerHTML = '<p>Coordinate: </p><code>' + hdms + '</code>';\r\n                    popupOverlay.setPosition(coord);\r\n                    const pixel = map.getEventPixel(evt.originalEvent);\r\n                    // Array for the request of data in time\r\n                    let temp_array = {'values':[],'typology':''}\r\n                    this.noGetinfo = 0;\r\n                    map.forEachLayerAtPixel(pixel, function (layer,rgba) {\r\n                        if(layer.title != \"basemap\"){\r\n                            var url = layer.values_.source.getFeatureInfoUrl(\r\n                                evt.coordinate,\r\n                                viewResolution,\r\n                                'EPSG:3857',\r\n                                {'INFO_FORMAT': 'application/json'}\r\n                            );\r\n                            var  url = \"https://www.webgis.eo.simile.polimi.it/api/getLayerInfo?\" + url.split('/')[url.split('/').length-1].split('?')[1]\r\n                            if (url) {\r\n                                const myRequest = new Request(url);\r\n                                fetch(myRequest)\r\n                                .then((response) => response.json())\r\n                                .then((html) => {\r\n                                    popupPixelInfo.innerHTML = '<p>Value: </p><code>' + html.data.features['0'].properties[\"GRAY_INDEX\"].toFixed(2) + ' ' + layer.units + '</code>'; \r\n                                    popupTitle.innerHTML = '<p>'+layer.name.split('_').splice(0,2).join('_')+':' +layer.date+'</p>';\r\n                                });\r\n\r\n                                // Implementing the requests for building the plot\r\n                                let layerName = layer.name.split('_').splice(0,2).join('_')\r\n                                let layerCRS = layer.name.split('_')[2]//Taking the first element matching the criteria; include a condition for the CRS\r\n                                let currentLayerList = layers_dict[layer.title][layerName].layer\r\n                                currentLayerList.forEach(layer => {\r\n                                    var asdf = layer.values_.source.getFeatureInfoUrl(\r\n                                        evt.coordinate,\r\n                                        viewResolution,\r\n                                        'EPSG:3857',\r\n                                        {'INFO_FORMAT': 'application/json'}\r\n                                    );\r\n                                    var  asdf = 'https://www.webgis.eo.simile.polimi.it/api/getLayerInfo?' + asdf.split('/')[asdf.split('/').length-1].split('?')[1]\r\n                                    let a = fetch(asdf)\r\n                                    .then((response) => response.json())\r\n                                    .then((html) => {\r\n                                        let c = html.data.features[0]                                        \r\n                                        if (c != undefined) {\r\n                                            let v = c.properties[\"GRAY_INDEX\"]\r\n                                            if (v != null && v > 0) {\r\n                                                let obs = {\r\n                                                    'month': layer.date.toString(),\r\n                                                    'count': Number(v.toFixed(2))\r\n                                                }\r\n                                                return obs\r\n                                            }\r\n                                        }\r\n                                    })\r\n                                    temp_array['values'].push(a)\r\n                                })\r\n                                temp_array['typology']=layers_dict[layer.title][layerName].typology;\r\n                                plotData(temp_array)\r\n                            }\r\n                            // Array of time series getFeature\r\n                        } else {\r\n                            popupPixelInfo.innerHTML = '<p>Value: </p><code>' + 'N/A' + '</code>'; \r\n                            popupTitle.innerHTML = 'Click on a layer';\r\n                        }\r\n                    });\r\n                });\r\n                // Cursor behaviour on hoover (active layers, NOT basemaps)\r\n                map.on('pointermove', function (evt) {\r\n                if (evt.dragging) {\r\n                    return;\r\n                }\r\n                    const pixel = map.getEventPixel(evt.originalEvent);\r\n                    const hit = map.forEachLayerAtPixel(pixel, function (layer,rgba) {\r\n                        if(layer.title != \"basemap\"){\r\n                            return true;\r\n                        }\r\n                });\r\n                    map.getTargetElement().style.cursor = hit ? 'pointer' : '';\r\n                });\r\n            })\r\n            .catch(err => console.log(\"No layers have been found in the site url\"))\r\n    }\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\">\r\n@import 'css/style.css';\r\n</style>","<template>\r\n  <WebGISContainer\r\n    :settings=\"settings\"\r\n  />\r\n</template>\r\n\r\n<script>\r\n// Import App components\r\nimport 'css/style.css'\r\nimport WebGISContainer from './components/WebGISContainer.vue'\r\n\r\n// Settings\r\nimport {settings} from '@/assets/js/settings'\r\n\r\nexport default {\r\n  name: 'App',\r\n  \tdata () {\r\n    \treturn {\r\n      \t\tsettings: settings,\r\n\t\t}\r\n\t},\r\n\tcomponents: {\r\n\t\tWebGISContainer,\r\n\t},\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n  img {\r\n    width: 5em;\r\n  }\r\n</style>","import { createApp } from 'vue'\r\nimport App from './App.vue'\r\n\r\ncreateApp(App).mount('#app')"],"names":["osm","defaultControls","_hoisted_1","_createElementBlock","_createElementVNode","_hoisted_3","_hoisted_12","_hoisted_15","_hoisted_2","_hoisted_4","_hoisted_14","_hoisted_10","_normalizeClass","_renderSlot","_hoisted_5","_createVNode"],"mappings":"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"}