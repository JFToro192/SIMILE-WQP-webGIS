import{C as _,O as j,a as q,T as w,M as z,d as K,S as R,V as U,W as Y,b as P,L as V,c as Z,o as p,e as m,f as g,t as u,g as n,F as B,r as I,p as L,h as C,n as N,i as H,j as k,w as T,k as ee,v as te,l as se,m as h,q as v,s as ie,u as ae,x as ne,y as re,z as le}from"./vendor.eedb9b49.js";const oe=function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))a(e);new MutationObserver(e=>{for(const r of e)if(r.type==="childList")for(const l of r.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&a(l)}).observe(document,{childList:!0,subtree:!0});function i(e){const r={};return e.integrity&&(r.integrity=e.integrity),e.referrerpolicy&&(r.referrerPolicy=e.referrerpolicy),e.crossorigin==="use-credentials"?r.credentials="include":e.crossorigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function a(e){if(e.ep)return;e.ep=!0;const r=i(e);fetch(e.href,r)}};oe();var ce="/assets/assev_simile.d3f83cf6.png";function W(){const t="."+this.element.classList[0],s="."+t.split("-")[1]+"-item",i=$(t);i.hasClass("active")?($(`${s}`).slice(0).hide(),i.removeClass("active")):($(`${s}`).slice(0).show(),i.addClass("active"))}function x(){const t="."+this.element.classList[0],s="."+t.split("-")[1]+"-panel",i=$(t),a=$(s);a.hasClass("active")?(a.hide(),i.removeClass("active"),a.removeClass("active")):(a.show(),i.addClass("active"),a.addClass("active"))}class de extends _{constructor(s){const i=s||{},a=document.createElement("button");a.innerHTML='<i class="bi bi-list"></i>';const e=document.createElement("div");e.className="show-burger ol-unselectable ol-control control-bar active",e.appendChild(a);super({element:e,target:i.target});e.addEventListener("click",W.bind(this),!1)}}class ue extends _{constructor(s){const i=s||{},a=document.createElement("button");a.innerHTML='<i class="bi bi-stack"></i>',a.title="layers panel";const e=document.createElement("div");e.className="show-layer ol-unselectable ol-control control-bar burger-item",e.appendChild(a);super({element:e,target:i.target});e.addEventListener("click",x.bind(this),!1)}}class pe extends _{constructor(s){const i=s||{},a=document.createElement("button");a.innerHTML='<i class="bi bi-info-square"></i>',a.title="metadata panel";const e=document.createElement("div");e.className="show-metadata ol-unselectable ol-control control-bar burger-item",e.appendChild(a);super({element:e,target:i.target});e.addEventListener("click",x.bind(this),!1)}}class me extends _{constructor(s){const i=s||{},a=document.createElement("button");a.innerHTML='<i class="bi bi-clock-history"></i>',a.title="time panel";const e=document.createElement("div");e.className="show-time ol-unselectable ol-control control-bar burger-item",e.appendChild(a);super({element:e,target:i.target});e.addEventListener("click",x.bind(this),!1)}}class _e extends _{constructor(s){const i=s||{},a=document.createElement("button");a.innerHTML='<i class="bi bi-map"></i>',a.title="basemaps";const e=document.createElement("div");e.className="show-basemap ol-unselectable ol-control control-bar burger-item",e.appendChild(a);super({element:e,target:i.target});e.addEventListener("click",x.bind(this),!1)}}class ge extends _{constructor(s){const i=s||{},a=document.createElement("button");a.innerHTML='<i class="bi bi-graph-up"></i>',a.title="plot time series";const e=document.createElement("div");e.className="show-plot ol-unselectable ol-control control-bar burger-item",e.appendChild(a);super({element:e,target:i.target});e.addEventListener("click",x.bind(this),!1)}}class ye extends _{constructor(s){const i=s||{},a=document.createElement("button");a.innerHTML='<i class="bi bi-file-earmark-easel"></i>',a.title="webgis guide";const e=document.createElement("div");e.className="show-slide ol-unselectable ol-control control-bar burger-item",e.appendChild(a);super({element:e,target:i.target});e.addEventListener("click",x.bind(this),!1)}}class he extends _{constructor(s){const i=s||{},a=document.createElement("ul"),e=document.createElement("li"),r=document.createElement("li"),l=document.createElement("li"),o=document.createElement("li"),d=document.createElement("li");e.innerHTML='<button><i class="bi bi-people"></i></button>',r.innerHTML='<button class="social-item" style="display:none;"><i class="bi bi-facebook"></i></button>',l.innerHTML='<button class="social-item" style="display:none;"><i class="bi bi-twitter"></i></button>',o.innerHTML='<button class="social-item" style="display:none;"><i class="bi bi-linkedin"></i></button>',d.innerHTML='<button class="social-item" style="display:none;"><i class="bi bi-instagram"></i></button>',e.title="social",r.title="facebook",l.title="twitter",o.title="linkedin",d.title="instagram";const c=document.createElement("div");c.className="show-social ol-unselectable ol-control control-bar burger-item",a.appendChild(e),a.appendChild(r),a.appendChild(l),a.appendChild(o),a.appendChild(d),c.appendChild(a);super({element:c,target:i.target});e.addEventListener("click",W.bind(this),!1)}}class be extends _{constructor(s){const i=s||{},a=document.createElement("ul"),e=document.createElement("li"),r=document.createElement("li"),l=document.createElement("li"),o=document.createElement("li"),d=document.createElement("li");e.innerHTML='<button ><i class="bi bi-journals"></i></button>',r.innerHTML='<button class="about-item" style="display:none;"><i class="bi bi-newspaper"></i></button>',l.innerHTML='<button class="about-item" style="display:none;"><i class="bi bi-briefcase"></i></button>',o.innerHTML='<button class="about-item" style="display:none;"><i class="bi bi-github"></i></button>',d.innerHTML='<button class="about-item" style="display:none;"><i class="bi bi-calendar-week"></i></button>',e.title="portfolio",r.title="news",l.title="business intelligence platform",o.title="webgis github repository",d.title="calendar";const c=document.createElement("div");c.className="show-about ol-unselectable ol-control control-bar burger-item",a.appendChild(e),a.appendChild(r),a.appendChild(l),a.appendChild(o),a.appendChild(d),c.appendChild(a);super({element:c,target:i.target});e.addEventListener("click",W.bind(this),!1)}}class Ae extends _{constructor(s){const i=s||{},a=document.createElement("div"),e=document.createElement("a");e.href="https://www.progetti.interreg-italiasvizzera.eu/it/b/78/sistemainformativoperilmonitoraggiointegratodeilaghiinsubriciedeiloroe";const r=document.createElement("img");r.src=ce,r.alt="logo-simile-interreg",e.appendChild(r),a.appendChild(e);const l=document.createElement("div");l.className="project-logo ol-unselectable ol-control",l.appendChild(a);super({element:l,target:i.target})}}new _({element:document.getElementById("layerPanel")});new _({element:document.getElementById("metadataPanel")});new _({element:document.getElementById("timePanel")});new _({element:document.getElementById("basemapPanel")});new _({element:document.getElementById("plotPanel")});new _({element:document.getElementById("slidePanel")});new _({element:document.getElementById("popup")});const ve=new j,fe=new q({layers:[new w({source:ve})]});function we(){return new z({target:"map",controls:K().extend([new R,fe,new de,new ue,new pe,new me,new _e,new ge,new ye,new he,new be,new Ae]),view:new U({center:[994904.36016,5775887605341e-6],zoom:10})})}new Y;function G(t,s,i,a){return new w({source:new Z({url:s,params:{LAYERS:t,TILED:!0,STYLES:a},crossOrigin:"anonymous",serverType:"geoserver"}),visible:!1,opacity:i})}function J(t,s){return t[s.name]={},t[s.name].workspace=s.workspace,t[s.name].typology=s.typology,t[s.name].crs=s.crs,t[s.name].sensor=s.sensor,t[s.name].timeComplete=[s.timeComplete],t[s.name].timeFormatted=[s.timeFormatted],t[s.name].level=s.level,t[s.name].layer=[s.layer],t}function Le(t,s,i){let a=Object.keys(s),e={};return e.static={},e.time={},e.basemap={},t.forEach(r=>{let l={},o=r.Name.split(":");if(l.workspace=o[0],l.name=o[1].split("_").slice(0,3).join("_"),l.sensor=o[1].split("_")[0],l.typology=o[1].split("_")[1],l.crs=o[1].split("_")[2],o[1].split("_")[3]!=null){l.timeComplete=o[1].split("_")[3];let c=o[1].split("_")[3].split("T")[0];l.timeFormatted=c.slice(0,4)+"-"+c.slice(4,6)+"-"+c.slice(6,8)}else l.timeComplete=void 0,l.timeFormatted=void 0;l.level=o[1].split("_")[4];let d="";a.includes(l.typology)&&(d=l.typology.toLowerCase()),l.layer=G(r.Name,i,.5,d),l.timeComplete!=null?l.name in e.time?(l.layer=G(r.Name,i,1,d),e.time[l.name].timeComplete.push(l.timeComplete),e.time[l.name].timeFormatted.push(l.timeFormatted),e.time[l.name].layer.push(l.layer)):(l.layer=G(r.Name,i,1),e.time=J(e.time,l)):e.static=J(e.static,l)}),e}function Ce(t){let s={osm:{title:"osm",layer:[new w({source:new j,visible:!0})]},watercolor:{title:"watercolor",source:"Stamen",layer:[new w({source:new P({layer:"watercolor"}),visible:!1})]},terrain:{title:"terrain",source:"Stamen",layer:[new w({source:new P({layer:"terrain"}),visible:!1})]},toner:{title:"toner",source:"Stamen",layer:[new w({source:new P({layer:"toner"}),visible:!1})]}};return t.basemap=s,t}function xe(t){let s={},i=[],a=[],e=[],r=[],l=[];for(let o in t)if(o=="time")for(let d in t[o]){let c=t[o][d].layer;c.title="time",l.push(new V({layers:c,visible:!0,opacity:.5}))}else{for(let d in t[o])if(o=="basemap"){let c=t[o][d].layer[0];c.title="basemap",i.push(c)}else if(o=="static"){let c=t[o][d].layer[0];c.title="static",a.push(c)}r[0]=new V({layers:a,visible:!0,opacity:1}),e[0]=new V({layers:i,visible:!0,opacity:1})}return s.basemap=e,s.static=r,s.time=l,s}var y=(t,s)=>{const i=t.__vccOpts||t;for(const[a,e]of s)i[a]=e;return i};const Ee={name:"Layer",props:{child_msg:{type:String,default:"Layer Panel"},layer_list:{type:Object}},data(){return{}},methods:{setLayerVisible(t,s){this.$emit("setLayerVisible",{nGroup:t,index:s})},setLayerOpacity(t,s,i){let a=t.target.value;this.$emit("setLayerOpacity",{opacity:a,nGroup:s,index:i})},setLayerMetadata(t,s){this.$emit("setLayerMetadata",{layerType:t,layerName:s})}}},f=t=>(L("data-v-1b25468b"),t=t(),C(),t),Se={id:"layerPanel",class:"layer-panel ol-unselectable ol-control"},Be=f(()=>n("h6",{class:"static-layers-title"},[n("i",{class:"bi bi-arrow-right"}),g("Static Layers")],-1)),Ie={class:"static-layers active",id:"staticLayers"},Me={class:"layer-items"},De=["onChange"],Pe={class:"title-layer"},Ve=["title"],Ne=f(()=>n("div",{class:"dwnld-layer"},[n("i",{class:"bi bi-box-arrow-down"})],-1)),ke=["onClick"],Te=f(()=>n("i",{class:"bi bi-info-square"},null,-1)),We=[Te],Ge=f(()=>n("div",{class:"opct-layer"},[n("i",{class:"bi bi-circle-half"})],-1)),Oe={class:"opct-range-layer"},Qe=["onChange"],je=f(()=>n("h6",{class:"time-series-layers-title"},[n("i",{class:"bi bi-arrow-right"}),g("Time Series Layers")],-1)),Ye={class:"time-series-layers active",id:"timeSeriesLayers"},He={class:"layer-items"},$e=["onChange"],Je={class:"title-layer"},Fe=["title"],Xe=f(()=>n("div",{class:"dwnld-layer"},[n("i",{class:"bi bi-box-arrow-down"})],-1)),qe=["onClick"],ze=f(()=>n("i",{class:"bi bi-info-square"},null,-1)),Ke=[ze],Re=f(()=>n("div",{class:"opct-layer"},[n("i",{class:"bi bi-circle-half"})],-1)),Ue={class:"opct-range-layer"},Ze=["onChange"];function et(t,s,i,a,e,r){return p(),m("div",Se,[g(u(i.child_msg)+" ",1),Be,n("div",Ie,[(p(!0),m(B,null,I(i.layer_list.static,(l,o,d)=>(p(),m("div",{class:"static-layer layer-list",key:l.static},[n("div",Me,[n("div",{class:N("chckbx-layer layer-static-"+d)},[n("input",{type:"checkbox",title:"set visible",name:"",id:"",onChange:c=>r.setLayerVisible(1,d)},null,40,De)],2),n("div",Pe,[n("p",{title:o},u(o),9,Ve)]),Ne,n("div",{class:"info-layer",onClick:c=>r.setLayerMetadata("static",{key:o})},We,8,ke),Ge,n("div",Oe,[n("input",{type:"range",name:"",id:"",min:"0",max:"1",step:"0.01",value:"0.5",onChange:c=>r.setLayerOpacity(c,1,d)},null,40,Qe)])])]))),128))]),je,n("div",Ye,[(p(!0),m(B,null,I(i.layer_list.time,(l,o,d)=>(p(),m("div",{class:"time-series-layer layer-list",key:l.time},[n("div",He,[n("div",{class:N("chckbx-layer layer-timeSeries-"+d)},[n("input",{type:"checkbox",title:"set visible",name:"",id:"",onChange:c=>r.setLayerVisible(2,d)},null,40,$e)],2),n("div",Je,[n("p",{title:o},u(o),9,Fe)]),Xe,n("div",{class:"info-layer",onClick:c=>r.setLayerMetadata("time",{key:o})},Ke,8,qe),Re,n("div",Ue,[n("input",{type:"range",name:"",id:"",min:"0",max:"1",step:"0.01",value:"0.5",onChange:c=>r.setLayerOpacity(c,2,d)},null,40,Ze)])])]))),128))])])}var tt=y(Ee,[["render",et],["__scopeId","data-v-1b25468b"]]);const st={name:"Layer",props:{child_msg:{type:String,required:!0,default:"Metadata Panel"},title:{type:String,required:!0,default:"Title"},abstract:{type:String,required:!0,default:"Select a layer"},typology:{type:String,required:!0,default:"N/A"},units:{type:String,required:!0,default:"N/A"},crs:{type:String,required:!0,default:"N/A"},to:{type:String,required:!0,default:"N/A"},tf:{type:String,required:!0,default:"N/A"},legend:{type:String,required:!0,default:"N/A"}},data(){return{}}},b=t=>(L("data-v-1728e34c"),t=t(),C(),t),it={id:"metadataPanel",class:"metadata-panel ol-unselectable ol-control"},at={class:"meta-title"},nt={class:"meta-abstract"},rt=b(()=>n("strong",null,"Abstract:",-1)),lt={class:"meta-info"},ot={class:"meta-details"},ct={class:"meta-details-typology"},dt=b(()=>n("strong",null,"Typology:",-1)),ut={class:"meta-details-units"},pt=b(()=>n("strong",null,"Units:",-1)),mt={class:"meta-details-crs"},_t=b(()=>n("strong",null,"CRS:",-1)),gt={class:"meta-details-tstart"},yt=b(()=>n("strong",null,"Time Start:",-1)),ht=b(()=>n("br",null,null,-1)),bt={class:"meta-details-tend"},At=b(()=>n("strong",null,"Time end:",-1)),vt=b(()=>n("br",null,null,-1)),ft={class:"meta-legend"},wt=b(()=>n("strong",null,"Legend:",-1)),Lt=["src"];function Ct(t,s,i,a,e,r){return p(),m("div",it,[g(u(i.child_msg)+" ",1),n("div",at,[n("h6",null,u(i.title),1)]),n("div",nt,[rt,g(u(i.abstract),1)]),n("div",lt,[n("div",ot,[n("div",ct,[dt,g(u(i.typology),1)]),n("div",ut,[pt,g(" ["+u(i.units)+"]",1)]),n("div",mt,[_t,g(u(i.crs),1)]),n("div",gt,[yt,ht,g(u(i.to),1)]),n("div",bt,[At,vt,g(u(i.tf),1)])]),n("div",ft,[wt,n("img",{src:i.legend,alt:""},null,8,Lt)])])])}var xt=y(st,[["render",Ct],["__scopeId","data-v-1728e34c"]]);const Et={name:"Time",props:{child_msg:{type:String,default:"Time Panel"},title:{type:String,required:!0,default:"Select Layer"},datesList:{type:Object,required:!0,default:()=>({"0":"Select TS"})},datesListLength:{type:String,required:!0},currentDate:{type:String,required:!0},currentDateIndex:{type:String,required:!0},currentGroup:{type:String,required:!0}},data(){return{}},methods:{updateLayerSlider(t){console.log(t);let s=t.target.value,i=parseInt(s),a=this.currentGroup+2,e=document.getElementById("dropdownDate");e.selectedIndex=s,this.cDate=this.datesList[s],this.cDateIndex=s,this.$emit("updateLayerSlider",{nGroup:a,emitDate:i})},updateLayerDropdown(t){let s=t.target.value,i=parseInt(s),a=this.currentGroup+2,e=document.getElementById("sliderDate");e.value=s,this.cDate=this.datesList[s],this.cDateIndex=s,this.$emit("updateLayerDropdown",{nGroup:a,emitDate:i})},stepBackwards(){let t=document.getElementById("sliderDate").value,s=t-1,i=t-1,a=this.currentGroup+2;t-1>=0?(this.cDate=this.datesList[i],this.cDateIndex=i,document.getElementById("dropdownDate").selectedIndex=i,document.getElementById("sliderDate").value=i,this.$emit("updateLayerDropdown",{nGroup:a,emitDate:s})):alert("There are no previous maps for the current layer")},stepForwards(){let t=document.getElementById("dropdownDate").value,s=Number(t)+1,i=Number(t)+1,a=this.currentGroup+2;Number(t)+1<=this.datesListLength-1?(this.cDate=this.datesList[i],this.cDateIndex=i,document.getElementById("dropdownDate").selectedIndex=i,document.getElementById("sliderDate").value=i,this.$emit("updateLayerDropdown",{nGroup:a,emitDate:s})):alert("There are no later maps for the current layer")}}},O=t=>(L("data-v-48277036"),t=t(),C(),t),St={id:"timePanel",class:"time-panel ol-unselectable ol-control"},Bt={class:"time-container"},It={class:"time-header"},Mt={class:"time-controls"},Dt={class:"time-controls-dates"},Pt=["value","selected"],Vt={class:"time-slider"},Nt=["max","value"],kt={id:"time-controls-backward",class:"time-controls_item ol-unselectable ol-control"},Tt=O(()=>n("i",{class:"bi bi-skip-backward-circle"},null,-1)),Wt=[Tt],Gt=O(()=>n("div",{id:"time-controls-play",class:"time-controls_item ol-unselectable ol-control"},[n("div",null,[n("button",{class:"time-panel-control-button"},[n("i",{class:"bi bi-play-circle"})])])],-1)),Ot={id:"time-controls-forward",class:"time-controls_item ol-unselectable ol-control"},Qt=O(()=>n("i",{class:"bi bi-skip-forward-circle"},null,-1)),jt=[Qt];function Yt(t,s,i,a,e,r){return p(),m("div",St,[n("p",null,u(i.child_msg),1),n("div",Bt,[n("div",It,[n("strong",null,u(i.title),1)]),n("div",Mt,[n("div",Dt,[n("select",{name:"",id:"dropdownDate",onChange:s[0]||(s[0]=l=>r.updateLayerDropdown(l))},[(p(!0),m(B,null,I(i.datesList,(l,o)=>(p(),m("option",{value:o,selected:i.datesListLength,key:o},u(i.datesList[o]),9,Pt))),128))],32)]),n("div",Vt,[n("input",{type:"range",name:"",id:"sliderDate",min:"0",max:i.datesListLength-1,value:i.currentDateIndex,step:"1",onChange:s[1]||(s[1]=l=>r.updateLayerSlider(l))},null,40,Nt)]),n("div",kt,[n("button",{class:"time-panel-control-button",onClick:s[2]||(s[2]=(...l)=>r.stepBackwards&&r.stepBackwards(...l))},Wt)]),Gt,n("div",Ot,[n("button",{class:"time-panel-control-button",onClick:s[3]||(s[3]=(...l)=>r.stepForwards&&r.stepForwards(...l))},jt)])])])])}var Ht=y(Et,[["render",Yt],["__scopeId","data-v-48277036"]]),$t="/assets/osm.d6d13acb.png",Jt="/assets/terrain.d843a7bb.png",Ft="/assets/watercolor.8d0c5f2f.png",Xt="/assets/toner.19bbfbf8.png",qt="data:image/png;base64,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";const zt={name:"Basemap",props:{child_msg:{type:String,default:"Basemap Panel"},data:{type:Array},layer_list:{type:Object,require:!0}},data(){return{}},methods:{getImage(t){if(t=="osm")return $t;if(t=="terrain")return Jt;if(t=="watercolor")return Ft;if(t=="toner")return Xt;if(t=="none")return qt},setLayerVisible(t,s){this.$emit("setLayerVisible",{nGroup:t,index:s})}}},Kt={id:"basemapPanel",class:"basemap-panel ol-unselectable ol-control"},Rt={class:"basemap-container"},Ut=["id","checked","onChange"],Zt=["src"];function es(t,s,i,a,e,r){return p(),m("div",Kt,[n("p",null,u(i.child_msg),1),n("div",Rt,[(p(!0),m(B,null,I(i.data,(l,o)=>(p(),m("div",{key:l.layer,class:"basemap-container_item"},[n("div",null,[n("input",{type:"radio",name:"basemap-radio",id:l.layer+"-option",class:N("basemap-option"),checked:l.active,onChange:d=>r.setLayerVisible(0,o)},null,40,Ut),n("p",null,u(l.layer),1)]),n("img",{src:r.getImage(l.layer),alt:""},null,8,Zt)]))),128))])])}var ts=y(zt,[["render",es],["__scopeId","data-v-d0c7ec78"]]);const ss={name:"Plot",props:{child_msg:{type:String,default:"Plot Panel"}},data(){return{}}},is={id:"plotPanel",class:"plot-panel ol-unselectable ol-control"};function as(t,s,i,a,e,r){return p(),m("div",is,u(i.child_msg),1)}var ns=y(ss,[["render",as],["__scopeId","data-v-1eb5ca25"]]),rs="/assets/i1.39c6eac4.png",ls="/assets/i2.52627267.png",os="/assets/i3.e76ce568.png",cs="/assets/i4.df51a994.png",ds="/assets/i5.9255129d.png",us="/assets/i6.c99fefa1.png",ps="/assets/i7.1425b493.png";const ms={data(){return{}},methods:{prev(){this.$emit("prev")},next(){this.$emit("next")}}},F=t=>(L("data-v-07c985f2"),t=t(),C(),t),_s={class:"carousel-container"},gs=F(()=>n("i",{class:"bi bi-caret-left-fill"},null,-1)),ys=[gs],hs=F(()=>n("i",{class:"bi bi-caret-right-fill"},null,-1)),bs=[hs];function As(t,s,i,a,e,r){return p(),m("div",_s,[H(t.$slots,"default",{},void 0,!0),n("button",{class:"prev",onClick:s[0]||(s[0]=(...l)=>r.prev&&r.prev(...l))},ys),n("button",{class:"next",onClick:s[1]||(s[1]=(...l)=>r.next&&r.next(...l))},bs)])}var vs=y(ms,[["render",As],["__scopeId","data-v-07c985f2"]]);const fs={props:["visibleSlide","index","direction"],data(){return{}}},ws={class:"carousel-slide"};function Ls(t,s,i,a,e,r){return p(),k(se,{name:i.direction},{default:T(()=>[ee(n("div",ws,[H(t.$slots,"default",{},void 0,!0)],512),[[te,i.visibleSlide===i.index]])]),_:3},8,["name"])}var Cs=y(fs,[["render",Ls],["__scopeId","data-v-664b1638"]]);const xs={name:"Slide",props:{child_msg:{type:String,default:"Slide Panel"},settings:{type:Object}},data(){return{visibleSlide:0,direction:""}},computed:{slidesLen(){return this.settings.slides.length}},methods:{prev(){this.visibleSlide<=0?this.visibleSlide=this.slidesLen-1:this.visibleSlide--,this.direction="right"},next(){this.visibleSlide>=this.slidesLen-1?this.visibleSlide=0:this.visibleSlide++,this.direction="left"},getImage(t){if(t=="i1.png")return rs;if(t=="i2.png")return ls;if(t=="i3.png")return os;if(t=="i4.png")return cs;if(t=="i5.png")return ds;if(t=="i6.png")return us;if(t=="i7.png")return ps}},mounted(){},components:{CarouselContainer:vs,CarouselSlide:Cs}},Es=t=>(L("data-v-339db63c"),t=t(),C(),t),Ss={id:"slidePanel",class:"slide-panel ol-unselectable ol-control",style:{display:"none"}},Bs={class:"slidepanel-show"},Is={class:"slide-title"},Ms={class:"slide-description"},Ds=["src","alt"],Ps=Es(()=>n("div",{class:"slide-current"},null,-1));function Vs(t,s,i,a,e,r){const l=h("carousel-slide"),o=h("carousel-container");return p(),m("div",Ss,[g(u(i.child_msg)+" ",1),n("div",Bs,[v(o,{onPrev:r.prev,onNext:r.next},{default:T(()=>[(p(!0),m(B,null,I(i.settings.slides,(d,c)=>(p(),k(l,{key:d,index:c,visibleSlide:e.visibleSlide,direction:e.direction},{default:T(()=>[n("div",Is,u(d.title),1),n("div",Ms,u(d.description),1),n("img",{src:r.getImage(d.src),alt:c},null,8,Ds)]),_:2},1032,["index","visibleSlide","direction"]))),128))]),_:1},8,["onPrev","onNext"])]),Ps])}var Ns=y(xs,[["render",Vs],["__scopeId","data-v-339db63c"]]);const ks={setup(){},data:function(){return{}},props:{map:{type:Object,required:!0},title:{type:String,required:!0,default:"Select Layer"},evtCoordinate:{type:String,required:!0,default:"Select Layer"},pixelCoordinate:{type:String,required:!0,default:"Coordinates"},pixelInfo:{type:String,required:!0,default:"N/A"}}},X=t=>(L("data-v-238c1d0c"),t=t(),C(),t),Ts={id:"popup",class:"ol-popup"},Ws={id:"popup-title"},Gs=X(()=>n("a",{href:"#",id:"popup-closer",class:"ol-popup-closer"},null,-1)),Os=X(()=>n("div",{id:"info"},"\xA0",-1)),Qs={id:"popup-coordinate"},js={id:"popup-getinfo"};function Ys(t,s,i,a,e,r){return p(),m("div",Ts,[n("h6",Ws,u(i.title),1),Gs,Os,n("div",Qs,u(i.pixelCoordinate),1),n("div",js,u(i.pixelInfo),1)])}var Hs=y(ks,[["render",Ys],["__scopeId","data-v-238c1d0c"]]);const $s=new Y,Js={name:"WebGISContainer",data(){return{basemap_settings:this.settings.basemaps,layer_list:{},layer_groups:{},map:{},title:"Select a Layer",abstract:"N/A",to:"N/A",tf:"N/A",crs:"N/A",units:"N/A",legend:"N/A",datesList:{},currentGroup:"",currentDate:"",currentDateIndex:"",datesListLength:""}},props:{settings:{type:Object,required:!0}},components:{layerPanel:tt,metadataPanel:xt,timePanel:Ht,basemapPanel:ts,plotPanel:ns,slidePanel:Ns,popUp:Hs},methods:{setLayerVisible(t){let s=t.index,i=t.nGroup;if(i==0){let a=this.map.getLayers().array_[i].values_.layers.array_;a.forEach((e,r)=>{s!=r||a.length<s?e.setVisible(!1):e.setVisible(!0)})}else if(i==1){let a=this.map.getLayers().array_[i].values_.layers.array_[s].getVisible();this.map.getLayers().array_[i].values_.layers.array_[s].setVisible(!a)}else{let e=this.map.getLayers().array_[i+s].values_.layers.array_.length-1,r=this.map.getLayers().array_[i+s].values_.layers.array_,l=0;r.forEach((o,d)=>{let c=this.map.getLayers().array_[i+s].values_.layers.array_[d].getVisible();if(o.getVisible()==!0&&d!=e)return this.map.getLayers().array_[i+s].values_.layers.array_[d].setVisible(!c),l++,!1;l==0&&d==e&&this.map.getLayers().array_[i+s].values_.layers.array_[e].setVisible(!c)})}},setLayerVisibleTS(t){let s=t.nGroup,i=t.emitDate;this.map.getLayers().array_[s].values_.layers.array_.forEach((e,r)=>{i==r?e.setVisible(!0):e.setVisible(!1)})},setLayerOpacity(t){let s=t.opacity,i=t.index,a=t.nGroup;if(a<=1)this.map.getLayers().array_[a].values_.layers.array_[i].getVisible()==!0?(this.map.getLayers().array_[a].values_.layers.array_[i].setVisible(!1),this.map.getLayers().array_[a].values_.layers.array_[i].values_.opacity=s,this.map.getLayers().array_[a].values_.layers.array_[i].setVisible(!0)):this.map.getLayers().array_[a].values_.layers.array_[i].values_.opacity=s;else{let e=this.map.getLayers().array_[a+i];e.getVisible()==!0?(e.setVisible(!1),e.values_.opacity=s,e.setVisible(!0)):e.values_.opacity=s}},setLayerMetadata(t){let s=t.layerType,i=t.layerName.key,a=this.layer_list[s][i];if(this.title=i,s=="time"){let e=a.typology,r=a.timeFormatted;this.abstract=this.settings.typology[e].abstract,this.units=this.settings.typology[e].units,this.crs=a.crs,this.legend=a.layer[0].values_.source.getLegendUrl(),this.to=r[0],this.tf=r[r.length-1],this.datesList=this.layer_list.time[i].timeFormatted,this.currentDate=this.datesList[Object.keys(this.datesList).length-1],this.currentDateIndex=Object.keys(this.datesList).length,this.datesListLength=Object.keys(this.datesList).length,this.currentGroup=Object.keys(this.layer_list.time).indexOf(i)}},downloadData(){}},mounted(){this.basemap_settings=this.settings.basemaps,ie.get(this.settings.urlWMSget).then(t=>{let i=$s.read(t.data).Capability.Layer.Layer,a=Le(i,this.settings.typology,this.settings.urlWMS),e=Ce(a),r=xe(e);return this.layer_list=a,this.layer_group=r,r}).then(t=>{const s=we();for(let c in t)for(let A in t[c])s.addLayer(t[c][A]);this.map=s;const i=document.getElementById("popup");document.getElementById("popup-title");const a=document.getElementById("popup-coordinate"),e=document.getElementById("popup-getinfo"),r=document.getElementById("popup-closer"),l=new ae({element:i,autoPan:{animation:{duration:250}}});r.onclick=function(){return l.setPosition(void 0),r.blur(),!1},s.addControl(l);const d=this.map.getView().getResolution();s.on("singleclick",function(c){const A=c.coordinate,E=ne(re(A));a.innerHTML="<p>Coordinate: </p><code>"+E+"</code>",l.setPosition(A);const S=s.getEventPixel(c.originalEvent);s.forEachLayerAtPixel(S,function(M,ei){if(M.title!="basemap"){var Q=M.values_.source.getFeatureInfoUrl(c.coordinate,d,"EPSG:3857",{INFO_FORMAT:"text/html"});Q&&fetch(Q).then(D=>D.text()).then(D=>{e.innerHTML=D})}})}),s.on("pointermove",function(c){if(c.dragging)return;const A=s.getEventPixel(c.originalEvent),E=s.forEachLayerAtPixel(A,function(S,M){if(S.title!="basemap")return!0});s.getTargetElement().style.cursor=E?"pointer":""}),console.log(this.map.getControls())}).catch(t=>console.log(t))}},Fs=n("div",{id:"map",class:"map"},null,-1),Xs=n("div",{id:"popup",class:"popup ol-unselectable ol-control"},null,-1);function qs(t,s,i,a,e,r){const l=h("layerPanel"),o=h("metadataPanel"),d=h("timePanel"),c=h("basemapPanel"),A=h("slidePanel"),E=h("plotPanel"),S=h("popUp");return p(),m("div",null,[Fs,v(l,{child_msg:"Layer-Panel",layer_list:e.layer_list,onSetLayerVisible:r.setLayerVisible,onSetLayerOpacity:r.setLayerOpacity,onSetLayerMetadata:r.setLayerMetadata},null,8,["layer_list","onSetLayerVisible","onSetLayerOpacity","onSetLayerMetadata"]),v(o,{child_msg:"Metadata-Panel",settings:i.settings,title:e.title,abstract:e.abstract,to:e.to,tf:e.tf,units:e.units,crs:e.crs,legend:e.legend},null,8,["settings","title","abstract","to","tf","units","crs","legend"]),v(d,{child_msg:"Time-Panel",title:e.title,datesList:e.datesList,datesListLength:e.datesListLength,currentDate:e.currentDate,currentDateIndex:e.currentDateIndex,currentGroup:e.currentGroup,onUpdateLayerSlider:r.setLayerVisibleTS,onUpdateLayerDropdown:r.setLayerVisibleTS,onStepBackwards:r.setLayerVisibleTS,onStepForwards:r.setLayerVisibleTS},null,8,["title","datesList","datesListLength","currentDate","currentDateIndex","currentGroup","onUpdateLayerSlider","onUpdateLayerDropdown","onStepBackwards","onStepForwards"]),v(c,{child_msg:"Basemap-Panel",data:e.basemap_settings,layer_list:e.layer_list,onSetLayerVisible:r.setLayerVisible},null,8,["data","layer_list","onSetLayerVisible"]),v(A,{child_msg:"Slide-Panel",settings:i.settings},null,8,["settings"]),v(E,{child_msg:"Plot-Panel"}),v(S),Xs])}var zs=y(Js,[["render",qs]]);const Ks={urlWMS:"http://127.0.0.1/geoserver/geonode/wms",urlWMSget:"http://127.0.0.1/geoserver/ows?service=wms&version=1.3.0&request=GetCapabilities",typology:{CHL:{title:"Chlorophyll-a",abstract:"Chlorophyll-a allows plants to photosintezise. This measurement is used to classify the trophic conditionof a water body. The Chlorophyll-a maps presented have been processed using the Sentinel-3 OLCI sensor",style:"chl",units:"mg/m3"},TSM:{title:"Total Suspended Matter",abstract:"Total suspended matter concentration",style:"tsm",units:"mg/m3"},LSWT:{title:"Lake Surface Water Temperature",abstract:"Average lake surface temperature",style:"lswt",units:"\xB0C"}},basemaps:[{layer:"osm",source:"osm",src:"osm.png",active:!0},{layer:"watercolor",source:"stamen",src:"watercolor.png",active:!1},{layer:"terrain",source:"terrain-labels",src:"terrain.png",active:!1},{layer:"toner",source:"toner",src:"toner.png",active:!1},{layer:"none",source:"none",src:"none.png",active:!1}],slides:[{title:"Welcome!",src:"i1.png",description:"1. SIMILE WebGIS enables the visualization of the water quality parameters (WQPs) maps produced for Lakes Maggiore, Lugano and Como."},{title:"Explore the different tools",src:"i2.png",description:"2. The WebGIS presents multtiple panels allowing to explore the different water quality parameters maps"},{title:"Visualize and explore the WQP",src:"i3.png",description:"3. Review the different components allowing the visualization of the maps, such as the layer panel, metadata panel and time controller"},{title:"Observe the evolution of the time series",src:"i4.png",description:"4. Use the time manager to observe the changes of the parameters in time."},{title:"Observe the evolution of the time series",src:"i5.png",description:"4. Use the time manager to observe the changes of the parameters in time."},{title:"Change the basemap",src:"i6.png",description:"5. Customize the view of the WebGIS by using different basemaps"},{title:"Explore the guide",src:"i7.png",description:"6. Review the guide for the WebGIS"}]};const Rs={name:"App",data(){return{settings:Ks}},components:{WebGISContainer:zs}};function Us(t,s,i,a,e,r){const l=h("WebGISContainer");return p(),k(l,{settings:e.settings,layer:t.layer_list},null,8,["settings","layer"])}var Zs=y(Rs,[["render",Us],["__scopeId","data-v-1bf46334"]]);le(Zs).mount("#app");
//# sourceMappingURL=index.b91e325e.js.map
